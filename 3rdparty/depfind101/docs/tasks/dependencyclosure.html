<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<title>DependencyClosure Task</title>
</head>

<body>

<h2><a name="dependencyclosure">DependencyClosure</a></h2>

<h3>Description</h3>

<p>Computes transitive closure in a dependency graph from a given starting
point.</p>

<p>This tool takes a dependency graph generated by
<a href="dependencyextractor.html">DependencyExtractor</a> and follows a trail
of dependencies to construct a subgraph of all dependencies related to a
starting point.  The result is a new dependency graph which is a subgraph of
the original one.  You can use the various <code>XXXToText</code> and
<code>XXXToHTML</code> XSL transformations to render the graph as text or HTML
for human reading.</p>

<p>You can limit the number of hops downstream, along outbound dependencies,
with <code>maximumoutbounddepth</code>.  You can limit the number of hops
upstream, along inbound dependencies, with <code>maximuminbounddepth</code>.
By default, the tool will go as far as possible along outbound dependencies
without visiting any element twice.</p>

<p>One limitation: the graph must be maximized for anything other than
feature-to-feature queries.  Because of a limitation in the closure
computation, it does not detect implicit dependencies and only follows
dependencies that have been made explicit.</p>

<p>With the <code>serialize</code> attribute, it serializes the entire
dependency graph with Java serialization.</p>

<p>With the <code>xml</code> attribute, it converts the entire dependency
graph into an XML document that follows the
<code><href a="http://depfind.sourceforge.net/dtd/dependencies.dtd">dependencies</a></code>
DTD.</p>

<h3>Parameters</h3>

<table border="1" cellpadding="2" cellspacing="0">
  <tr>
    <td valign="top"><b>Attribute</b></td>
    <td valign="top"><b>Description</b></td>
    <td align="center" valign="top"><b>Required</b></td>
  </tr>
  <tr>
    <td valign="top">srcfile</td>
    <td valign="top">filename of the XML document containing the dependency graph.</td>
    <td valign="top" align="center">Yes</td>
  </tr>
  <tr>
    <td valign="top">validate</td>
    <td valign="top">validate the input XML against its DTD.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">destfile</td>
    <td valign="top">where to write the output.  If the file does not exists,
    it is created.  If it already exists, its content is overwritten.</td>
    <td valign="top" align="center">Yes</td>
  </tr>
  <tr>
    <td valign="top">scopeincludes</td>
    <td valign="top">the name of a package, class, or feature must match the
    regular expressions for it to be included in the query's focus.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">scopeexcludes</td>
    <td valign="top">the name of a package, class, or feature must NOT match
    the regular expressions for it to be included in the query's focus.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">packagescope</td>
    <td valign="top">select packages as part of the query's focus.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">packagescopeincludes</td>
    <td valign="top">the name of a package must match the
    regular expressions for it to be included in the query's focus.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">packagescopeexcludes</td>
    <td valign="top">the name of a package must NOT match
    the regular expressions for it to be included in the query's focus.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">classscope</td>
    <td valign="top">select classes (with their package) as part of the
    query's focus.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">classscopeincludes</td>
    <td valign="top">the name of a class must match the
    regular expressions for it to be included in the query's focus.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">classscopeexcludes</td>
    <td valign="top">the name of a class must NOT match
    the regular expressions for it to be included in the query's focus.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">featurescope</td>
    <td valign="top">select features (with their class and package) as part
    of the query's focus.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">featurescopeincludes</td>
    <td valign="top">the name of a feature must match the
    regular expressions for it to be included in the query's focus.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">featurescopeexcludes</td>
    <td valign="top">the name of a feature must NOT match
    the regular expressions for it to be included in the query's focus.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">filterincludes</td>
    <td valign="top">the name of a package, class, or feature at the other
    end of the dependency must match the regular expressions for the
    dependency to be included in the results.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">filterexcludes</td>
    <td valign="top">the name of a package, class, or feature at the other
    end of the dependency must NOT match the regular expressions for the
    dependency to be included in the results.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">packagefilter</td>
    <td valign="top">show dependencies to and/or from packages.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">packagefilterincludes</td>
    <td valign="top">the name of a package at the other
    end of the dependency must match the regular expressions for the
    dependency to be included in the results.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">packagefilterexcludes</td>
    <td valign="top">the name of a package at the other
    end of the dependency must NOT match the regular expressions for the
    dependency to be included in the results.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">classfilter</td>
    <td valign="top">show dependencies to and/or from classes.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">classfilterincludes</td>
    <td valign="top">the name of a class at the other
    end of the dependency must match the regular expressions for the
    dependency to be included in the results.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">classfilterexcludes</td>
    <td valign="top">the name of a class at the other
    end of the dependency must NOT match the regular expressions for the
    dependency to be included in the results.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">featurefilter</td>
    <td valign="top">show dependencies to and/or from features.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">featurefilterincludes</td>
    <td valign="top">the name of a feature at the other
    end of the dependency must match the regular expressions for the
    dependency to be included in the results.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">featurefilterexcludes</td>
    <td valign="top">the name of a feature at the other
    end of the dependency must NOT match the regular expressions for the
    dependency to be included in the results.</td>
    <td valign="top" align="center">No</td>
  </tr>

  <tr>
    <td valign="top">all</td>
    <td valign="top">shortcut for <code>packagescope</code>,
    <code>classscope</code>, <code>featurescope</code>,
    <code>packagefilter</code>, <code>classfilter</code>, and
    <code>featurefilter</code>.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">p2p</td>
    <td valign="top">shortcut for <code>packagescope</code> and
    <code>packagefilter</code>.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">c2p</td>
    <td valign="top">shortcut for <code>classscope</code> and
    <code>packagefilter</code>.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">c2c</td>
    <td valign="top">shortcut for <code>classscope</code> and
    <code>classfilter</code>.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">f2f</td>
    <td valign="top">shortcut for <code>featurescope</code> and
    <code>featurefilter</code>.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">includes</td>
    <td valign="top">shortcut for <code>scopeincludes</code> and
    <code>filterincludes</code>.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">excludes</td>
    <td valign="top">shortcut for <code>scopeexcludes</code> and
    <code>filterexcludes</code>.</td>
    <td valign="top" align="center">No</td>
  </tr>

  <tr>
    <td valign="top">serialize</td>
    <td valign="top">writes the dependency graph as serialized Java
    objects.  <strong>At this time, Dependency Finder cannot deserialize
    a saved graph, so this switch is pretty useless.</strong></td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">xml</td>
    <td valign="top">writes the dependency graph as an XML document with the
    <code><a href="http://depfind.sourceforge.net/dtd/dependencies.dtd">dependencies</a></code>
    DTD.</td>
    <td valign="top" align="center">No</td>
  </tr>
  <tr>
    <td valign="top">dtdprefix</td>
    <td valign="top">prefix of the DTD URL for the XML output document.
    Only useful with <code>xml</code>.</td>
    <td align="center" valign="top">No</td>
  </tr>
  <tr>
    <td valign="top">indenttext</td>
    <td valign="top">used for each indentation level in textual and XML output.</td>
    <td align="center" valign="top">No</td>
  </tr>
  <tr>
    <td valign="top">maximuminbounddepth</td>
    <td valign="top">maximum distance to travel upstream by following inbound
    dependencies.  If its value is zero (0), don't follow any inbound
    dependencies.  If its value is omitted, or if it is not a number, than the
    traversal is unbounded.  If the attribute is omitted, the closure will not
    follow any inbound dependencies.</td>
    <td align="center" valign="top">No</td>
  </tr>
  <tr>
    <td valign="top">maximumoutbounddepth</td>
    <td valign="top">Maximum distance to travel downstream by following outbound
    dependencies.  If its value is zero (0), don't follow any outbound
    dependencies.  If its value is omitted, or if it is not a number, than the
    traversal is unbounded.  If the attribute is omitted, the traversal will be
    unbounded.</td>
    <td align="center" valign="top">No</td>
  </tr>
</table>

<h3>Nested elements</h3>

<p>None</p>

<h3>Examples</h3>

<p>To analyze the graph in <code>df.xml</code> and compute the transitive
closure streaming from <code>DependencyExtractor.main()</code> and save it to
<code>de.closure.xml</code>:</p>

<pre>  &lt;dependencyclosure srcfile=&quot;df.xml&quot;
                     destfile=&quot;de.closure.xml&quot;
                     p2p=&quot;yes&quot;/&gt;</pre>

<p>To analyze the graph in <code>df.xml</code> and trace back calls to
<code>NodeFactory.CreateXXX()</code> up to three levels deep:</p>

<pre>  &lt;dependencyclosure srcfile=&quot;df.xml&quot;
                     destfile=&quot;create.closure.xml&quot;
                     all=&quot;yes&quot;
                     scopeincludes=&quot;/NodeFactory.Create/&quot;
                     maximuminbounddepth=&quot;3&quot;
                     maximumoutbounddepth=&quot;0&quot;/&gt;</pre>

<p>To analyze the graph in <code>df.xml</code> and trace back calls to
<code>NodeFactory.CreateXXX()</code> up to three levels deep, and then
convert it to HTML:</p>

<pre>  &lt;dependencyclosure srcfile=&quot;df.xml&quot;
                     destfile=&quot;create.closure.xml&quot;
                     all=&quot;yes&quot;
                     scopeincludes=&quot;/NodeFactory.Create/&quot;
                     maximuminbounddepth=&quot;3&quot;
                     maximumoutbounddepth=&quot;0&quot;/&gt;
  &lt;xslt style=&quot;${dependencyfinder.home}/etc/ClosureToHTML.xsl&quot;
        in=&quot;create.closure.xml&quot;
        out=&quot;create.closure.html&quot;/></pre>

<hr>

<p align="center">Copyright &copy; 2001-2003 Jean Tessier.  All rights reserved.</p>

</body>

</html>
