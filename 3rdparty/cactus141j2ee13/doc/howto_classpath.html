<HTML><HEAD><TITLE>Setting the Cactus CLASSPATH</TITLE></HEAD><BODY alink="#023264" bgcolor="#ffffff" leftmargin="4" link="#525D76" marginheight="4" marginwidth="4" text="#000000" topmargin="4" vlink="#023264"><TABLE border="0" cellpadding="0" cellspacing="0" width="100%"><TR><TD align="left" valign="top"><A href="http://jakarta.apache.org/index.html"><IMG border="0" hspace="0" src="./images/jakarta-logo.gif" vspace="0"></A></TD><TD align="left" bgcolor="#ffffff" valign="middle" width="100%"><IMG align="right" alt="Setting the Cactus CLASSPATH" border="0" hspace="0" src=".//images/logocactus.gif" vspace="0"></TD></TR><TR><TD colspan="2" height="2" width="100%"><HR noshade="" size="1"></TD></TR></TABLE><TABLE border="0" cellpadding="0" cellspacing="0" width="100%"><TR><TD valign="top" width="1%"></TD><TD nowrap="1" valign="top" width="14%"><FONT size="-2">
              Last update : August 31 2002</FONT><BR><FONT size="-2">
              Doc for : v1.4.1</FONT><BR><FONT face="arial,helvetica,sanserif">

  <BR><FONT color="#000000" size="+1">About</FONT><BR><FONT size="-1">
    <LI><A href="./index.html"><FONT size="-1">What is Cactus ?</FONT></A></LI>
    <LI><A href="./news.html"><FONT size="-1">News</FONT></A></LI>
    <LI><A href="./changes.html"><FONT size="-1">Changes</FONT></A></LI>
    <LI><A href="./features.html"><FONT size="-1">Features/Status</FONT></A></LI>
    <LI><A href="./goals.html"><FONT size="-1">Goals</FONT></A></LI>
    <LI><A href="./todo.html"><FONT size="-1">Roadmap/Todo</FONT></A></LI>
    <LI><A href="./contributors.html"><FONT size="-1">Contributors</FONT></A></LI>
    <LI><A href="./contributing.html"><FONT size="-1">Contributing</FONT></A></LI>
    <LI><A href="./users.html"><FONT size="-1">Cactus Users</FONT></A></LI>
    <LI><A href="./testedon.html"><FONT size="-1">Tested on ...</FONT></A></LI>
    <LI><A href="./license.html"><FONT size="-1">License</FONT></A></LI>
  </FONT><BR>

  <BR><FONT color="#000000" size="+1">Downloads</FONT><BR><FONT size="-1">
    <LI><A href="./downloads.html"><FONT size="-1">Downloads</FONT></A></LI>
  </FONT><BR>

  <BR><FONT color="#000000" size="+1">Documentation</FONT><BR><FONT size="-1">
    <LI><A href="./how_it_works.html"><FONT size="-1">How it works ?</FONT></A></LI>
    
    <LI><A href="./getting_started.html"><FONT size="-1">Getting Started</FONT></A></LI>
    <LI><A href="./mockobjects.html"><FONT size="-1">Mock vs Container</FONT></A></LI>
    <LI><A href="./javadoc.html"><FONT size="-1">Javadocs</FONT></A></LI>
    
    
    <LI><A href="./faq.html"><FONT size="-1">FAQ</FONT></A></LI>
  </FONT><BR>

  <BR><FONT color="#000000" size="+1">Howto Guides</FONT><BR><FONT size="-1">
    <LI><A href="./howto_classpath.html"><FONT size="-1">Classpath Howto</FONT></A></LI>
    <LI><A href="./howto_config.html"><FONT size="-1">Config Howto</FONT></A></LI>
    <LI><A href="./howto_migration.html"><FONT size="-1">Migration Howto</FONT></A></LI>

    
    <LI><A href="./howto_testcase.html"><FONT size="-1">TestCase Howto</FONT></A></LI>
    
    
    

    <LI><A href="./howto_jsp.html"><FONT size="-1">Jsp Howto</FONT></A></LI>
    <LI><A href="./howto_runner.html"><FONT size="-1">Runner Howto</FONT></A></LI>
    <LI><A href="./howto_security.html"><FONT size="-1">Security Howto</FONT></A></LI>

    
    <LI><A href="./howto_ant.html"><FONT size="-1">Ant Howto</FONT></A></LI>
    
    
    

    <LI><A href="./howto_httpunit.html"><FONT size="-1">HttpUnit Howto</FONT></A></LI>
    <LI><A href="./howto_sample.html"><FONT size="-1">Sample Howto</FONT></A></LI>

    
    <LI><A href="./howto_ejb.html"><FONT size="-1">EJB Howto</FONT></A></LI>
    

    
    <LI><A href="./howto_ide.html"><FONT size="-1">IDE Howto</FONT></A></LI>
    
    
    
    

    <LI><A href="./howto_tomcat.html"><FONT size="-1">Tomcat Howto</FONT></A></LI>

    <LI><A href="./howto_junitee.html"><FONT size="-1">JUnitEE Howto</FONT></A></LI>
  </FONT><BR>

  <BR><FONT color="#000000" size="+1">Support</FONT><BR><FONT size="-1">
    <LI><FONT size="-1"><A href="http://jakarta.apache.org/site/bugs.html" target="">Bug database</A></FONT></LI>
    <LI><A href="./mailinglist.html"><FONT size="-1">Mailing list</FONT></A></LI>
  </FONT><BR>

  <BR><FONT color="#000000" size="+1">Misc.</FONT><BR><FONT size="-1">
    <LI><A href="./cactusname.html"><FONT size="-1">Why the name ?</FONT></A></LI>
    <LI><A href="./logos.html"><FONT size="-1">Logo Challenge</FONT></A></LI>
    <LI><A href="./resources.html"><FONT size="-1">Resources</FONT></A></LI>
    <LI><A href="./coverage.html"><FONT size="-1">Test Coverage</FONT></A></LI>
    
    
    
    <LI><FONT size="-1"><A href="http://jakarta.apache.org/cactus/stats/index.html" target="">Stats</A></FONT></LI>
    
  </FONT><BR>

  <BR><FONT color="#000000" size="+1">Developers</FONT><BR><FONT size="-1">
    <LI><FONT size="-1"><A href="http://jakarta.apache.org/site/cvsindex.html" target="">CVS</A></FONT></LI>
    <LI><A href="./coding_conventions.html"><FONT size="-1">Coding Conventions</FONT></A></LI>
    <LI><A href="./build_result.html"><FONT size="-1">Build results</FONT></A></LI>
    <LI><A href="./release_checklist.html"><FONT size="-1">Release Checklist</FONT></A></LI>
  </FONT><BR>

</FONT></TD><TD align="left" valign="top" width="*"><TABLE border="0" cellpadding="3" cellspacing="0"><TR><TD><BR>
  

  

    <DIV align="right"><TABLE border="0" cellpadding="2" cellspacing="0" width="100%"><TR><TD bgcolor="#525D76"><FONT color="#ffffff" face="arial,helvetica,sanserif" size="+1"><B>Setting up Cactus Classpaths</B></FONT></TD></TR><TR><TD><FONT color="#000000" face="arial,helvetica,sanserif"><BR>

      <P align="justify">
        You must understand that your Cactus tests are started by a JUnit
        Test Runner (in the client JVM) and that the Cactus TestCase that you
        have extended will connect to the Cactus Redirector (in the server
        JVM), where your <CODE><FONT face="courier, monospaced">testXXX()</FONT></CODE> methods will be executed. See
        <A href="how_it_works.html">How it works</A> to understand the
        mechanism.
      </P>

      <P align="justify">
        Please also check the <A href="howto_runner.html">TestRunner
        Howto</A> tutorial which explains all the different ways to
        start a JUnit Test Runner.
      </P>

      <P><TABLE border="0" cellpadding="0" cellspacing="3" width="100%"><TR><TD valign="top" width="28"><IMG alt="Note" border="0" height="29" hspace="0" src="images/note.gif" vspace="0" width="28"></TD><TD valign="top"><FONT color="#000000" face="arial,helvetica,sanserif" size="-1"><I>
        <B>It is very important that you understand what files you need
        to put in the client and server classpaths, as 99% of Cactus
        errors come from an incorrect classpath !</B>
      </I></FONT></TD></TR></TABLE></P>

      <P align="center"><IMG alt="Classpaths" border="0" hspace="4" src="images/classpath.jpg" vspace="4"></P>

      <DIV align="right"><TABLE border="0" cellpadding="2" cellspacing="0" width="98%"><TR><TD bgcolor="#525D76"><FONT color="#ffffff" face="arial,helvetica,sanserif" size="+0"><B>Client side classpath</B></FONT></TD></TR><TR><TD><FONT color="#000000" face="arial,helvetica,sanserif"><BR>

        <P align="justify">
          The Cactus tests are started by running a JUnit Test Runner (For
          explanations on how JUnit works see the
          <A href="http://junit.sourceforge.net">JUnit web site</A>).
          As pictured in figure 1, you need to have the following jars and
          classes in your client side classpath :
        </P>
        <BLOCKQUOTE><UL>
          <LI>
            <B><CODE><FONT face="courier, monospaced">junit.jar</FONT></CODE></B> : obviously this is needed
            for the JUnit Test Runner and because the Cactus
            <CODE><FONT face="courier, monospaced">XXXTestCase</FONT></CODE> classes extend the JUnit
            <CODE><FONT face="courier, monospaced">org.junit.framework.TestCase</FONT></CODE> class.
          </LI>
          <LI>
            <B><CODE><FONT face="courier, monospaced">cactus.jar</FONT></CODE></B> : well, this is the
            Cactus jar containing all Cactus classes,
          </LI>
          <LI>
            <B>your test classes</B> : these are
            your test classes that extend the Cactus <CODE><FONT face="courier, monospaced">XXXTestCase</FONT></CODE>
            classes,
          </LI>
          <LI>
            <B><CODE><FONT face="courier, monospaced">servlet.jar or j2ee.jar</FONT></CODE></B> : these are
            the Servlet API / J2EE API interfaces. This
            is needed on the client side classpath because your test cases
            extend one or several of <CODE><FONT face="courier, monospaced">XXXTestCase</FONT></CODE> which use class
            variables that are Servlet / J2EE objects
            (<CODE><FONT face="courier, monospaced">HttpSevletRequest</FONT></CODE>, <CODE><FONT face="courier, monospaced">PageContext</FONT></CODE>, ...).
            You can get this jar either from your servlet engine or from the
            <A href="http://java.sun.com">Sun Web Site</A> (
            <A href="http://java.sun.com/products/servlet/download.html">
            Servlet download page</A> or
            <A href="http://java.sun.com/j2ee/download.html">J2EE download
            page</A>).
          </LI>
          <LI>
            <B><CODE><FONT face="courier, monospaced">httpclient.jar</FONT></CODE></B> : needed for
            Cactus Cookie handling.
          </LI>
          <LI>
            <B><CODE><FONT face="courier, monospaced">commons-logging.jar</FONT></CODE></B> : Cactus uses
            the Jakarta Commons Logging facade framework to provide seamless
            Cactus logging using any existing Logging framework (Log4j,
            LogKit, JDK 1.4 Logging, etc). It is also needed for Commons
            HttpClient.
          </LI>
          <LI>
            <B><CODE><FONT face="courier, monospaced">logging framework jar</FONT></CODE>(optional)</B> : The
            logging framework to use (Log4j jar, LogKit jar, etc). It is
            optional as it is only needed for internal Cactus logging and in
            addition, the Commons Logging framework provides a simple logger
            that logs on the console.
          </LI>
          <LI>
            <B><CODE><FONT face="courier, monospaced">httpunit.jar</FONT></CODE></B>, <B>
            <CODE><FONT face="courier, monospaced">Tidy.jar</FONT></CODE></B> and <B>
            <CODE><FONT face="courier, monospaced">xerces.jar</FONT></CODE> (optional)</B> : only needed if you
            wish to use
            <A href="http://httpunit.sourceforge.net">HttpUnit</A>
            in your <CODE><FONT face="courier, monospaced">endXXX()</FONT></CODE> methods (see the
            <A href="howto_httpunit.html">HttpUnit Howto</A> tutorial).
            The 3 jars mentioned above are part of the HttpUnit distribution.
          </LI>
          <LI>
            <B><CODE><FONT face="courier, monospaced">aspectjrt.jar</FONT></CODE></B> :
            <A href="http://www.aspectj.org">AspectJ</A> runtime jar.
          </LI>
        </UL></BLOCKQUOTE>

        <P><TABLE border="0" cellpadding="0" cellspacing="3" width="100%"><TR><TD valign="top" width="28"><IMG alt="Note" border="0" height="29" hspace="0" src="images/note.gif" vspace="0" width="28"></TD><TD valign="top"><FONT color="#000000" face="arial,helvetica,sanserif" size="-1"><I>
          If you have the habit of using class variables for the classes
          to test (as opposed to declaring them within the
          <CODE><FONT face="courier, monospaced">testXXX()</FONT></CODE> method), you'll also need to put your classes
          under test in the client side classpath.
        </I></FONT></TD></TR></TABLE></P>

        <P align="justify">
          In addition to the above mentioned jars and classes, you may have
          to put the <B><CODE><FONT face="courier, monospaced">cactus.properties</FONT></CODE></B>
          configuration file in your classpath (Only if you are using it to
          configure Cactus of course). Details are described in the
          <A href="howto_config.html">Config Howto</A> tutorial).
        </P>

        <P><TABLE border="0" cellpadding="0" cellspacing="3" width="100%"><TR><TD valign="top" width="28"><IMG alt="Note" border="0" height="29" hspace="0" src="images/note.gif" vspace="0" width="28"></TD><TD valign="top"><FONT color="#000000" face="arial,helvetica,sanserif" size="-1"><I>
          If you are using Log4J as the logging framework, you will also
          need to put a <CODE><FONT face="courier, monospaced">log4j.properties</FONT></CODE> Log4j configuration
          file in your client side classpath (See the
          <A href="howto_config.html">Config Howto</A> tutorial).
        </I></FONT></TD></TR></TABLE></P>

      </FONT></TD></TR></TABLE></DIV><BR>

      <DIV align="right"><TABLE border="0" cellpadding="2" cellspacing="0" width="98%"><TR><TD bgcolor="#525D76"><FONT color="#ffffff" face="arial,helvetica,sanserif" size="+0"><B>Server side classpath</B></FONT></TD></TR><TR><TD><FONT color="#000000" face="arial,helvetica,sanserif"><BR>

        <P align="justify">
          The server side part is a webapp. It can be packaged as a .war file
          or as expanded war. It should have the following structure, which
          will ensure that the classpath is correct :
        </P>

        <BLOCKQUOTE><UL>
          <LI>
            <B><CODE><FONT face="courier, monospaced">WEB-INF/lib/cactus.jar</FONT></CODE></B> : the
            Cactus main jar,
          </LI>
          <LI>
            <B><CODE><FONT face="courier, monospaced">WEB-INF/lib/junit.jar</FONT></CODE></B> : this is
            needed because the Cactus <CODE><FONT face="courier, monospaced">XXXTestCase</FONT></CODE> extends
            the JUnit <CODE><FONT face="courier, monospaced">org.junit.framework.TestCase</FONT></CODE> class.
          </LI>
          <LI>
            <B><CODE><FONT face="courier, monospaced">WEB-INF/classes/&lt;your test classes&gt;</FONT></CODE>
            </B> : obviously as their <CODE><FONT face="courier, monospaced">testXXX()</FONT></CODE> methods will
            get executed in the container.
          </LI>
          <LI>
            <B><CODE><FONT face="courier, monospaced">WEB-INF/classes/&lt;your classes under test&gt;</FONT></CODE>
            </B> : will be called by your test classes.
          </LI>
          <LI>
            <B><CODE><FONT face="courier, monospaced">aspectjrt.jar</FONT></CODE></B> :
            <A href="http://www.aspectj.org">AspectJ</A> runtime jar.
          </LI>
          <LI>
            <B><CODE><FONT face="courier, monospaced">WEB-INF/lib/commons-logging.jar</FONT></CODE></B> :
            Cactus uses the Jakarta Commons Logging facade framework to provide
            seamless Cactus logging using any existing Logging framework (Log4j,
            LogKit, JDK 1.4 Logging, etc). It is also needed for Commons
            HttpClient.
          </LI>
          <LI>
            <B><CODE><FONT face="courier, monospaced">WEB-INF/lib/logging framework jar</FONT></CODE>
            (optional)</B> : The logging framework to use (Log4j jar,
            LogKit jar, etc). It is optional as it is only needed for internal
            Cactus logging and in addition, the Commons Logging framework
            provides a simple logger that logs on the console.
          </LI>
        </UL></BLOCKQUOTE>

       <P><TABLE border="0" cellpadding="0" cellspacing="3" width="100%"><TR><TD valign="top" width="28"><IMG alt="Note" border="0" height="29" hspace="0" src="images/note.gif" vspace="0" width="28"></TD><TD valign="top"><FONT color="#000000" face="arial,helvetica,sanserif" size="-1"><I>
          If you have several webapps that use cactus you can put all Cactus
          jars in a place loaded by your container System classloader (provided
          your container correctly sets the Context classloader). The location
          is container-dependent; for example for Tomcat 4.x, you can put the
          jars in <CODE><FONT face="courier, monospaced">TOMCAT_HOME/common/lib</FONT></CODE>.
        </I></FONT></TD></TR></TABLE></P>

        <P><TABLE border="0" cellpadding="0" cellspacing="3" width="100%"><TR><TD valign="top" width="28"><IMG alt="Note" border="0" height="29" hspace="0" src="images/note.gif" vspace="0" width="28"></TD><TD valign="top"><FONT color="#000000" face="arial,helvetica,sanserif" size="-1"><I>
          If you are using Log4J as the logging framework, you will also
          need to put a <CODE><FONT face="courier, monospaced">log4j.properties</FONT></CODE> Log4j configuration
          file in your server side classpath (usually in
          <CODE><FONT face="courier, monospaced">WEB-INF/classes</FONT></CODE>).
        </I></FONT></TD></TR></TABLE></P>

      </FONT></TD></TR></TABLE></DIV><BR>

    </FONT></TD></TR></TABLE></DIV><BR>

  
</TD></TR></TABLE></TD></TR></TABLE><BR><TABLE border="0" cellpadding="0" cellspacing="0" width="100%"><TR><TD><HR noshade="" size="1"></TD></TR><TR><TD align="center"><FONT color="#525D76" face="arial,helvetica,sanserif" size="-1"><I>
                Copyright &copy; 2000-2002 The Apache Software Foundation.
                All Rights Reserved.
               </I></FONT></TD></TR></TABLE></BODY></HTML>