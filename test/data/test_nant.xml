<project name="dotNETLogger" default="Test">

  <!-- This script expects that it is stored under

    $/Development/ULT Toolkit/4.x/Source/Logger/

  If not, the project.path for the case when we
  run under Parabuild should be adjusted accordingly. -->

  <!-- Prepare essential settings -->
  <target name="Init">
    <!-- If running under Parabuild, set project home to "current" -->
    <if test="${environment::variable-exists('PARABUILD_BUILD_NUMBER')}">
      <property name="project.home" value="."/>
    </if>

    <!-- If NOT running under Parabuild, set project home to Ranjith local dir -->
    <ifnot test="${environment::variable-exists('PARABUILD_BUILD_NUMBER')}">
      <property name="project.home" value="F:\AutoBuildTool\Source code"/>
    </if>
  </target>


  <target name="Clean" depends="Init">
  </target>


  <target name="Build" depends="Init">
    <solution configuration="Release" outputdir="${project.home}\Bin">
      <assemblyfolders>
        <include name="${project.home}\Bin"/>
      </assemblyfolders>
      <projects>
        <include name="${project.home}\dotNETLogger\dotNETLogger.csproj"/>
      </projects>
    </solution>
  </target>


  <!-- Not sure what to do with this one as it seems
  to be custmer's work in progress, at least it doesn't
  refer to any binaries generated by build -->
  <target name="Test" depends="Clean,Build">
    <exec program="F:\AutoBuildTool\Tools\NCover\ncover.console.exe"
      commandline="/c F:\AutoBuildTool\Tools\NUnit\bin\nunit-console.exe  F:\AutoBuildTool\Tools\NCover\NUnitTest.dll /o F:\AutoBuildTool\Tools\CruiseControl.NET\webdashboard\xsl\Coverage.xml"/>
  </target>
</project>

