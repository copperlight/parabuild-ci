<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
        "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">
<book>
  <title>Parabuild 4.5</title>

  <subtitle>Administrator's Manual</subtitle>

  <bookinfo>
    <copyright>
      <year>2017</year>

      <holder>Parabuild CI</holder>
    </copyright>
  </bookinfo>

  <preface>
    <title>Preface</title>

    <sect1>
      <title>About This Manual</title>

      <para>This manual is for Parabuild users or administrators responsible
        for administrative tasks such as creating and maintaining build
        configuration, managing remote servers, and administering user and group
        accounts.
      </para>

      <para>Parabuild CI (Parabuild) is an automated multi-platform
        CI/CD platform. Parabuild provides continuous
        integration builds, scheduled and manual builds. Automatic builds are
        fired upon every check-in or a group of check-ins into a project source
        line. Scheduled builds are fired at a configured time. Manual build are
        fired upon a build manager's request.
      </para>
    </sect1>

    <sect1>
      <title>Audience</title>

      <para>This guide is intended for anyone who is responsible for
        administration of a Parabuild server or a remote agent on a computer
        running a supported version of Microsoft Windows, Linux or Unix. It
        assumes a basic knowledge of corresponding operating systems and their
        conventions.
      </para>
    </sect1>

    <sect1>
      <title>Technical Support</title>

      <para>If you have any problems with the software or documentation,
        please contact Technical Support via online support forums,
        electronic mail, fax, or as described below. For information regarding
        other support information, click the Support link on the web
        site at<ulink
                url="http://www.parabuildci.org">www.parabuildci.org</ulink>.
      </para>

      <variablelist>
        <varlistentry>
          <term>Support Forum:</term>

          <listitem>
            <para>
              <ulink
                      url="http://forums.parabuildci.org/viewforum.php?f=1">
                http://forums.parabuildci.org/viewforum.php?f=1
              </ulink>
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Electronic Mail:</term>

          <listitem>
            <para>
              <ulink
                      url="mailto:support@parabuildci.org">support@parabuildci.org
              </ulink>
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Fax:</term>

          <listitem>
            <para>650-240-4455</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </sect1>
  </preface>

  <chapter>
    <title>Load Balancing and Failover</title>

    <section>
      <title>Automatic Load Balancing</title>

      <para>Remote multiplatform builds is a standard feature of a modern
        build management system. Parabuild provided this feature since its first
        release. Yet, as the number of builds grows, so does the load on remote
        build agent machines. Uneven load negatively impacts build performance.
        Manually assigning builds to agent machines to ensure even load often is
        a non-trivial and time-consuming task. Parabuild provides fully
        automatic load balancing across a build farm by selecting agents to run
        a build in a round-robin fashion. Parabuild tries to randomly select an
        agent from the pool of idle agents. Parabuild applies round-robin
        selection if there are no idle agents.
      </para>
    </section>

    <section>
      <title>Transparent Failover</title>

      <para>Increasing number of agent machines complicates management of the
        distributed build infrastructure. Agent machines may go down for
        maintenance, network connections can fail and agent hardware can break.
        Agent failures require manual re-assigning builds to operational agent
        machines and generally cause build delays and significant administrative
        headache. Parabuild introduces transparent failover for the distributed
        build infrastructure. Parabuild automatically excludes failed agent
        machines from the build farm and continues to run builds on operational
        agent machines.
      </para>
    </section>
  </chapter>

  <chapter>
    <title>Monitoring Build Statuses</title>

    <para>Build statuses page shows the configured builds and their current
      statuses. This page refreshes automatically every thirty seconds. The
      content of the page depends on the “page view” mode. There are four view
      modes: dashboard view, list view, detailed view and recent builds. To
      switch between the two modes click &#34;Dashboard View, &#34;List
      view&#34;, &#34;Detailed view&#34; or &#34;Recent Builds&#34; links,
      respectively. The differences between the modes are described below.
    </para>

    <section>
      <title>List View Mode</title>

      <para>This mode allows you to see the overview of all build statuses on
        a single page. It is suitable for ongoing surveillance of build
        statuses. When in the list view mode, the build statuses page shows a
        table with a list of builds and their current statuses (waiting,
        building e.t.c.) and a link to a page with the last build result, if it
        exists. The link is in red if the last build failed or in green if the
        last build was successful. The caption of the link shows the last build
        number and time. Control commands for each build are available only if
        the user has logged in as an administrator.
      </para>
    </section>

    <section>
      <title>Detailed View Mode</title>

      <para>This mode allows you to monitor the detailed status of a selected
        build. In the detailed view mode the page is split into two parts. On
        the left side there is a vertical navigation bar that allows you to
        select a particular build to view. The right side of the page contains
        detailed information about the current build status including:
      </para>

      <itemizedlist>
        <listitem>
          <para>Build name with the current build status.</para>
        </listitem>

        <listitem>
          <para>Currently running build steps.</para>
        </listitem>

        <listitem>
          <para>Links to the last build result including build logs, error
            quotes, and changes in the last build, such as build history, and
            date and time thereof.
          </para>
        </listitem>

        <listitem>
          <para>Link to the last clean build, if it exists.</para>
        </listitem>

        <listitem>
          <para>List of changes in the currently running build (or changes in
            the last build if the build is not running).
          </para>
        </listitem>
      </itemizedlist>
    </section>

    <section>
      <title>Monitoring Other Build Statuses While in the Detailed View
        Mode
      </title>

      <para>While in the detailed view mode, Parabuild adds a small throbber
        to the names of the build that are running:
      </para>

      <mediaobject>
        <imageobject>
          <imagedata fileref="throbbers_on_detailed_build_status.gif"/>
        </imageobject>
      </mediaobject>
    </section>

    <section>
      <title>Recent Builds Mode</title>

      <para>While in the recent builds mode, Parabuild shows a talbe with a
        system-wide list of recently completed builds. This mode allows to
        quickly access results of the most recent builds. The number of lines in
        the table is configured using users preferences. The default number of
        lines in the recent builds table is 20.
      </para>
    </section>

    <section>
      <title>Build Control Commands</title>

      <para>If a user logged in as an administrator, the build statuses page
        shows a list of build control commands. The following commands are
        available:
      </para>

      <variablelist>
        <varlistentry>
          <term>Start</term>

          <listitem>
            <para>This command starts the build if the build is idle.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Stop</term>

          <listitem>
            <para>This command forcefully stops the build if the build is
              running.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Activate</term>

          <listitem>
            <para>All builds are originally inactive. Use this command to
              activate a new build.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Edit</term>

          <listitem>
            <para>This command opens the build configuration page.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Add build</term>

          <listitem>
            <para>This command opens a new build configuration page.</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>

    <section>
      <title>Controlling Build Execution Using Change Messages</title>
      <para>By default, Parabuild will sync to the last detected change list
        of a project and build all changes since the last build. However,
        Parabuild provides 'comment log control' over this behaviour. If
        a change message has a marker string "PARABUILD_PRIORITY" in the
        comment field, Parabuild will see all changes, but will only sync
        to the change that has the marker to and do the build. At the next
        poll interval, Parabuild will then build changes after the change
        that has the marker. The marker should be separated from the content
        of the message by spaces.
      </para>

      <example>
        <title>Including PARABUILD_PRIORITY to Change Message</title>

        <programlisting>Added third-party library. PARABUILD_PRIORITY</programlisting>
      </example>

      <para>Further, Parabuild priority marker provides an ability to set up shell
        variables that that will be passed to the build.
      </para>

      <example>
        <title>Using PARABUILD_PRIORITY to Set Up Shell Variable</title>

        <programlisting>PARABUILD_PRIORITY=ENV_VARIABLE_A=FOO;ENV_VARIABLE_B=BAR;</programlisting>
      </example>
    </section>
  </chapter>

  <chapter>
    <title>Monitoring Agent Statuses</title>

    <para>Parabuild provides a page to monitor statuses of remote build
      agents. Click on "Agents" link on the top navigation bar to visit the
      agent monitoring page:
      <mediaobject>
        <imageobject>
          <imagedata fileref="agent_monitoring_page_link.gif"/>
        </imageobject>
      </mediaobject>
    </para>

    <section>
      <title>Monitoring Agent Load</title>

      <para>To monitor agent load, click on link "Agent load view". Parabuild
        will show a page with charts displaying load for the last 24 hours. A
        green marker denotes an agent that is currently offline. A red marker
        denotes an agent that is currently offline:
      </para>

      <mediaobject>
        <imageobject>
          <imagedata fileref="agent_monitoring_page_load_view.gif"/>
        </imageobject>
      </mediaobject>
    </section>

    <section>
      <title>Agent List View</title>

      <para>Agent list view page allows to take a quick look at agent
        statuses. This page shows an agent table with the following
        columns
      </para>

      <itemizedlist>
        <listitem>
          <para>Agent address</para>
        </listitem>

        <listitem>
          <para>Status</para>
        </listitem>

        <listitem>
          <para>Link to the list of build configurations attached to a build
            agent
          </para>
        </listitem>

        <listitem>
          <para>List of builds currently running on a build agent</para>
        </listitem>
      </itemizedlist>

      <mediaobject>
        <imageobject>
          <imagedata fileref="agent_monitoring_page_list_view.gif"/>
        </imageobject>
      </mediaobject>
    </section>

    <section>
      <title>Monitoring Builds on Single Agent</title>

      <para>Parabuild allows to monitor builds on a single agent. Go to Agent
        List View and click on the "Build Configurations" link:
      </para>

      <mediaobject>
        <imageobject>
          <imagedata fileref="monitoring_single_agent_build.gif"/>
        </imageobject>
      </mediaobject>

      <para>Parabuild will show a list of builds currently running on the
        selected agent. In addition to monitoring builds, this page can be used
        to stop and resume all builds on this agent.
      </para>
    </section>

    <section>
      <title>Build Control Commands</title>

      <para>If a user logged in as an administrator, the build statuses page
        shows a list of build control commands. The following commands are
        available:
      </para>

      <variablelist>
        <varlistentry>
          <term>Start</term>

          <listitem>
            <para>This command starts the build if the build is idle.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Stop</term>

          <listitem>
            <para>This command forcefully stops the build if the build is
              running.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Activate</term>

          <listitem>
            <para>All builds are originally inactive. Use this command to
              activate a new build.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Edit</term>

          <listitem>
            <para>This command opens the build configuration page.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Add build</term>

          <listitem>
            <para>This command opens a new build configuration page.</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
  </chapter>

  <chapter>
    <title>System Administration</title>

    <para>Parabuild provides a single, convenient place to manage all aspects
      of the system configuration. Click on link "Administration" on the top
      navigation bar to access various aspects of Parabuild
      configuration:
    </para>

    <mediaobject>
      <imageobject>
        <imagedata fileref="administration_link.gif"/>
      </imageobject>
    </mediaobject>

    <sect1>
      <title>Parabuild will display a list of configuration options on the
        right size of the screen
      </title>

      <para>Parabuild server provides a set of system-wide configuration
        parameters. Parabuild will request you to fill the mandatory settings
        before builds can be created. These settings include:
        <itemizedlist>
          <listitem>
            <para>Build administrator name</para>
          </listitem>

          <listitem>
            <para>Build administrator e-mail</para>
          </listitem>

          <listitem>
            <para>SMTP server</para>
          </listitem>

          <listitem>
            <para>Build manager host</para>
          </listitem>

          <listitem>
            <para>Date format</para>
          </listitem>

          <listitem>
            <para>Date and time format</para>
          </listitem>

          <listitem>
            <para>Default build status refresh rate</para>
          </listitem>

          <listitem>
            <para>Administrator's password</para>
          </listitem>
        </itemizedlist>
      </para>

      <para>In order to enter the mandatory system settings or modify optional
        settings, login to Parabuild as admin and select "System configuration"
        link on the top navigation bar. The system configuration page shows a
        list of links for editing system and instant messaging settings, and
        security. To edit general system settings, select "General Settings
        Link". After a system settings window shows up, edit the settings and
        press "Save" button. If modifications are correct, a message saying that
        the system configuration has been saved successfully will be displayed.
        The meaning of each system setting is discussed below.
      </para>

      <sect2>
        <title>E-Mail Settings</title>

        <sect3>
          <title>Build Administrator Name</title>

          <para>Build administrator name is used for specifying a name for the
            e-mail notifications that Parabuild will send. The default value for
            this setting is "Build Administrator". This is a mandatory
            setting.
          </para>
        </sect3>

        <sect3>
          <title>Build Administrator E-mail Address</title>

          <para>Parabuild uses Build administrator e-mail setting to compose
            an e-mail part of a build result notification message. Parabuild
            will also use this e-mail to report exceptional conditions. The
            Build administrator e-mail should be a valid e-mail. This is a
            mandatory setting.
          </para>
        </sect3>

        <sect3>
          <title>Default E-mail Domain</title>

          <para>Parabuild uses a default e-mail domain to compose notification
            e-mails regarding the build results from the names of users in your
            version control system. If the default e-mail domain is set and the
            version control user name is not explicitly mapped to an e-mail
            through the notification settings of a particular build
            configuration, Parabuild will compose an e-mail by per-pending a
            name of the user with "@" followed by the default e-mail domain. For
            instance, if the version control user name were "john," and the
            default domain were mycompany.com, the resulting e-mail would be
            john@mycompany.com. Default e-mail domain is an optional
            setting.
          </para>
        </sect3>

        <sect3>
          <title>SMTP Server</title>

          <para>SMTP server setting is a DNS name of an SMTP server Parabuild
            uses to send notification e-mails. This is a mandatory
            setting.
          </para>
        </sect3>

        <sect3>
          <title>SMTP server requires encrypted connection (SSL)</title>

          <para>This box should be checked if your SMTP server requires an
            encrypted connection.
          </para>
        </sect3>

        <sect3>
          <title>SMTP Server Port</title>

          <para>SMTP server port allows to set a port number the SMTP server
            listens on. This is a mandatory setting. A default value is port
            number 25.
          </para>
        </sect3>

        <sect3>
          <title>SMTP Login Name</title>

          <para>Enter an SMTP login name if your SMTP server requires explicit
            login.
          </para>
        </sect3>

        <sect3>
          <title>SMTP Server Password</title>

          <para>Enter an SMTP server password if your SMTP server requires
            explicit login.
          </para>
        </sect3>

        <sect3>
          <title>Using Git User E-mails as User Names</title>

          <para>Parabuild provides an ability to use Git user's e-mail as a name
            of the user that submitted a change list. This allows to send build
            e-mails to Git users automatically. To enable this feature, check
            box "Use Git user's e-mail".
          </para>


          <mediaobject>
            <imageobject>
              <imagedata fileref="use_git_user_email.gif"/>
            </imageobject>
          </mediaobject>
        </sect3>

        <sect3>
          <title>Case-sensitive Perforce User Names</title>

          <para>This box is used to configure correct resolution of user names
            to e-mails for Perforce. Projects running Perforce under Windows
            should uncheck the option "Case sensitive Perforce user names" that
            is available in the system-wide e-mail settings:
          </para>

          <mediaobject>
            <imageobject>
              <imagedata fileref="case_sensitive_perforce_user_names.gif"/>
            </imageobject>
          </mediaobject>
        </sect3>

        <sect3>
          <title>Include Links To Results Into Messages</title>

          <para>Parabuild supports including links to results into e-mail
            messages that Parabuild sends when a build step finishes. To enable
            including links to results, check box "Include links to results into
            messages". By default including links to results into e-mail
            messages is disabled.
          </para>
        </sect3>

        <sect3>
          <title>System Messages Prefix</title>

          <para>Content of this field will be added to subject lines of all
            system messages sent by Parabuild. The system message prefix can be
            used for easy filtering of system messages.
          </para>
        </sect3>

        <sect3>
          <title>Message Subject Templates</title>

          <para>Parabuild provides an ability to configure the content of the
            subject lines for messages that are sent when a build step starts
            and finishes through templates.
          </para>

          <sect4>
            <title>Build Step Started</title>

            <para>This field may contain a template for a subject line of a
              message that Parabuild sends when a build step is started. The
              following template parameters are
              supported:<filename>build.name</filename>,
              <filename>build.number</filename>,
              <filename>build.host</filename>
              and<filename>build.step</filename>. The default template is
              <filename>${build.step} for ${build.name} (#${build.number})
                started on ${build.host}</filename>.
            </para>
          </sect4>

          <sect4>
            <title>Build Step Finished</title>

            <para>This field may contain a template for a subject line of a
              message that Parabuild sends when a build step finishes. The
              following template parameters are
              supported:<filename>build.name</filename>,
              <filename>build.number</filename>,
              <filename>build.host,
              </filename>
              <filename>build.step,<filename>result.string</filename>, and
                <filename>result.description</filename>
              </filename>
              . The default
              template is<filename>${build.step} for ${build.name}
                (#${build.number}) on ${build.host} ${result.string}:
                ${result.description}</filename>.
            </para>
          </sect4>
        </sect3>

        <sect3>
          <title>Configuring Email Message Priority</title>

          <para>Parabuild allows setting the priority of e-mail messages that
            Parabuild sends when a build is broken or critical system errors
            occur. The priority can be set to either "Normal" or "High" using
            drop-down lists "Failed builds" and "System errors"
          </para>
        </sect3>

        <sect3>
          <title>Notifying Users with Edit Rights about Build Results</title>

          <para>To enable self-service, Parabuild allows to notify users
            having edit rights on a particular build about build results and
            system errors. If there is a problem with the build, such users can
            modify the build configuration to address the problem without going
            to a Parabuild administrator. By default this feature is enabled. To
            disable, un-check box "Notify users with edit rights".
          </para>
        </sect3>

        <sect3>
          <title>Notifying Only Administrator and User that Stopped the Build</title>

          <para>Parabuild allows to reduce the amount of e-mail messages sent to build
            participants while the build configuration is adjusted by providing a check
            box called 'Advanced stop notification'. Check this box to have Parabuild
            send e-mail notifications after a build was stopped only to the Parabuild
            administrator and the user that stopped the build. If this box is not checked
            (this ia default setting), Parabuild will send the message to all build
            participants.
          </para>
        </sect3>
      </sect2>

      <sect2>
        <title>Instant Messaging Settings</title>

        <para>Parabuild supports sending notifications about build results
          using instant messaging. Parabuild can also send system errors
          notification to build administrators. Parabuild accesses the following
          instant messaging systems:
        </para>

        <itemizedlist>
          <listitem>
            <para>Jabber (XMPP)</para>
          </listitem>
        </itemizedlist>

        <para>In order to enter or modify the instant messaging settings,
          login to Parabuild as admin and select "Administration" link on the
          top navigation bar. The system configuration page shows a list of
          system configuration links. To edit instant messaging settings, select
          "Instant Messaging Settings" link. After a instant messaging settings
          window shows up, edit the settings and press "Save" button. The
          meaning of each instant messaging setting is discussed below.
        </para>

        <sect3>
          <title>Jabber Configuration</title>

          <para>Use the "Jabber Configuration" group to enter settings for a
            Jabber server. Parabuild will use these setting to send instant
            messages about build results and system notifications.
          </para>

          <para>Parabuild uses user's e-mail address to find an instant
            messaging address of a user. When Parabuild is ready to send a
            message, it will use user's e-mail address to look up a user in the
            list of Parabuild users. If a user is found and instant messaging is
            enabled for the user, Parabuild will send the message.
          </para>

          <note>
            <para>To enable sending instant messages to a user, a user should
              be entered into the list of Parabuild users as described in
              <link
                      linkend="user_instance_messaging">User Management
              </link>
              section,
              and user's e-mail address should be matched user's name used to
              access version control system for a build. The match is configured
              under the "Notification" tab for a particular build
              configuration.
            </para>
          </note>

          <para>The following settings are available to configure access to a
            Jabber server. All these settings are mandatory:
          </para>

          <itemizedlist>
            <listitem>
              <para>"Jabber server address" is a DNS name of the Jabber
                server.
              </para>
            </listitem>

            <listitem>
              <para>"Jabber server port" is a port number used to access the
                jabber server with the configured server address. The default
                port number is 5222.
              </para>
            </listitem>

            <listitem>
              <para>"Jabber login name" is a name used to log in into the
                Jabber server. This is a name part of an instant messaging
                address.
              </para>
            </listitem>

            <listitem>
              <para>"Jabber password" is a password used to log in into the
                Jabber server.
              </para>
            </listitem>

            <listitem>
              <para>Check box "Send if no presence" if Parabuild should send a
                message even if presence of Jabber client cannot be
                confirmed.
              </para>
            </listitem>
          </itemizedlist>

          <para>To disable Jabber instant messaging, check "Disabled" check
            box.
          </para>
        </sect3>
      </sect2>

      <sect2>
        <title>Global Version Control User to E-mail Map</title>

        <para>The global version control user to e-mail map provides
          system-wide mappings that significantly simplify managing of
          customised user e-mails. Parabuild uses a mapping to compose an e-mail
          address of a version control user to send notifications about build
          results. The mappings can be overridden by notification settings for a
          particular build configuration. To manage the mappings click on the
          link "VCS User to Email Map". Parabuild will display a list of
          mappings with controls that allow to add, edit and remove the
          mappings:
          <mediaobject>
            <imageobject>
              <imagedata fileref="global_vcs_mapping_table.gif"/>
            </imageobject>
          </mediaobject>
        </para>

        <sect3>
          <title>Adding Mapping</title>

          <para>To add a mapping click on link "Add new mapping". An entry
            form for a new mapping will appear. Fill fields "Version control
            user name", "E-mail" and "Note". Click on "Save" button to save the
            new mapping. Click on "Cancel" button to discard the edits.
          </para>
        </sect3>

        <sect3>
          <title>Editing Mapping</title>

          <para>To edit a mapping click on link "Edit" for the selected
            mapping. An entry form for the selected mapping will appear. Modify
            fields "Version control user name", "E-mail" and "Note". Click on
            "Save" button to save the changes in this mapping. Click on "Cancel"
            button to discard the edits.
          </para>
        </sect3>

        <sect3>
          <title>Deleting Mapping</title>

          <para>To delete a mapping click on link "Delete" for the selected
            mapping. After receiving a confirmation Parabuild will delete the
            mapping.
          </para>
        </sect3>
      </sect2>
    </sect1>

    <sect1>
      <title>General System Settings</title>

      <para>Parabuild server provides a set of system-wide configuration
        parameters. Parabuild will request you to fill the mandatory settings
        before builds can be created. These settings include:
        <itemizedlist>
          <listitem>
            <para>Build administrator name</para>
          </listitem>

          <listitem>
            <para>Build administrator e-mail</para>
          </listitem>

          <listitem>
            <para>SMTP server</para>
          </listitem>

          <listitem>
            <para>Build manager host</para>
          </listitem>

          <listitem>
            <para>Date format</para>
          </listitem>

          <listitem>
            <para>Date and time format</para>
          </listitem>

          <listitem>
            <para>Default build status refresh rate</para>
          </listitem>

          <listitem>
            <para>Administrator's password</para>
          </listitem>
        </itemizedlist>
      </para>

      <para>In order to enter the mandatory system settings or modify optional
        settings, login to Parabuild as admin and select "System configuration"
        link on the top navigation bar. The system configuration page shows a
        list of links for editing system and instant messaging settings, and
        security. To edit general system settings, select "General Settings
        Link". After a system settings window shows up, edit the settings and
        press "Save" button. If modifications are correct, a message saying that
        the system configuration has been saved successfully will be displayed.
        The meaning of each system setting is discussed below.
      </para>

      <sect2>
        <title>Appearance Settings</title>

        <sect3>
          <title>Setting Build Manager Host</title>

          <para>Parabuild uses value entered in the "Build manager host" to
            form a URL used in e-mail and instant messages. This value overrides
            default host name detection.
          </para>

          <para>If this field is left blank Parabuild will try to detect the
            host name it runs on automatically. If the host name cannot be
            detected Parabuild will use numeric IP address.
          </para>
        </sect3>

        <sect3>
          <title>Setting Generated URL Protocol</title>

          <para>Parabuild uses value entered in the "Generated URL protocol"
            to form the protocol part of a URL used in e-mail and instant
            messages.
          </para>
        </sect3>

        <sect3>
          <title>Setting Date Format</title>

          <para>Parabuild uses Date format to present dates on various screens
            and in notification messages. Select a format that is appropriate
            for your country. The following formats are available through a
            drop-down menu on "General system settings" screen. Consider a date
            of December 24th, 2003:
            <itemizedlist>
              <listitem>
                <para>MM/dd/yyyy format will render to 12/24/2003</para>
              </listitem>

              <listitem>
                <para>dd/MM/yyyy format will render to 24/12/2003</para>
              </listitem>

              <listitem>
                <para>dd-MM-yyyy format will render to 24-12-2003</para>
              </listitem>

              <listitem>
                <para>dd MMM yyyy format will render to 24 Dec 2003</para>
              </listitem>

              <listitem>
                <para>MMM dd yyyy format will render to Dec 24 2003</para>
              </listitem>
            </itemizedlist>
          </para>
        </sect3>

        <sect3>
          <title>Setting Date And Time Format</title>

          <para>Parabuild uses Date and time format to present times on
            various screens and in notification messages. Select a format that
            is appropriate for your country. The following formats are available
            through a drop-down menu on "General system settings" screen.
            Consider a date and time of December 24th, 2003, 12:00 PM:
            <itemizedlist>
              <listitem>
                <para>"MM/dd/yyyy hh:mm a" format will render to 12/24/2003
                  12:00 pm
                </para>
              </listitem>

              <listitem>
                <para>"hh:mm a MM/dd/yyyy" format will render to 12:00 pm
                  12/24/2003
                </para>
              </listitem>

              <listitem>
                <para>"dd/MM/yyyy HH:mm" format will render to 24/12/2003
                  24:00
                </para>
              </listitem>

              <listitem>
                <para>"HH:mm dd-MM-yyyy" format will render to 24:00
                  24-12-2003
                </para>
              </listitem>
            </itemizedlist>
          </para>
        </sect3>

        <sect3>
          <title>Setting Default Build Status Refresh Rate</title>

          <para>This setting defines the default rate for automatic refresh of
            build status pages. The refresh rate is set in seconds and applied
            to all anonymous users and to users who have not set the refresh
            rate in their personal preferences.
          </para>
        </sect3>

        <sect3>
          <title>Configuring Build Name Validation</title>

          <para>Parabuild allows to set up a custom regex for validating build
            names. The default regex
            is<emphasis>[a-zA-Z][-a-zA-Z_0-9]*</emphasis>. This regex supports
            using a build name as a part of a label in all version control
            systems. Sometimes the default regex may be too restrictive. To use
            a custom regex, go to a setting named "Build Name Validation" and
            select "Custom" radio button. Enter the regex in a corresponding
            entry field. Below is an example of a regex that allows to have dots
            in the build name.
          </para>

          <example>
            <title>Custom Regex Allowing Dots in The Build Name</title>

            <programlisting>[a-zA-Z][-a-zA-Z_\.0-9]*</programlisting>
          </example>
        </sect3>

        <sect3>
          <title>Configuring Variable Name Validation</title>

          <para>Parabuild allows to set up a custom regex for validating
            variable names. The default regex
            is<emphasis>[a-zA-Z][-a-zA-Z_0-9]*</emphasis>. This regex supports
            using a variable name in the most operating systems and as a part of
            a label in all version control systems. Sometimes the default regex
            may be too restrictive. To use a custom regex, go to a setting named
            "Variable Name Validation" and select "Custom" radio button. Enter
            the regex in a corresponding entry field. Below is an example of a
            regex that allows to have dots in the variable name.
          </para>

          <example>
            <title>Custom Regex Allowing Dots in The Variable Name</title>

            <programlisting>[a-zA-Z][-a-zA-Z_\.0-9]*</programlisting>
          </example>
        </sect3>

        <sect3>
          <title>Setting Output Encoding</title>

          <para>Output encoding can be used in multi-lingual environments to
            set encoding of pages and e-mail messages produced by Parabuild. For
            instance, if Parabuild runs under an operating system that uses
            Cyrillic locale, this field can be set to Cp1251 to allow Parabuild
            to present descriptions of change lists properly.
          </para>
        </sect3>

        <sect3>
          <title>Changing List Description Quote</title>

          <para>This field contains maximum length of a change list
            description that will be used in notification messages sent by
            Parabuild.
          </para>
        </sect3>

        <sect3>
          <title>Setting Error Line Quote Length</title>

          <para>When a build step fails, Parabuild will send a notification
            message. Subject line of the message may include a error line from
            the main build log that was used by Parabuild to make a decision
            about the build failure. It is possible that the line is long so
            that it is inconvenient to use it, for example, when responding to
            the message. Error line quote length defines a number of characters
            to that Parabuild will truncate the quoted error line. The default
            value is 60 characters. Setting this value to zero will disable
            quoting error line in the subject line of the message. This is an
            optional parameter.
          </para>
        </sect3>

        <sect3>
          <title>Setting Error Log Quote Size</title>

          <para>When a build step fails, Parabuild will send a notification
            message. It will include lines from a build log at and around a line
            matching the build failure pattern. This allows for a quick view at
            the build failure line and preceding lines so it is possible to find
            a source of the error from the notification message without looking
            into the whole build log. Error log quote size defines a number of
            lines of the build log that will be included in the notification
            message. The optimal value depends on your project build script and
            should be identified experimentally. The default value is 50 lines.
            Setting this value to zero will disable quoting log lines in the
            build failure notification message. This is an optional
            parameter.
          </para>
        </sect3>

        <sect3>
          <title>Setting Branding</title>

          <para>Branding is a title that Parabuild shows at every page header.
            Use it to display your company name, your department name or
            whatever you feel is appropriate. For example, if your company name
            is "MyCompany," you may want to change the branding setting to
            "MyCompany Build Server". If not set, "Parabuild 4.5" will
            be displayed. This is an optional parameter.
          </para>
        </sect3>

        <sect3>
          <title>Showing Link To Projects</title>

          <para>Check this box to enable displaying a link to projects on the
            top navigation bar. The default is not to show the link to projects.
            The project list is also available through Administration
            menu.
          </para>
        </sect3>

        <sect3>
          <title>Showing RSS Links</title>

          <para>Check this box to enable displaying links to RSS feeds
            containing information about build status changes.
          </para>
        </sect3>

        <sect3>
          <title>Enabling Advanced Settings</title>

          <para>By default Parabuild uses a simplified configuration mode. The
            simplified mode hides advanced configuration items in order to
            reduce complexity of the user interface. Check this box if advanced
            build configuration is required. Following chapters explicitly
            mention if a particular item requires advanced configuration.
          </para>
        </sect3>

        <sect3>
          <title>Displaying Next Build Time</title>

          <para>Parabuild allows to view an optional column on the list of
            build statuses that displays the next build time. Displaying next
            build time is enabled on the User Interface Settings by checking box
            "Show next build time on status list page":
            <mediaobject>
              <imageobject>
                <imagedata fileref="next_build_time_setting.gif"/>
              </imageobject>
            </mediaobject>
          </para>

          <para>When the this options is enabled, Parabuild will show the next
            build time. Automatic builds show "Automatic" in the this column:
            <mediaobject>
              <imageobject>
                <imagedata fileref="next_build_time_list.gif"/>
              </imageobject>
            </mediaobject>
          </para>
        </sect3>

        <sect3>
          <title>Setting Dashboard Row Size</title>

          <para>Entry field "Dashboard row size" defines how many build
            configurations Parabuild shows on a dashboard row. This setting
            applies to anonymous users. Parabuild uses this setting to populate
            preferences for a new user.
          </para>
        </sect3>

        <sect3>
          <title>Showing Parallel Builds on List View</title>

          <para>By default Parabuild includes parallel builds into the list
            view of build statuses. Unchecking this box hides excludes parallel
            builds from the list view. The helps reduce clutter on the screen
            and simplify monitoring. Parallel builds are always shown on the
            detailed status view page along with their leader build. Parabuild
            uses indentation to mark parallel builds on the detailed view
            page.
          </para>
        </sect3>

        <sect3>
          <title>Show Build and Change Number on Dashboard</title>

          <para>To show build and change number of the build dashboard, check
            box "Show build and change number on dashboard". To see the build
            finish time, hover the mouse pointer over the build status:
            <mediaobject>
              <imageobject>
                <imagedata fileref="build_number_on_dashboard.gif"/>
              </imageobject>
            </mediaobject>
          </para>
        </sect3>

        <sect3>
          <title>Showing IP Address on List View</title>

          <para>To show IP address of the build agent on the list view, check
            box "Show IP address on status list page". Parabuild will show an IP
            address with a suffix (BM) if the build is configured to run on the
            build manager.
          </para>
        </sect3>

        <sect3>
          <title>Showing Next Build on List View</title>

          <para>To show the time a build is going to run next time, check box
            "Show next build time on status list page". Parabuild won't show the
            next build time if a build configuration is inactive. Automatic
            builds will show "Automatic". Manual builds will show
            "Manual".
          </para>
        </sect3>

        <sect3>
          <title>Allowing Anonymous Access To Protected Feeds</title>

          <para>By default Parabuild protects access to build statuses through
            RSS feeds and Windows tray client. Check this box to allow anonymous
            users unrestricted access to build statuses through RSS feeds and
            Windows tray client.
          </para>
        </sect3>

        <sect3>
          <title>Coloring Errors in Build Logs</title>

          <para>Parabuild simplifies spotting errors in the build log by
            marking red the lines that match failure patterns as defined by the
            build configuration:
            <mediaobject>
              <imageobject>
                <imagedata fileref="text_log_markers_example.gif"/>
              </imageobject>
            </mediaobject>
          </para>

          <para>Parabuild also provides a system-wide list of markers that are
            configured using field "Text log markers":
            <mediaobject>
              <imageobject>
                <imagedata fileref="text_log_markers_configuration.gif"/>
              </imageobject>
            </mediaobject>
          </para>
        </sect3>

        <sect2>
          <title>Security Settings</title>

          <sect3>
            <title>Allow Anonymous Users</title>

            <para>Check this box to allow anonymous users accessing build
              statuses through web user interface. Built-in security group
              "Anonymous" allows to configure what builds can be accessed by
              anonymous users.
            </para>

            <important>
              <para>To secure your Parabuild installation, change the default
                password immediately after completing installation and starting
                Parabuild for the first time.
              </para>
            </important>

            <para>To change the admin password, enter a new password and
              re-type it in the "Confirm password" entry field.
            </para>
          </sect3>

          <sect3>
            <title>Enabling Hiding Change List Descriptions</title>

            <para>Check this box to hide descriptions of change lists from
              anonymous users.
            </para>
          </sect3>
        </sect2>
      </sect2>

      <sect2>
        <title>Stability Settings</title>

        <sect3>
          <title>Stability Settings Overview</title>

          <para>System-wide stability settings allow to configure core
            behavior of Parabuild as a build and release management system.
            Below is an example of the stability settings panel:
          </para>

          <mediaobject>
            <imageobject>
              <imagedata fileref="stability_settings_panel.gif" format="GIF"/>
            </imageobject>
          </mediaobject>
        </sect3>

        <sect3>
          <title>Enabling Schedule Gap</title>

          <para>Schedule gap defines a system-wide interval when Parabuild
            will not try to access a version control system or to launch a
            build. This feature can be used to define time intervals when a
            scheduled back up is performed on the version control system.
          </para>
        </sect3>

        <sect3>
          <title>Setting Default Version Control Timeout</title>

          <para>Default version control timeout defines a system-wide timeout
            in minutes for executable commands that Parabuild uses to access
            version control systems. A command will be terminated and Parabuild
            administrator will receive a warning message if execution time for a
            version control client exceeds this timeout.
          </para>
        </sect3>

        <sect3>
          <title>Setting Default Build Step Timeout</title>

          <para>Parabuild uses default build step timeout when you create new
            build steps through the user interface.
          </para>
        </sect3>

        <sect3>
          <title>Setting Maximum Change List Size</title>

          <para>Maximum change list size defines how many files per change
            list will be recorded. The default value is 500 files per change
            list.
          </para>
        </sect3>

        <sect3>
          <title>Setting Initial Number of Change Lists</title>

          <para>Initial number of change lists defines how many change lists
            may be retrieved from a version control system for the first build
            run. The default value is 1 change list.
          </para>
        </sect3>

        <sect3>
          <title>Setting Maximum Number of Change Lists</title>

          <para>Maximum number of change lists defines how many changes lists
            may be retrieved from a version control system between two builds.
            By default this field is not set which means that the number is
            unlimited.
          </para>
        </sect3>

        <sect3>
          <title>Setting Maximum Cool Down Attempts</title>

          <para>Maximum cool down attempts define number of times Parabuild
            will try to wait for quiet in a code base being watched for changes.
            Parabuild considers this setting only if a cool down period set for
            a build configuration.
          </para>
        </sect3>

        <sect3>
          <title>Setting Minimum Build Results Retention</title>

          <para>Minimum build results retention defines minimum number of days
            Parabuild will allow to enter in the build configuration field for
            automatic deletion of old build results. This value serves as a
            safety guard preventing accidental deleting of archived build
            results by entering too short expiration intervals.
          </para>
        </sect3>

        <sect3>
          <title>Enabling No-checkout Builds</title>

          <para>The default Parabuild behaviour is to synchronize the build
            workspace with the version control before starting a build (check
            out). Some environments may prefer to synchronize the build
            workspace by using their own scripts. Usually this is done by adding
            a checkout step to the normal sequence of build steps.
          </para>

          <para>If you wish to be able to alter the default behaviour, check
            box "Enable no-checkout builds". If no-checkout builds are enabled,
            and if the version control integration supports no-checkout builds,
            the version control tab on the build configuration screen will
            display a check box "Do not sync" or "Do not checkout". Checking
            that box will disable automatic workspace synchronization.
          </para>

          <para>Note: As of this this writing, the automatic workspace
            synchronization can be disable only for Perforce builds.
          </para>
        </sect3>

        <sect3>
          <title>Serializing Automatic Builds</title>

          <para>Enabling option "Serialize Automatic Builds" causes Parabuild
            to run builds on a build agent one by one. This option is useful in
            environments that support running only a single build at a time such
            as a build configuration using Incredibuild as a build tool. Another example is an
            environment where all resources of the build agent should be
            dedicated to a single build process such as a long-running image
            renderer.
          </para>
        </sect3>

        <sect3>
          <title>Queueing Serialized Builds</title>

          <para>If a build is manually started in an environment where one
            build per agent can run, the start request will either succeed or
            fail because there are no free agents available. Enabling this
            option defers the start, when the builds starts automatically as
            soon as resources are available.
          </para>
        </sect3>

        <sect3>
          <title>Respecting Intermediate Steps Failures</title>

          <para>Parabuild allows to continue running build steps if an
            intermediate build step fails. This is done by checking build step's
            box "Continue if failed". The option "Respecting intermediate step
            failures" controls the final build result. If this option is enabled
            (default), the resulting build will fail if any of intermediate
            steps fails.
          </para>

          <para>If this option is enabled, Parabuild will ignore failures of
            the intermediate steps. Instead, Parabuild will use the result of
            the last step as a result of the whole build.
          </para>
        </sect3>

        <sect3>
          <title>Using Change List Numbers as Build Numbers</title>

          <para>Certain release management environments require using change
            list numbers as build numbers instead of automatically incremented
            counters. A configuration option "Use change list number as build
            number" enables this feature:
            <figure>
              <title>Enabling Using Change List Numbers as Build
                Numbers
              </title>

              <mediaobject>
                <imageobject>
                  <imagedata fileref="change_list_number_as_build_number_snippet.gif"/>
                </imageobject>
              </mediaobject>
            </figure>
          </para>
        </sect3>

        <sect3>
          <title>Retrying Version Control Commands</title>

          <para>Retrying version control commands may be helpful in the
            environments that experience frequent intermittent failures when
            accessing a version control system. Such failures should not cause
            build error and can be addressed by retrying the failed command.
            Option "Retry version control commands" allows to configure how many
            times a filed version control command should be retried, the time
            interval between attempts and the regex patterns that should be
            present in the error message to retry the command execution. This
            example shows the configuration that accounts for a particular
            intermittent inability to log in to a Perforce server:
            <mediaobject>
              <imageobject>
                <imagedata fileref="retrying_version_control_commands.gif"/>
              </imageobject>
            </mediaobject>
          </para>
        </sect3>

        <sect3>
          <title>Pushing Server Upgrades to Remote Agents</title>

          <para>Parabuild commonly runs in environments were a single build
            farm contains tens of remote build agents. Upgrading such a build
            infrastructure can be a time-consuming task. Parabuild makes
            upgrading remote build agents a zero-effort exercise by providing an
            ability to push server upgrades to remote agents. Once a version
            mismatch is detected, Parabuild will automatically upgrade and
            re-start the affected remote agents. Pushing server upgrades to
            remote agents is enabled by checking box "Automatic agent
            upgrade".
          </para>
        </sect3>

        <sect3>
          <title>Maximum Parallel Agent Upgrades</title>

          <para>If pushing server upgrades to remote agents is enabled, this
            setting limits the number upgrades the build manager may perform in
            parallel. Setting this number too high may overload the build
            manager. Setting it low will increase the time needed to complete
            the upgrade but will reduce the memory use on the build manager.
            With default memory settings, this number should be set between 2
            and 5. The default value is 2.
          </para>
        </sect3>

        <sect3>
          <title>Enabling Debug Logging</title>

          <para>Check this box to enable debug logging. Parabuild will send
            debug output to a file named parabuid_debug.log under logs directory
            if debug logging is enabled. Debug logs may be useful when
            communicating with support. During normal operation debug
            logging should be disabled.
          </para>
        </sect3>
      </sect2>

      <sect2>
        <title>Display Groups</title>

        <para>As number of build configurations managed by Parabuild grows it
          may become inconvenient to monitor and to control the significant
          number of builds while they are all presented on a single build status
          page. Parabuild provides a convenient way to limit number of build
          shown on the build status pages. This is done by using display groups.
          A display group is a list of builds grouped together under a group
          name.
        </para>

        <para>Once the display groups are configured they are available for
          selection in the right top corner of build status pages
        </para>

        <para>To manage display groups select link "Display Groups" in "System
          settings" section of the system configuration. Parabuild will display
          a list of display groups and corresponding controls.
        </para>

        <sect3>
          <title>Adding Display Group</title>

          <para>To add a display group click on link "Add new display group".
            An entry form for the new display group will appear. Fill fields
            "Display group name" and "Display group description". Check boxes
            for build configurations that should be included in this display
            group. Click on "Save" button to save the new display group. Click
            on "Cancel" button to discard the edits.
          </para>
        </sect3>

        <sect3>
          <title>Editing Display Group</title>

          <para>To edit a display group click on link "Edit" for the selected
            display group. An entry form for the selected display group will
            appear. Modify fields "Display group name" and "Display group
            description". Check boxes for build configurations that you would
            like to be included in this display group. Click on "Save" button to
            save the changes in this display group. Click on "Cancel" button to
            discard the edits.
          </para>
        </sect3>

        <sect3>
          <title>Deleting Display Group</title>

          <para>To delete a display group click on link "Delete" for the
            selected display group. After receiving a confirmation Parabuild
            will delete the display group.
          </para>
        </sect3>

        <sect3>
          <title>Built-in Display Groups</title>

          <para>To simplify navigation, Parabuild provides a set of built-in
            display groups:
          </para>

          <sect4>
            <title>Displaying Broken Builds Only</title>

            <para>Often a build administrator is mostly concerned about broken
              builds only. Parabuild provides a built-in display group that is
              appears as "BROKEN" in the group selection list. If this group is
              selected Parabuild will show only broken builds on the build
              status pages. This allows a build administrator to spot broken
              builds quickly.
            </para>
          </sect4>

          <sect4>
            <title>Displaying Running Builds Only</title>

            <para>Selecting the display group "BUILDING" limits displaying
              build statuses only to those builds that are currently
              running.
            </para>
          </sect4>

          <sect4>
            <title>Displaying Scheduled Builds Only</title>

            <para>The display group "SCHEDULED" simplifies build monitoring
              and management in the environments with significant number of
              scheduled builds:
              <mediaobject>
                <imageobject>
                  <imagedata fileref="display_group_scheduled_only.gif"/>
                </imageobject>
              </mediaobject>
            </para>
          </sect4>
        </sect3>
      </sect2>

      <sect2>
        <title>Projects</title>

        <para>To manage projects select link "Projects" in "System settings"
          section of the system configuration. Parabuild will display a list of
          projects and corresponding controls.
        </para>

        <sect3>
          <title>Adding Project</title>

          <para>To add a project click on link "Add new project". An entry
            form for a new project will appear. Fill fields "Project name",
            "Project key" and "Project description". Click on "Save" button to
            save the new project. Click on "Cancel" button to discard the
            edits.
          </para>
        </sect3>

        <sect3>
          <title>Editing Project</title>

          <para>To edit a project click on link "Edit" for the selected
            project. An entry form for the selected project will appear. Modify
            fields "Project name", "Project key" and "Project description".
            Click on "Save" button to save the changes in this project. Click on
            "Cancel" button to discard the edits.
          </para>
        </sect3>

        <sect3>
          <title>Deleting Project</title>

          <para>To delete a project click on link "Delete" for the selected
            project. After receiving a confirmation Parabuild will delete the
            project and the associated users, groups and build
            configurations.
          </para>
        </sect3>

        <sect3>
          <title>Modifying Project Variables</title>

          <para>Parabuild provides an ability to define a set of project-wide
            variables that are made available to build scripts as shell
            variables. The variable names can also be used as template
            parameters when configuring version control settings for a build. To
            view the list of global variables, click on link "Variables" for the
            selected project:
          </para>

          <mediaobject>
            <imageobject>
              <imagedata fileref="project_variable_link.gif"/>
            </imageobject>
          </mediaobject>

          <para>Parabuild will show a table with already defined variables and
            controls necessary to add and edit the variables:
            <mediaobject>
              <imageobject>
                <imagedata fileref="project_variable_list.gif"/>
              </imageobject>
            </mediaobject>
            <note>
              <para>Project variables overwrite global variables</para>
            </note>
          </para>

          <sect4>
            <title>Adding Project Variable</title>

            <para>To add a variable click on link "Add variable". An entry
              form for a new variable will appear. Fill fields "Shell variable
              name", "Value" and "Description". Click on "Save" button to save
              the new variable. Click on "Cancel" button to discard the
              edits:
            </para>

            <mediaobject>
              <imageobject>
                <imagedata fileref="global_shell_variables_edit.gif"/>
              </imageobject>
            </mediaobject>
          </sect4>

          <sect4>
            <title>Editing Project Variable</title>

            <para>To edit a variable click on link "Edit" for the selected
              variable. An entry form for the selected variable will appear.
              Variable name will be read-only. Modify fields "Value" and
              "Description". Click on "Save" button to save the changes in this
              variable. Click on "Cancel" button to discard the edits.
            </para>
          </sect4>

          <sect4>
            <title>Deleting Project Variable</title>

            <para>To delete a variable click on link "Delete" for the selected
              variable. After receiving a confirmation Parabuild will delete the
              variable.
            </para>
          </sect4>

          <sect4>
            <title>Using Project Variable in Version Control Settings</title>

            <para>To use the variable as a template parameter in the version
              control settings for a build, wrap it's name into parameter
              tokens, "${" and "}". This example shows using a variable as a
              template parameter when defining a repository path for
              Subversion-based build:
              <mediaobject>
                <imageobject>
                  <imagedata fileref="global_shell_variables_as_parameters.gif"/>
                </imageobject>
              </mediaobject>
            </para>
          </sect4>
        </sect3>
      </sect2>

      <sect2>
        <title>Global Variables</title>

        <para>Parabuild provides an ability to define a set of system-wide
          variables that are made available to build scripts as shell variables.
          The variable names can also be used as template parameters when
          configuring version control settings for a build. To view the list of
          global variables, go to "Global Variables" section of the
          Administration screen. Parabuild will show a table with already
          defined variables and controls necessary to add and edit the
          variables:
          <mediaobject>
            <imageobject>
              <imagedata fileref="global_variable_list.gif"/>
            </imageobject>
          </mediaobject>
        </para>

        <sect3>
          <title>Adding Global Variable</title>

          <para>To add a variable click on link "Add variable". An entry form
            for a new variable will appear. Fill fields "Shell variable name",
            "Value" and "Description". Click on "Save" button to save the new
            variable. Click on "Cancel" button to discard the edits:
            <mediaobject>
              <imageobject>
                <imagedata fileref="global_shell_variables_edit.gif"/>
              </imageobject>
            </mediaobject>
          </para>
        </sect3>

        <sect3>
          <title>Editing Global Variable</title>

          <para>To edit a variable click on link "Edit" for the selected
            variable. An entry form for the selected variable will appear.
            Variable name will be read-only. Modify fields "Value" and
            "Description". Click on "Save" button to save the changes in this
            variable. Click on "Cancel" button to discard the edits.
          </para>
        </sect3>

        <sect3>
          <title>Deleting Global Variable</title>

          <para>To delete a variable click on link "Delete" for the selected
            variable. After receiving a confirmation Parabuild will delete the
            variable.
          </para>
        </sect3>

        <sect3>
          <title>Using Global Variable in Version Control Settings</title>

          <para>To use the variable as a template parameter in the version
            control settings for a build, wrap it's name into parameter tokens,
            "${" and "}". This example shows using a variable as a template
            parameter when defining a repository path for Subversion-based
            build:
            <mediaobject>
              <imageobject>
                <imagedata fileref="global_shell_variables_as_parameters.gif"/>
              </imageobject>
            </mediaobject>
          </para>
        </sect3>
      </sect2>
    </sect1>

    <sect1>
      <title>Managing Build Infrastructure</title>

      <sect2>
        <title>Managing Build Agents</title>

        <para>A build agent is a machine that runs Parabuild in the remote
          agent mode. In this manual terms "build agent", "remote agent",
          "agent" and "build machine" are used interchangeably. A build agent
          executes builds as requests by Parabuild. A build agent can belong to
          one or more build farms. Managing build farms is discussed below. To
          add, configure or remove build agents select link "Agents" in
          "Infrastructure" section of the system configuration. Parabuild will
          display a list of agents and corresponding controls:
        </para>

        <mediaobject>
          <imageobject>
            <imagedata fileref="agent_list.gif"/>
          </imageobject>
        </mediaobject>

        <sect3>
          <title>Adding Agent</title>

          <para>To add an agent click on link "Add agent". An entry form for a
            new agent will appear. Fill fields "Agent host and port" and
            "Description". Click on "Save" button to save the new agent. Click
            on "Cancel" button to discard the edits:
            <mediaobject>
              <imageobject>
                <imagedata fileref="agent_edit_form.gif"/>
              </imageobject>
            </mediaobject>
          </para>
        </sect3>

        <sect3>
          <title>Editing Agent</title>

          <para>To edit an agent click on link "Edit" for the selected agent.
            An entry form for the agent will appear. Modify fields "Agent host
            and port" and "Description". Click on "Save" button to save the
            changes for the agent. Click on "Cancel" button to discard the
            edits.
          </para>

          <para>Parabuild provides an ability to enable build serialization on
            a per-agent basis. To enable serializing builds on the agent, check
            box "Serialize builds on this agent". Note that Parabuild will
            always serialize builds on an agent if the system-wide build
            serialization is enabled.
          </para>

          <para>Parabuild allows to configure agents to handle load according
            to agents' power. Field "Capacity" allows to set a estimated,
            composite, relative power of a build machine. The capacity is
            measured in relative points that express administrator's estimate
            of how fast the machine can run builds. For instance a machine
            that can run twice more builds in parallel than another machine
            can have the capacity set to 2; in a simple case of two machines
            in a build farm, Parabuild will run twice more builds on that
            machine than on a machine with the capacity set to 1. The default
            setting for capacity is 1. In a cluster consisting of equality
            powered machines the capacity should be left set to 1.
          </para>

          <para>To limit a number of builds that can run on an agent at the same
            time, use field 'Maximum concurrent builds'. Value '0' (zero) means
            that there is no limit for the number of builds running on the agent
            at the same time.
          </para>
        </sect3>

        <sect3>
          <title>Deleting Agent</title>

          <para>To delete an agent click on link "Delete" for the selected
            agent. After receiving a confirmation Parabuild will delete the
            agent. Parabuild will display a warning message and will cancel the
            deletion process if the agent is a last agent in any of the
            configured builds farms.
          </para>
        </sect3>

        <sect3>
          <title>Modifying Agent Variables</title>

          <para>Parabuild provides an ability to define a set of
            agent-specific variables that are made available to build scripts as
            shell variables. The variable names can also be used as template
            parameters when configuring version control settings for a build. To
            view the list of agent variables, click on link "Variables" for the
            selected agent. Parabuild will show a table with already defined
            variables and controls necessary to add and edit the variables.
            <note>
              <para>Agent variables overwrite global and project
                variables
              </para>
            </note>
          </para>

          <sect4>
            <title>Adding Agent Variable</title>

            <para>To add a variable click on link "Add variable". An entry
              form for a new variable will appear. Fill fields "Shell variable
              name", "Value" and "Description". Click on "Save" button to save
              the new variable. Click on "Cancel" button to discard the
              edits.
            </para>
          </sect4>

          <sect4>
            <title>Editing Agent Variable</title>

            <para>To edit a variable click on link "Edit" for the selected
              variable. An entry form for the selected variable will appear.
              Variable name will be read-only. Modify fields "Value" and
              "Description". Click on "Save" button to save the changes in this
              variable. Click on "Cancel" button to discard the edits.
            </para>
          </sect4>

          <sect4>
            <title>Deleting Agent Variable</title>

            <para>To delete a variable click on link "Delete" for the selected
              variable. After receiving a confirmation Parabuild will delete the
              variable.
            </para>
          </sect4>

          <sect4>
            <title>Using Agent Variable in Version Control Settings</title>

            <para>To use the variable as a template parameter in the version
              control settings for a build, wrap it's name into the parameter
              tokens, "${" and "}".
            </para>
          </sect4>
        </sect3>
      </sect2>

      <sect2>
        <title>Managing Build Farms</title>

        <para>A build farm is a cluster of build machines that runs builds and
          provides automatic load balancing and transparent fail-over. A build
          farm may consist of one or more build machines. To add, configure or
          remove build farms select link "Build Farms" in the "Infrastructure"
          section of the system configuration. Parabuild will display a list of
          build farms and corresponding controls:
        </para>

        <mediaobject>
          <imageobject>
            <imagedata fileref="build_farm_list.gif"/>
          </imageobject>
        </mediaobject>

        <sect3>
          <title>Adding Build Farm</title>

          <para>To add a build farm click on link "Add build farm". An entry
            form for a new build farm will appear. Fill fields "Build farm name"
            and "Description". Click on "Save" button to save the new build
            farm. Click on "Cancel" button to discard the edits:
            <mediaobject>
              <imageobject>
                <imagedata fileref="build_farm_edit.gif"/>
              </imageobject>
            </mediaobject>
          </para>
        </sect3>

        <sect3>
          <title>Editing Build Farm</title>

          <para>To edit a build farm click on link "Edit" for the selected
            build farm. An entry form for the build farm will appear. Modify
            fields "Build farm name" and "Description". Click on "Save" button
            to save the changes for the build farm. Click on "Cancel" button to
            discard the edits.
          </para>
        </sect3>

        <sect3>
          <title>Deleting Build Farm</title>

          <para>To delete a build farm click on link "Delete" for the selected
            build farm. After receiving a confirmation Parabuild will delete the
            build farm. Parabuild will display a warning message and will cancel
            the deletion process if any of the build configuration uses this
            build farm.
          </para>
        </sect3>

        <sect3>
          <title>Adding Agents to Build Farm</title>

          <para>To add an agent to a build farm, go to the build farm list and
            click on the build farm name. Parabuild will show a list of agents
            in the build farm and controls to add or detach agents:
          </para>

          <mediaobject>
            <imageobject>
              <imagedata fileref="build_farm_agents.gif"/>
            </imageobject>
          </mediaobject>

          <sect4>
            <title>Adding Agent to Build Farm</title>

            <para>To add an agent to the build farm click on link "Add agent
              to Build Farm". An entry form for a new agent will appear. Select
              an agent from the list of available agents. Click on "Save" button
              to attached the new agent to the build farm. Click on "Cancel"
              button to discard the edits:
            </para>

            <mediaobject>
              <imageobject>
                <imagedata fileref="build_farm_add_agent.gif"/>
              </imageobject>
            </mediaobject>
          </sect4>

          <sect4>
            <title>Detaching Agent from Build Farm</title>

            <para>To detach an agent "Detach" for the selected agent. After
              receiving a confirmation Parabuild will detach the agent from the
              build farm.
            </para>
          </sect4>
        </sect3>
      </sect2>
    </sect1>

    <sect1>
      <title>Entering Parabuild License</title>

      <para>You receive a license file after ordering Parabuild. In order to
        install your Parabuild license login to Parabuild as admin and select
        "Administration" link on the top navigation bar. The system
        configuration page shows a list of links. To install Parabuild licenses
        system settings, select "Parabuild licenses" link. After a license
        window shows up, copy into clipboard the content of the license file and
        paste it into the license entry field. To save the changes click on
        "Save" button. If modifications are correct, a message saying that the
        license has been saved successfully will be displayed.
      </para>

      <para>Under some rare circumstances it may be necessary to re-start
        Parabuild service to active the license.
      </para>

      <note>
        <para>To obtain an evaluation license, please visit
          <ulink
                  url="http://www.parabuildci.org/downloads.htm">http://www.parabuildci.org/downloads.htm
          </ulink>
          .
        </para>
      </note>
    </sect1>

    <sect1>
      <title>Configuring LDAP Authentication</title>

      <para>Parabuild supports authentication of its users through LDAP. To
        enable authentication through LDAP go to system configuration at "LDAP"
        and check box "Enable LDAP authentication".
      </para>

      <para>The following entry fields are available to configure access to
        LDAP:
        <itemizedlist>
          <listitem>
            <para>Connection URL</para>
          </listitem>

          <listitem>
            <para>Connection principal</para>
          </listitem>

          <listitem>
            <para>Connection credentials</para>
          </listitem>

          <listitem>
            <para>Connection security level</para>
          </listitem>

          <listitem>
            <para>User distinguished name template</para>
          </listitem>

          <listitem>
            <para>User search template</para>
          </listitem>

          <listitem>
            <para>Base element for user searches</para>
          </listitem>

          <listitem>
            <para>Search entire subtree</para>
          </listitem>

          <listitem>
            <para>User password attribute name</para>
          </listitem>

          <listitem>
            <para>Credentials digest algorithm</para>
          </listitem>

          <listitem>
            <para>User e-mail attribute name</para>
          </listitem>

          <listitem>
            <para>Adding first-time users to group</para>
          </listitem>

          <listitem>
            <para>Using LDAP to map names of version control users to
              e-mails
            </para>
          </listitem>
        </itemizedlist>
      </para>

      <para>Meaning of each fields is discussed below.</para>

      <sect2>
        <title>Connection URL</title>

        <para>Connection URL defines Parabuild's connection to the directory.
          The format of the URL is defined by the JNDI provider. This URL
          specifies the DNS name or the IP address of the directory server. You
          may also specify server port number and distinguished name (DN) of the
          root naming context. The default port number is 389.
        </para>

        <example>
          <title>LDAP Connection URL</title>

          <programlisting>
            ldap://ldapserver:389
          </programlisting>
        </example>
      </sect2>

      <sect2>
        <title>Connection Principal And Connection Credentials</title>

        <para>If necessary Parabuild authenticates itself to the directory
          with the user name and password specified by the Connection Principal
          and Connection Credentials. Often the anonymous connection is
          sufficient and these properties don't have to be set.
        </para>
      </sect2>

      <sect2>
        <title>Connection Security Level</title>

        <para>This field specifies the security level to use. Its value is one
          of the following strings: "none", "simple", "strong". If this field is
          not set, the behaviour is determined by the directory service
          provider. The default value is "simple".
        </para>
      </sect2>

      <sect2>
        <title>Processing Referrals</title>

        <para>This field that holds the value that specifies how referrals
          encountered by the service provider are to be processed. It can be one
          of the following strings: "follow" - follow referrals automatically;
          "ignore" - ignore referrals; "throw" - throw an exception when a
          referral is encountered. If this field is set to "Default", the
          default is determined by the provider.
        </para>
      </sect2>

      <sect2>
        <title>User Distinguished Name Template</title>

        <para>Parabuild supports selecting user's entry in the directory by
          using a template for the distinguished name (DN) of the user's
          directory entry. This is a recommend approach. The
          <filename>${user.id}</filename>template field should be used to mark
          where the actual user name should inserted. Multiple lookup locations
          can be entered by separating each location with parentheses. Use this
          setting when the DN contains the user name and is the same for all
          users.
        </para>

        <example>
          <title>LDAP User Distinguished Name Template</title>

          <programlisting>
            uid=${user.id},ou=Test Organizational Unit,dc=test,dc=com

          </programlisting>
        </example>
      </sect2>

      <sect2>
        <title>User Search Template</title>

        <para>As alternative to using a DN template, Parabuild supports
          searching unique user's entry in the directory by using a template for
          the LDAP search filter. The<filename>${user.id}</filename>template
          field should be used to mark where the actual user name should
          inserted. The following example shows an LDAP filter for the case when
          user should enter her e-mail address to be authenticated.
        </para>

        <example>
          <title>LDAP User Search Template</title>

          <programlisting>
            (mail=${user.id})

          </programlisting>

          <para>Parabuild will not authenticate a user if the LDAP filter
            returns multiple entries.
          </para>
        </example>
      </sect2>

      <sect2>
        <title>Base Element for User Searches</title>

        <para>The base element for user searches may be used if user search is
          selected. If not specified, the top level element in the directory
          context will be used. The following example requests Parabuild to
          limit search to the context "<filename>ou=Test Organizational
            Unit,dc=test,dc=com</filename>"
          <example>
            <title>LDAP User Search Template</title>

            <programlisting>
              ou=Test Organizational Unit,dc=test,dc=com

            </programlisting>

            <para>Parabuild will not authenticate a user if the LDAP filter
              returns multiple entries.
            </para>
          </example>
        </para>
      </sect2>

      <sect2>
        <title>Search Entire Subtree</title>

        <para>Setting "Search entire subtree" may be used if user search is
          selected. Check this box if you want Parabuild to search the entire
          subtree of the element specified by the "Base Element For User
          Searches" field for the user's entry. If not checked (default) only
          the top level will be searched.
        </para>
      </sect2>

      <sect2>
        <title>User Password Attribute Name</title>

        <para>By default Parabuild authenticates a user by binding to the
          directory with the DN of the entry for the user and the password
          presented by the user. If binding succeeds the user is considered to
          be authenticated. The directory performs password digesting
          transparently. This mode is used if "User password attribute name" is
          not set. This is a recommended method.
        </para>

        <para>If "User password attribute name" is set Parabuild will retrieve
          the stored password from the directory and compare it explicitly with
          the value provided by the user. This field should be set to the name
          of an attribute of the user's entry that contains the password.
        </para>
      </sect2>

      <sect2>
        <title>Credentials Digest Algorithm</title>

        <para>The selected credentials digest algorithm is used to digest
          clear text passwords. This field may be used in conjunction with using
          the user password attribute name and should be set to the algorithm
          used by your LDAP server. The supported digest algorithms are MD5 and
          SHA-1.
        </para>
      </sect2>

      <sect2>
        <title>User E-Mail Attribute Name</title>

        <para>This mandatory field should be set to the name of an attribute
          of the user's entry that contains user's e-mail address.
        </para>
      </sect2>

      <sect2>
        <title>Add First-Time Users To Group</title>

        <para>Parabuild will add to the selected Parabuild group users if they
          log to Parabuild first time.
        </para>
      </sect2>

      <sect2>
        <title>Using LDAP to Map Names of Version Control Users to
          E-mails
        </title>

        <para>Environments using LDAP both for Parabuild and version control
          authentication may prefer to use e-mails of users that are maintained
          by an LDAP server to send notifications about build results. This may
          be very convenient because e-mails are maintained in a single place.
          To enable using LDAP to map names of version control users to e-mails,
          check box "Use LDAP to look up VCS user e-mail".
        </para>
      </sect2>

      <sect2>
        <title>Testing LDAP Configuration</title>

        <para>Parabuild allows you to test created LDAP configuration. Fill
          the entry field "Test user name" and "Test password" with valid values
          and click on "Test" button. Parabuild will display a success message
          if the configuration is correct Parabuild will display a error message
          if the configuration is invalid or provided combination of the test
          user name and password does not exist.
        </para>
      </sect2>

      <sect2>
        <title>Integrating With Active Directory</title>

        <para>To successfully integrate with Active Directory please follow
          these instructions: Set the Connection Principal and Connection
          Credentials to a user and password in Active Directory. Set Processing
          Referrals to "follow". Set User Search Template to
          sAMAccountName=${user.id}. Select Search Entire Subtree.
        </para>
      </sect2>
    </sect1>
  </chapter>

  <chapter>
    <title>Configuring a Build</title>

    <note>
      <para>Subsequent chapters will use "build configuration" and "build"
        interchangeably.
      </para>
    </note>

    <sect1>
      <title>Overview</title>

      <para>To add a new build configuration, follow these steps:
        <orderedlist>
          <listitem>
            <para>Open a web browser of your preference and enter URL of your
              Parabuild server. If Parabuild ran on a host named "build", the
              URL would be "http://build:8080.
            </para>
          </listitem>

          <listitem>
            <para>Login in as "admin" user.</para>
          </listitem>

          <listitem>
            <para>Go to the list of builds by clicking "Builds" menu item on
              the top navigation bar.
            </para>
          </listitem>

          <listitem>
            <para>In the build list, select link "Add new build". A general
              build settings form will show up. Fill in general settings fields
              and click the "Continue" button.
            </para>
          </listitem>

          <listitem>
            <para>Detailed build configuration form will show up. Complete
              build configuration and click the "Save" button. Parabuild will
              save new build configuration and redirect you to the build
              statuses page.
            </para>
          </listitem>
        </orderedlist>
      </para>

      <para>Following sections discuss the process of configuring a build in
        detail.
      </para>
    </sect1>

    <sect1>
      <title>General Settings Form</title>

      <para>General build settings form is displayed when a new build added.
        It allows to set the general build configuration parameters. These
        parameters include:
      </para>

      <orderedlist>
        <listitem>
          <para>Build name.</para>
        </listitem>

        <listitem>
          <para>Build results access.</para>
        </listitem>

        <listitem>
          <para>Build farm name.</para>
        </listitem>

        <listitem>
          <para>Version control.</para>
        </listitem>

        <listitem>
          <para>Runner type.</para>
        </listitem>

        <listitem>
          <para>Build type.</para>
        </listitem>
      </orderedlist>
    </sect1>

    <sect1>
      <title>Naming a Build</title>

      <para>Parabuild requires each build configuration to have a name. A
        build name should be short, simple, and self-explanatory. We recommend
        to apply the following simple rules when naming a build:
      </para>

      <itemizedlist>
        <listitem>
          <para>Initially, a build name should start with one of the
            following: a product name, a project code name or a project home
            directory name in a version control system.
          </para>
        </listitem>

        <listitem>
          <para>Add to the build name a product version if there is
            one.
          </para>
        </listitem>

        <listitem>
          <para>For scheduled builds use one of the following suffixes: "qa",
            "nightly" or "daily" to reflect the timed nature of the
            build.
          </para>

          <example>
            <title>Composing Build Name</title>

            <para>Consider a product named "MyProduct". The current version of
              the product is 2.3. Possible names for an automatic (integration)
              build for the product would be: "myprod_23", "myprd_23" and
              "myproduct_23". Name QA, nightly or daily builds accordingly:
              "myprod_23_qa" or "myprd_23_dayly".
            </para>
          </example>
        </listitem>
      </itemizedlist>

      <para>Oftentimes, the name of a project or product is considerably long,
        so it may be rather convenient to shorten it when naming a build. For
        example, the project name "MyNewProject Version 2.0" could be shortened
        to "mnp_20".
      </para>

      <para>We do not recommend using strictly generic names like "build",
        "qa", "nightly", etc. Even if you are currently developing a single
        product with no specific version, over time the product will have
        different versions, maintenance branches, and/or platforms. The build
        name will quickly become an internal brand, and therefore it is
        reasonable to name the build to reflect its association with a
        particular product or source line. Generic names are not suitable for
        this purpose.
      </para>
    </sect1>

    <sect1>
      <title>Selecting Build Type</title>

      <para>Parabuild offers three types of build configurations: automatic
        continuous integration builds, scheduled builds and manual builds.
        Automatic builds are fired upon every check-in or a series of check-ins
        into the version control system. Scheduled builds are fired at a
        configured time. Manual build are fired per a build manager's request.
        Once the build type is selected, it cannot be changed.
      </para>

      <sect2>
        <title>Automatic Builds</title>

        <para>Automatic builds are also known as integration builds. Parabuild
          initiates an automatic build at every check-in (or a series of
          check-ins) into the version control system.
        </para>

        <para>The main goal of an automatic build is to ensure that new
          changes to the project source line do not break it, and that the
          product can be built cleanly. If a product cannot be built cleanly,
          then the project source line is broken. In either case, Parabuild will
          send e-mail notifications about the results of each build.
        </para>

        <para>Notifications about successful builds inform that the project
          source line is in a clean state and that the team members may perform
          the check-out to integrate into the new changes safely. Owners of
          changes that were built would know that their changes did not break
          the build.
        </para>

        <para>Automatic builds are ideal for setting up Continuous Integration
          for your projects.
        </para>

        <important>
          <para>Notifications about failed builds inform the owners of the
            changes that their changes possibly have broken the project source
            line. This gives them an opportunity to check-in the changes that
            fix the build immediately. Other members of the team then know that
            the project source line is broken, and that it is better not to
            check it out until the build is fixed.
          </para>
        </important>
      </sect2>

      <sect2>
        <title>Scheduled Builds</title>

        <para>Parabuild runs scheduled builds at configured times. Scheduled
          builds can be used to run builds that are timed by their nature such
          as nightly, daily, or QA builds.
        </para>

        <para>It is important that scheduled builds run cleanly. Stable QA
          builds allow for uninterrupted QA and testing process. Failed QA or
          nightly builds prevent the QA teams from doing their job. Parabuild
          ensures that scheduled builds run against the last known clean state
          of the product source line. An automatic integration build backs every
          scheduled build. Scheduled builds use source control settings of the
          referenced automatic builds.
        </para>

        <important>
          <para>In order for a scheduled build to be created, an automatic
            (integration) build that backs it should be already
            configured.
          </para>
        </important>
      </sect2>

      <sect2>
        <title>Manual Builds</title>

        <para>Manual builds do not have a schedule and run only when a build
          administrator requests it. Manual builds can be used to run builds to
          produce results from short-living patch branches.
        </para>
      </sect2>

      <sect2>
        <title>Parallel Builds</title>

        <para>Parabuild runs parallel builds simultaneously with a leading
          build. Parallel builds can be used to run builds that require parallel
          execution of multiple build configurations. Good examples of such
          builds are those requiring building and testing on multiple platforms.
          Parallel builds can be also used to deliver build acceleration.
        </para>

        <para>If any of parallel builds fail Parabuild will mark a leading
          build run as failed. If the leading build run has a finalizer step,
          Parabuild will execute dependent builds fully before executing the
          finalizer step. This allows gathering and processing results from
          parallel builds in the finalizer step.
        </para>

        <para>Parallel builds use version control settings of the referenced
          leading build. Select "Build reference" as a version control system
          when creating a parallel build.
        </para>

        <important>
          <para>In order for a parallel build to be created, a leading build
            should be already configured.
          </para>
        </important>
      </sect2>
    </sect1>

    <sect1>
      <title>Selecting Build Results Access</title>

      <para>Parabuild allows you to set two types of access to the build
        results:
      </para>

      <itemizedlist>
        <listitem>
          <para>Public access - Build results are available for general
            access. Everybody will have access to the build results and will
            receive e-mail notifications according to security settings of the
            server.
          </para>
        </listitem>

        <listitem>
          <para>Private access - Only the build administrator will have access
            to the build results and will receive build results notifications.
            Private access may be used to test new builds or to set up system
            builds that are visible only to the build administrator.
          </para>
        </listitem>
      </itemizedlist>

      <note>
        <para>New builds are created with private access. Build administrator
          can change this setting to public at any time. We recommend to test a
          new build to make sure it runs cleanly before making it public.
        </para>
      </note>
    </sect1>

    <sect1>
      <title id="detailed_build_configuration">Detailed Build
        Configuration
      </title>

      <para>Detailed build configuration is performed through various tabs.
        "Version Control" and "Build configuration" tabs are used to configure
        mandatory build parameters including version control system, build
        steps, build schedule properties, and labeling. "Notification settings"
        tab is used to configure various notification policies, to map e-mails
        to version control users and to set up build watchers. Parabuild
        maintains an archive of logs available for viewing by the team, and an
        archive of build results, also known as build artifacts, that can be
        downloaded via Parabuild Web UI. "Build logs" and "Build results" tabs
        are used to configure locations of the logs and results
        accordingly.
      </para>

      <sect2>
        <title>Adding Build Steps</title>

        <para>A build configuration must have at least one build step. Build
          steps are configured by modifying a build sequence table that provides
          supports for multi-step builds.
        </para>

        <sect3>
          <title>Build Sequence Table</title>

          <para>The build sequence table holds definitions of build steps. To
            add a build step, click on the "Add row" link. Each row in the build
            sequence table consists of the following entry fields: "Step name",
            "Build commands", "Success patterns", "Failure patterns", "Respect
            error code" check box and "Step timeout":
          </para>

          <mediaobject>
            <imageobject>
              <imagedata fileref="expand_build_commands_markers.gif"/>
            </imageobject>
          </mediaobject>

          <para>Meaning of each field is discussed below.</para>

          <sect4>
            <title>Step Name</title>

            <para>Enter a name of the build step in this field. The step name
              should reflect nature of the build step. "BUILD", "TEST", "DEPLOY"
              are good examples. Each step name should be unique in the build
              configuration. "Step name" is a mandatory field.
            </para>
          </sect4>

          <sect4>
            <title>Shell Commands</title>

            <para>Enter shell commands that are used to perform the build step
              in this field. Parabuild will generate and execute a wrapper shell
              script that contains all commands entered in this field.
            </para>

            <para>For example, if your project is built using NAnt under
              Windows, the build commands may look as following:
            </para>

            <programlisting>rem Display build environment variables
              set
              rem Run build
              nant all.clean
            </programlisting>

            <tip>
              <para>Though Parabuild supports ad-hock build scripting using
                the "Shell commands" field, we recommend placing build scripts
                under control of a version control system if they take more than
                one line. This will allow keeping track of changes made to you
                build scripts.
              </para>
            </tip>

            <para>"Shell commands" is a mandatory field.</para>

            <para>For convenient editing, it is possible to open the "Shell
              Commands", "Failure Patterns" and "Success Patterns" in an
              expanded modal form by clicking a small tag image:
            </para>

            <mediaobject>
              <imageobject>
                <imagedata fileref="build_command_modal_dialog.gif"/>
              </imageobject>
            </mediaobject>
          </sect4>

          <sect4>
            <title>Success Patterns</title>

            <para>Enter step success patterns, one per line, in this field.
              Parabuild will try to find one of entered success patterns in the
              main build log to decide if the build step was successful. For
              example, for a build configuration using ANT tool, a success
              pattern would be "BUILD SUCCESSFUL".
            </para>

            <para>Success patterns should be entered if "Respect error code"
              check box is not checked.
            </para>

            <para>Success patterns are case sensitive.</para>

            <para>Success patterns can be regular expressions. A regular
              expression should begin with '^' and end with '$'.
            </para>
          </sect4>

          <sect4>
            <title>Failure Patterns</title>

            <para>Enter step failure patterns, one per line, in this field.
              Parabuild will try to find one of entered failure patterns in the
              main build log to decide if the build step failed. For example,
              for a build configuration using ANT tool, a failure pattern would
              be "BUILD FAILED".
            </para>

            <para>Failure patterns should be entered if "Respect error code"
              check box is not checked. Parabuild searches the build log for
              failure patterns before checking if success patterns are present.
              If neither failure nor success patterns are present, Parabuild
              considers the build step failed.
            </para>

            <para>Failure patterns are case sensitive.</para>

            <para>Failure patterns can be regular expressions. A regular
              expression should begin with '^' and end with '$'.
            </para>
          </sect4>

          <sect4>
            <title>Respecting Error Code</title>

            <para>If "Respect error code" check box is checked, Parabuild
              considers a build step failed if the build step commands return
              non-zero error code. Checking error code and searching the build
              log for failure patters have priority over searching for success
              patterns.
            </para>

            <tip>
              <para>Use error code respecting if a build scripting tool used
                by your project cannot provide stable success and failure
                patterns.
              </para>
            </tip>
          </sect4>

          <sect4>
            <title>Timeout</title>

            <para>Enter a step timeout in minutes in this field. Parabuild
              will stop execution of the build step forcefully if elapsed build
              step time exceeds the timeout value.
            </para>

            <para>"Timeout" is a mandatory field.</para>
          </sect4>

          <sect4>
            <title>Continue If Failed</title>

            <para>Sometimes it is necessary to continue running the build if a
              particular build step has filed. For instance, you Quality Control
              team may still want build results even if a step that runs
              automated unit tests failed. Check "Continue if failed" box if
              you'd like to continue running the build if the selected step
              failed
            </para>
          </sect4>

          <sect4>
            <title>Disabled</title>

            <para>Check "Disabled" box to temporarily disable this build
              step.
            </para>
          </sect4>

          <sect4>
            <title>Initializer Step</title>

            <para>Check "Initializer step" box to make this step an
              initializer step. The initializer step runs before any dependent
              parallel build runs.
            </para>
          </sect4>

          <sect4>
            <title>Finalizer Step</title>

            <para>Check "Finalizer step" box to make this step a finalizer
              step. The finalizer step always runs. It allows performing work
              upon completion of a build run without regard to success or
              failure of previous build steps. The finalizer step of a leading
              parallel build runs after completion of dependent parallel
              builds.
            </para>
          </sect4>

          <sect4>
            <title>Inserting Build Step</title>

            <para>Parabuild allows inserting a build step at arbitrary
              location. To insert a build step, check box for a step before that
              you'd like to insert a new step and click on "Insert Row"
              link.
            </para>
          </sect4>
        </sect3>
      </sect2>

      <sect2>
        <title>Common Version Control Settings</title>

        <para>The following settings are available to all version
          systems:
        </para>

        <itemizedlist>
          <listitem>
            <para>Custom checkout directory</para>
          </listitem>

          <listitem>
            <para>Ignore list</para>
          </listitem>
        </itemizedlist>

        <sect3>
          <title>Custom Checkout Directory</title>

          <para>
            <important>
              <para>"Custom checkout directory" is an advanced setting. It
                should be used with caution and only if the default value is not
                suitable. This setting is available only when an advanced build
                configuration is enabled using the system settings page.
              </para>
            </important>
          </para>

          <para>This setting allows changing the default checkout directory
            for the build. It can be either a fully qualified path such as
            <emphasis>/opt/build/my_build</emphasis>
            or a template. The template
            supports fields<emphasis>${build.id}</emphasis>and
            <emphasis>{build.name}</emphasis>. Template example is
            <emphasis>/opt/builds/build_${build.id}.</emphasis>
          </para>
        </sect3>

        <sect3>
          <title>Ignore List</title>

          <para>
            <important>
              <para>"Ignore list" is an advanced setting. This setting is
                available only when an advanced build configuration is enabled
                using the system settings page.
              </para>
            </important>
          </para>

          <para>This setting may contain a list of paths for that changes in a
            version control system should be ignored. Changes in the files
            included into the ignore-list will not trigger the build. Parabuild
            compares this list against endings of fully qualified paths of
            changed files.
          </para>

          <para>To use a regular expression, start the line with character "^"
            and end it with character "$". Regular expressions are applied to
            the whole change path.
          </para>

          <figure>
            <title>Entering Regular Expressions in Ignore List</title>

            <mediaobject>
              <imageobject>
                <imagedata fileref="regex_in_ignore_path_snippet.gif"/>
              </imageobject>
            </mediaobject>
          </figure>
        </sect3>
      </sect2>

      <sect2>
        <title>Configuring Accurev Access</title>

        <para>In order to access Accurev version control system, Parabuild
          should be installed on a box that has a working Accurev client.
        </para>

        <para>To configure access to Accurev, fill in the following
          fields:
        </para>

        <itemizedlist>
          <listitem>
            <para>Path to accurev executable</para>
          </listitem>

          <listitem>
            <para>Host</para>
          </listitem>

          <listitem>
            <para>Port</para>
          </listitem>

          <listitem>
            <para>User</para>
          </listitem>

          <listitem>
            <para>Password</para>
          </listitem>

          <listitem>
            <para>Stream</para>
          </listitem>
        </itemizedlist>

        <figure>
          <title>Example: Configuring Accurev Access</title>

          <mediaobject>
            <imageobject>
              <imagedata fileref="accurev_configuration_snippet.gif"
                         format="GIF"/>
            </imageobject>
          </mediaobject>
        </figure>

        <para>The meaning of each field discussed below.</para>

        <sect3>
          <title>Path To accurev Executable</title>

          <para>Path to accurev executable is a mandatory field. This field
            should be set to a fully qualified path to accurev executable. The
            path should be wrapped in double quotes if it contains
            spaces.
          </para>

          <example>
            <title>Path To cleartool Executable</title>

            <para>Unix:</para>

            <para>
              <filename>/opt/accurev/bin/accurev</filename>
            </para>

            <para>Windows:</para>

            <para>
              <filename>C:\Program
                Files\AccuRev\bin\accurev.exe
              </filename>
            </para>
          </example>
        </sect3>

        <sect3>
          <title>Host</title>

          <para>Host is a mandatory field. It should be set to the name of
            Accurev server.
          </para>
        </sect3>

        <sect3>
          <title>Port</title>

          <para>Port is a mandatory field. It should be set to the port on
            that Accurev server accepts requests. The default value is
            5050.
          </para>
        </sect3>

        <sect3>
          <title>User</title>

          <para>User is a mandatory field. It should be set to a registered
            Accurev user.
          </para>
        </sect3>

        <sect3>
          <title>Password</title>

          <para>is a mandatory field. It should be set to a password of the
            Accurev user.
          </para>
        </sect3>

        <sect3>
          <title>Stream</title>

          <para>Stream is a mandatory field. It should be set to a stream that
            Parabuild will access to perform a build
          </para>
        </sect3>
      </sect2>

      <sect2>
        <title>Configuring Bazaar Access</title>

        <para>
          <mediaobject>
            <imageobject>
              <imagedata fileref="bazaar_configuration_snippet.gif"/>
            </imageobject>
          </mediaobject>
        </para>

        <para>To configure access to Bazaar version control system, fill in
          the following mandatory fields:
        </para>

        <itemizedlist>
          <listitem>
            <para>Path to Bazaar client executable (bzr)</para>
          </listitem>

          <listitem>
            <para>Bazaar branch path</para>
          </listitem>
        </itemizedlist>

        <para>Meaning of each field is discussed below.</para>

        <sect3>
          <title>Path To Bazaar Client Executable</title>

          <para>Path to the Bazaar client executable is a mandatory field.
            This field should be set to a fully qualified path to a Bazaar
            client executable. The path should be wrapped in double quotes if it
            contains spaces.
          </para>

          <example>
            <title>Path to Bazaar Executable Field</title>

            <para>Unix:</para>

            <para>
              <filename>/usr/bin/bzr</filename>
            </para>

            <para>Windows:</para>

            <para>
              <filename>C:\Bazaar\bzr.exe</filename>
            </para>
          </example>
        </sect3>

        <sect3>
          <title>Bazaar Branch Path</title>

          <para>Bazaar Branch Path is a mandatory field. This file should
            contain a URL pointing to a Bazaar repository and should correspond
            with the URL notation. Parabuild supports BZR+SSH, HTTP, BZR and
            FILE protocols to access Bazaar servers.
          </para>
        </sect3>

        <sect3>
          <title>Configuring Access To Bazaar via SSH</title>

          <para>Configuring access to Bazaar via SSH consists of generating
            public and private DSA keys and listing the generated public key at
            the Bazaar server. The following discussion assumes that Parabuild
            is installed on a Unix-like system and OpenSSH client is used.
            Please consult with the documentation for the corresponding SSH
            client if it is different from the above.
          </para>

          <para>First, login to the server as user
            <filename>parabuild</filename>
            and ensure that the current directory
            is parabuild's home:
          </para>

          <programlisting>
            su - parabuild
            cd ~
          </programlisting>

          <para>Generate public and private keys. When asked for passphrase,
            hit Enter (no passphrase):
          </para>

          <programlisting>ssh-keygen -t dsa</programlisting>

          <para>The typical console output produced by ssh-keygen is the
            following:
          </para>

          <programlisting>
            Generating public/private dsa key pair.
            Enter file in which to save the key (/home/parabuild/.ssh/id_dsa):
            Enter passphrase (empty for no passphrase):
            Enter same passphrase again:
            Your identification has been saved in /home/parabuild/.ssh/id_dsa.
            Your public key has been saved in /home/username/.ssh/id_dsa.pub.
            The key fingerprint is:
            e2:eb:aa:23:0b:0f:15:6a:f6:39:eb:0f:3a:37:96:20 parabuild@hostname
          </programlisting>

          <para>Set the correct permissions for the generated keys:</para>

          <programlisting>chmod 600 ~/.ssh/id_dsa
            chmod 644 ~/.ssh/id_dsa.pub
          </programlisting>

          <para>E-mail the<emphasis role="bold">public key</emphasis>,
            <emphasis role="bold">~/.ssh/id_dsa.pub</emphasis>, to your Bazaar
            administrator.
          </para>

          <para>If you are an administrator of the system where Bazaar is
            installed, add the public key to file ~/.ssh/authorized_keys for the
            user that parabuild will use to access Bazaar via SSH and make this
            file read-only:
          </para>

          <programlisting>chmod go-w ~ ~/.ssh ~/.ssh/authorized_keys</programlisting>

          <example>
            <title>Bazaar Branch Path Field Using SSH Protocol</title>

            <para>bzr+ssh://my-bazaar-server/project-v-2.0</para>
          </example>
        </sect3>
      </sect2>

      <sect2>
        <title>Configuring ClearCase Access</title>

        <para>In order to access ClearCase, Parabuild should be installed on a
          box that has a working ClearCase client. Under Unix and Linux systems
          user "parabuild" and group "parabuild" should be allowed access to VOB
          explicitly.
        </para>

        <para>To configure access to ClearCase LT version control system, fill
          in the following fields:
        </para>

        <itemizedlist>
          <listitem>
            <para>Path to cleartool executable</para>
          </listitem>

          <listitem>
            <para>Snapshot view config spec</para>
          </listitem>

          <listitem>
            <para>Branches</para>
          </listitem>

          <listitem>
            <para>Relative build dir</para>
          </listitem>

          <listitem>
            <para>Change window</para>
          </listitem>
        </itemizedlist>

        <para>The following fields are available only when advanced build
          settings are enabled via system settings:
          <itemizedlist>
            <listitem>
              <para>View storage location (-stgloc)</para>
            </listitem>

            <listitem>
              <para>View name template</para>
            </listitem>

            <listitem>
              <para>Ignore error lines</para>
            </listitem>
          </itemizedlist>
        </para>

        <para>The meaning of each field discussed below.</para>

        <sect3>
          <title>Path To cleartool Executable</title>

          <para>Path to cleartool executable is a mandatory field. This field
            should be set to a fully qualified path to cleartool executable. The
            path should be wrapped in double quotes if it contains
            spaces.
          </para>

          <example>
            <title>Path To cleartool Executable</title>

            <para>Unix:</para>

            <para>
              <filename>/opt/clearcase/bin/cleartool</filename>
            </para>

            <para>Windows:</para>

            <para>
              <filename>C:\Rational\ClearCase\bin\cleartool.exe</filename>
            </para>
          </example>
        </sect3>

        <sect3>
          <title>Snapshot View Config Spec</title>

          <para>Snapshot view config spec is a mandatory field. Enter a config
            spec for a snapshot view that Parabuild will use to access your
            project code base. It should correspond the notation for ClearCase
            configuration specs for snapshot views. Please refer ClearCase
            documentation for detailed discussion of configuration specs.
          </para>

          <example>
            <title>Snapshot View Config Spec</title>

            <para>element * CHECKEDOUT element * /main/LATEST load
              \project_vob\3rdparties\lib load \
              <emphasis
                      role="bold">project_vob\version20\myproj
              </emphasis>
            </para>
          </example>
        </sect3>

        <sect3>
          <title>Branch</title>

          <para>Branch is an optional field. If this field is set, Parabuild
            will limit watching for changes to the given branch. This field
            allows entering multiple branch names. Use the following characters:
            space, comma or semicolon to separate one branch name from
            another.
          </para>
        </sect3>

        <sect3>
          <title>Relative Build Dir</title>

          <para>Parabuild should be provided a path to the build directory
            (project home). Parabuild will start build step scripts using this
            directory as a current directory. The relative build directory is a
            directory that is relative to a working directory provided by
            Parabuild. Using the example in the previous section, the relative
            build dir path could be
            <emphasis>project_vob\version20\myproj.</emphasis>
          </para>
        </sect3>

        <sect3>
          <title>Change Window</title>

          <para>Parabuild maintains synthetic change lists for ClearCase. The
            change list is a set of logically connected changes in multiple
            files. An example of a change list can be adding to ClearCase a C++
            class and a supporting binary library that the class makes use
            of.
          </para>

          <para>ClearCase itself does not support change lists. If a logically
            connected group of files is checked in, and the process takes longer
            than a minute, it is possible that Parabuild might detect the
            presence of changes before all files make it to the ClearCase
            repository and fire a build against an incomplete submission time
            stamp. To avoid this problem Parabuild uses "change window" for the
            advanced detection of the member files of a change list. The change
            window is the maximum time in seconds a check-in of a group of files
            may take.
          </para>

          <para>Entering zero value in the change window field turns off the
            advanced detection of members of change lists that are taking a long
            time to process.
          </para>
        </sect3>

        <sect3>
          <title>View Name Template</title>

          <para>An optional field "View name template" may contain a custom
            template that Parabuild will use to compose a ClearCase view tag
            name. The template may include alphanumeric characters, characters
            "-" and "_". The template must include a template
            parameter<emphasis>${build.id}</emphasis>and may include
            <emphasis>${cc.user}</emphasis>
            parameter.
            <emphasis>${build.id}</emphasis>
            parameter will be replaced with a
            unique build configuration ID during
            runtime.<emphasis>${cc.user}</emphasis>parameter will be replaced
            with the name of a user account that runs Parabuild server.
          </para>

          <para>If "View name template" is not filled, Parabuild will use a
            default value. The default value is
            "<emphasis>parabuild_${build.id}</emphasis>".
            <important>
              <para>"View name template" is an advanced setting. It should be
                used with caution and only if the default value is not suitable.
                This setting is available only when an advanced build
                configuration is enabled using the system settings page.
              </para>
            </important>
          </para>
        </sect3>

        <sect3>
          <title>View Storage Location</title>

          <para>An optional field "View Storage Location" may specify a name
            of a server storage location to hold the view storage directory or a
            path to the local view storage.
          </para>

          <para>To enter server the name of the server storage location,
            select "-stgloc" from the view storage location drop down.
          </para>

          <para>To enter the path to the local view storage, select "-vws"
            from the view storage location drop down list. Certain ClearCase
            configurations may require providing the path to the local view
            storage. Parabuild provides a template parameter ${build.id} that
            can be used as a path name space that uniquely defines the path to
            the local view storage for an integration build and for dependant
            scheduled builds. Example:
            <filename>\\ComputerName\ViewStorage\parabuild_${build.id}.vws</filename>
          </para>

          <para>If not set, the server storage location is selected
            automatically by ClearCase. By default this field is not set.
          </para>

          <important>
            <para>"View Storage Location" is an advanced setting. It should be
              used with caution and only if the default value is not suitable.
              This setting is available only when an advanced build
              configuration is enabled using the system settings page.
            </para>
          </important>
        </sect3>

        <sect3>
          <title>Ignore Error Lines</title>

          <para>An optional field "Ignore error lines" may specify a list of
            strings that define what lines in standard error output should be
            ignored if they contain one of the strings.
          </para>

          <important>
            <para>"Ignore error lines" is an advanced setting. This setting is
              available only when an advanced build configuration is enabled
              using the system settings page. It should be used with caution and
              only if the default value is not suitable.
            </para>
          </important>
        </sect3>
      </sect2>

      <sect2>
        <title>Configuring CVS Access</title>

        <para>To configure access to CVS, fill the following mandatory
          fields:
        </para>

        <itemizedlist>
          <listitem>
            <para>CVS Root</para>
          </listitem>

          <listitem>
            <para>CVS Repository path</para>
          </listitem>

          <listitem>
            <para>Path to CVS client executable</para>
          </listitem>

          <listitem>
            <para>Change window</para>
          </listitem>
        </itemizedlist>

        <para>The following fields are optional:</para>

        <itemizedlist>
          <listitem>
            <para>CVS password</para>
          </listitem>

          <listitem>
            <para>Path to external rsh</para>
          </listitem>

          <listitem>
            <para>Branch name</para>
          </listitem>

          <listitem>
            <para>Change pre-check</para>
          </listitem>

          <listitem>
            <para>Fast change detection</para>
          </listitem>

          <listitem>
            <para>Compression level</para>
          </listitem>

          <listitem>
            <para>Repository browser</para>
          </listitem>

          <listitem>
            <para>Custom Relative Build Directory</para>
          </listitem>
        </itemizedlist>

        <para>Meaning of each field discussed below.</para>

        <sect3>
          <title>CVS Root</title>

          <para>CVS root is a mandatory field. The entry for this field should
            conform with the format for the CVS root.
          </para>

          <example>
            <title>CVS root for pserver authentication</title>

            <para>:pserver:my_user_name@192.168.1.2:/home/cvs/data/CVSroot</para>
          </example>
        </sect3>

        <sect3>
          <title>CVS Repository Path</title>

          <para>Repository path is a mandatory field. It defines the location
            of the home of the project source line relative to the CVS
            root.
          </para>

          <example>
            <title>Single line CVS repository path</title>

            <para>
              <filename>mycompany/myproject20</filename>
            </para>
          </example>

          <para>Parabuild supports multiple path projects. For multiple path
            projects each path should be entered one per line.
          </para>

          <example>
            <title>Multi-line CVS repository path</title>

            <para>
              <filename>mycompany/myproject20/3rdparty/libs</filename>
            </para>
          </example>

          <para>All build scripts are executed with a project source line home
            as the current directory. The project source line home is the first
            line defined in the CVS repository path. For example, if the CVS
            repository path is mycompany/myproject20, and the build script is
            stored in mycompany/myproject20/make, the build command may look
            like
            <programlisting>make all.clean</programlisting>
          </para>
        </sect3>

        <sect3>
          <title>Path To CVS Client Executable</title>

          <para>Path to CVS client executable is a mandatory field. This field
            should be set to a fully qualified path to a CVS client executable.
            The path should be wrapped in double quotes if it contains
            spaces.
          </para>

          <example>
            <title>Path to CVS executable field</title>

            <para>Unix:</para>

            <para>
              <filename>/usr/bin/cvs</filename>
            </para>

            <para>Windows:</para>

            <para>
              <filename>C:\cvs\cvs.exe</filename>
            </para>
          </example>
        </sect3>

        <sect3>
          <title>CVS Password</title>

          <para>CVS password is an optional field. If needed, enter a password
            that will be required to access CVS in this field.
          </para>
        </sect3>

        <sect3>
          <title>Path To External rsh</title>

          <para>This optional field defines a fully qualified path to a remote
            shell binary for usage. Usually this field is used to configure
            access to CVS via SSH.
          </para>
        </sect3>

        <sect3>
          <title>Configuring Access To CVS Via SSH</title>

          <para>Configuring access to CVS via SSH consists of generating
            public and private DSA keys and listing the generated public key at
            the CVS server. The following discussion assumes that Parabuild is
            installed on a Unix-like system and OpenSSH client is used. Please
            consult with the documentation for the corresponding SSH client if
            it is different from the above.
          </para>

          <para>First, login to the server as user
            <filename>parabuild</filename>
            and ensure that the current directory
            is parabuild's home:
          </para>

          <programlisting>su - parabuild
            cd ~
          </programlisting>

          <para>Generate public and private keys. When asked for passphrase,
            hit Enter (no passphrase):
          </para>

          <programlisting>ssh-keygen -t dsa</programlisting>

          <para>The typical console output produced by ssh-keygen is the
            following:
          </para>

          <programlisting>Generating public/private dsa key pair.
            Enter file in which to save the key (/home/parabuild/.ssh/id_dsa):
            Enter passphrase (empty for no passphrase):
            Enter same passphrase again:
            Your identification has been saved in /home/parabuild/.ssh/id_dsa.
            Your public key has been saved in /home/username/.ssh/id_dsa.pub.
            The key fingerprint is:
            e2:eb:aa:23:0b:0f:15:6a:f6:39:eb:0f:3a:37:96:20 parabuild@hostname
          </programlisting>

          <para>Set the correct permissions for the generated keys:</para>

          <programlisting>chmod 600 ~/.ssh/id_dsa
            chmod 644 ~/.ssh/id_dsa.pub
          </programlisting>

          <para>E-mail the<emphasis role="bold">public key</emphasis>,
            <emphasis role="bold">~/.ssh/id_dsa.pub</emphasis>, to your CVS
            administrator.
          </para>

          <para>If you are an administrator of the system where CVS is
            installed, add the public key to file ~/.ssh/authorized_keys for the
            user that parabuild will use to access CVS via SSH and make this
            file read-only:
          </para>

          <programlisting>chmod go-w ~ ~/.ssh ~/.ssh/authorized_keys</programlisting>

          <para>Once the keys are installed, edit the build configuration in
            Parabuild and fill the fields "CVS root" and "Path to external rsh".
            See the example below.
          </para>

          <example>
            <title>Connecting to CVS using SSH As Remote Shell Under
              Unix
            </title>

            <para>CVS root:</para>

            <para>:ext:my_user_name@192.168.1.2:/home/cvs/data/CVSroot</para>

            <para>Path to external rsh:</para>

            <para>
              <filename>/usr/bin/ssh</filename>
            </para>
          </example>
        </sect3>

        <sect3>
          <title>Change Window</title>

          <para>Parabuild maintains synthetic change lists for CVS. The change
            list is a set of logically connected changes in multiple files. An
            example of a change list can be adding to CVS a C++ class and a
            supporting binary library that the class makes use of.
          </para>

          <para>CVS itself does not support change lists. If a logically
            connected group of files is checked in, and the process takes longer
            than a minute, it is possible that Parabuild might detect the
            presence of changes before all files make it to the CVS repository
            and fire a build against an incomplete submission time stamp. To
            avoid this problem Parabuild uses "change window" for the advanced
            detection of the member files of a change list. The change window is
            the maximum time in seconds a check-in of a group of files may
            take.
          </para>

          <para>Entering zero value in the change window field turns off the
            advanced detection of members of change lists that are taking a long
            time to process.
          </para>
        </sect3>

        <sect3>
          <title>Change Pre-check</title>

          <para>If Change Pre-check is on, Parabuild will issue a cvs history
            command for a quick detection of the presence of changes after
            periods of inactivity.
          </para>

          <para>Using change pre-check may speed up the detection of changes
            that need to be built. It is beneficial predominantly for CVS
            servers hosting large standalone source lines.
          </para>

          <para>Change pre-check is not beneficial if a CVS server hosts
            multiple projects under active development.
          </para>

          <para>A default setting is not to use change pre-check.</para>
        </sect3>

        <sect3>
          <title>Fast Change Detection</title>

          <para>If Fast Change Detection is checked, Parabuild will use option
            "-S" when running cvs log command. This may reduce amount of
            information passed from CVS to Parabuild and speed up detecting of
            changes as a result. Using fast change detection requires CVS
            starting version 1.4 and on. This option should be disabled for
            prior versions of CVS.
          </para>
        </sect3>

        <sect3>
          <title>Compression Level</title>

          <para>Compression level drop down allows to set a compression level
            used to transfer files over the network from CVS to Parabuild. The
            default setting for compression level is zero (no
            compression).
          </para>

          <para>While higher compression levels may reduce network traffic
            between Parabuild and the CVS server, they are very likely to
            increase the CPU load on both servers. We recommend leaving the
            compression level set at zero if both Parabuild and CVS are
            connected over a high-speed intranet, which is usually the
            case.
          </para>
        </sect3>

        <sect3>
          <title>Branch Name</title>

          <para>Branch name is an optional field. Use this field to enter a
            name of a branch if the build being configured will be performed
            against a branched source line.
          </para>
        </sect3>

        <sect3>
          <title>Repository Browser</title>

          <para>Parabuild allows selecting ViewVC or Cenqua FishEye as a
            repository browser. Parabuild integrates with repository browsers by
            providing direct links to repository browser pages when displaying
            changes participated in a given build run. Configuration for
            repository browsers in discussed in the following sections.
          </para>
        </sect3>

        <sect3>
          <title>Integration With ViewVC</title>

          <para>ViewVC (formerly known as ViewCVS) is a browser interface for
            CVS and Subversion version control repositories. It generates HTML
            to present navigable directory, revision, and change log listings.
            To enable integration with ViewVC, fill ViewVC URL and ViewVC root
            fields. The meaning and use of each field is discussed below.
          </para>

          <sect4>
            <title>ViewVC URL</title>

            <para>ViewVC URL should contain a base part of the URL that would
              be used to access ViewVC. The content of this field depends on an
              how access to ViewVC is configured. The most common forms look
              like the following. The bold font marks the base part of the URL:
              <example>
                <title>The Most Commonly Used Forms of ViewVC URLs</title>

                <para>
                  <emphasis role="bold">
                    <emphasis
                            role="bold">http://mycvshost/viewcvs/
                      <emphasis role="bold">
                        <emphasis role="bold">
                          <emphasis>myproject</emphasis>
                        </emphasis>
                      </emphasis>
                    </emphasis>
                    /
                  </emphasis>
                  README?rev=6881&amp;view=markup
                </para>

                <para>
                  <emphasis
                          role="bold">http://mycvshost/cgi-bin/viewcvs.cgi/
                  </emphasis>
                  myproject/tags?rev=1033&amp;view=log
                </para>

                <para><emphasis
                        role="bold">http://mycvshost/viewcvs.py/</emphasis>myprojectREADME?rev=6881&amp;view=markup
                </para>
              </example>
            </para>

            <para>Identify your base URL and enter in the ViewVC URL
              field.
            </para>
          </sect4>

          <sect4>
            <title>ViewVC Root</title>

            <para>Enter ViewVC root in this field if applicable.</para>
          </sect4>
        </sect3>

        <sect3>
          <title>Integration With FishEye</title>

          <para>FishEye is a browser interface for CVS and Subversion version
            control repositories. It generates HTML to present navigable
            directory, revision, and change log listings. To enable integration
            with FishEye, fill FishEye URL and FishEye root fields. The meaning
            and use of each field is discussed below.
          </para>

          <sect4>
            <title>FishEye URL</title>

            <para>FishEye URL should contain a base part of the URL that would
              be used to access FishEye. The content of this field depends on an
              how access to FishEye is configured. The most common forms look
              like the following. The bold font marks the base part of the URL:
              <example>
                <title>The Most Commonly Used Forms of FishEye URLs</title>

                <para>
                  <emphasis role="bold">
                    <emphasis
                            role="bold">http://myfisheyehost/fisheye/
                      <emphasis
                              role="bold">
                        <emphasis role="bold">
                          <emphasis>myproject</emphasis>
                        </emphasis>
                      </emphasis>
                    </emphasis>
                    /
                  </emphasis>
                  README?rev=6881&amp;view=markup
                </para>
              </example>
            </para>

            <para>Identify your base URL and enter in the FishEye URL
              field.
            </para>
          </sect4>

          <sect4>
            <title>FishEye Root</title>

            <para>Enter FishEye root in this field if applicable.</para>
          </sect4>
        </sect3>

        <sect3>
          <title>Integration With WebSVN</title>

          <para>WebSVN is a browser interface for the Subversion version
            control repository. It generates HTML to present navigable
            directory, revision, and change log listings. To enable integration
            with WebSVN, fill 'Base WebSVN URL' and 'Repository name' fields. Example:
          </para>
          <para>
            <mediaobject>
              <imageobject>
                <imagedata align="center"
                           fileref="websvn-integration.gif"
                           format="GIF"/>
              </imageobject>
            </mediaobject>
          </para>

          <para>The meaning and use of each field is discussed below.</para>

          <sect4>
            <title>Base WebSVN URL</title>

            <para>Base WebSVN URL should contain a base part of the URL that would
              be used to access WebSVN. The content of this field depends on an
              how access to WebSVN is configured. The most common forms look
              like the following. The bold font marks the base part of the URL:
              <example>
                <title>The Most Commonly Used Form of WebSVN URL</title>

                <para>
                  <emphasis role="bold">https://host.net/websvn/mycompany/</emphasis>filedetails.php?repname=mycompany&amp;path=/trunk/Fbuild.xml&amp;rev=15717
                </para>
              </example>
            </para>

            <para>Identify your base URL and enter in the WebSVN URL
              field.
            </para>
          </sect4>

          <sect4>
            <title>Repository name</title>

            <para>Enter the repository name in this field if applicable.</para>
          </sect4>

        </sect3>

        <sect3>
          <title>Custom Relative Build Directory</title>

          <para>An optional field Custom relative build dir" may contain a
            custom relative path to a build directory. You will have to set this
            field if CVS repository path consists of CVS module names. Parabuild
            will start build step scripts using this directory as a current
            directory. The relative build directory is a directory that is
            relative to a working directory provided by Parabuild. For instance,
            if a module named "<filename>my_proj</filename>" consisted of a
            repository path
            <filename>projects/release/my_proj</filename>
            and a
            build script were stored under
            <filename>projects/release/my_proj/build</filename>
            directory, the
            relative build dir field would have to contain value
            "<filename>projects/release/my_proj/build</filename>".
            <important>
              <para>"Custom relative build dir" is an advanced setting. It
                should be used with caution and only if the default value is not
                suitable. This setting is available only when an advanced build
                configuration is enabled using the system settings page.
              </para>
            </important>
          </para>
        </sect3>
      </sect2>

      <sect2>
        <title>Configuring Watching for File System Changes</title>

        <para>Parabuild provides an ability to configure a surrogate "File
          system" VCS to support watching file system for changes. This ability
          can be used to trigger builds when changes are detected. To configure
          watching for file system changes, fill in the following mandatory
          fields:
        </para>

        <itemizedlist>
          <listitem>
            <para>User name</para>
          </listitem>

          <listitem>
            <para>Paths</para>
          </listitem>
        </itemizedlist>

        <para>The following fields are optional:</para>

        <itemizedlist>
          <listitem>
            <para>Command to sync to change list</para>
          </listitem>

          <listitem>
            <para>Command to label/tag a build</para>
          </listitem>

          <listitem>
            <para>Command to remove a tabel/tag</para>
          </listitem>
        </itemizedlist>

        <para>The meaning of each field discussed below.</para>

        <sect3>
          <title>User name</title>

          <para>User name is a mandatory field. Parabuild will use this field
            to fill "user" part of detected change lists.
          </para>
        </sect3>

        <sect3>
          <title>Path</title>

          <para>Path is a mandatory field. This field should contain a list of
            directories, files or URLs that Parabuild should watch for
            changes.
          </para>
        </sect3>

        <sect3>
          <title>Command To Sync To Change List</title>

          <para>"File system" VCS allows running arbitrary shell scripts as a
            part of the change detection and build cycles. Such commands serve
            as points of extensibility. Field "Sync to change list" may contain
            a command that can be used to alter content of the file system. The
            content may represent certain state of the file system that is
            considered "in sync" with state of the file system or an external
            VCS at given time.
          </para>

          <para>Parabuild supplies parameters of the build configuration to
            the shell scripts. The parameters are passed in form of shell
            variables. The following shell variables are available to the "Sync
            To Change List" shell script:
          </para>

          <itemizedlist>
            <listitem>
              <para>
                <filename>PARABUILD_CHANGE_LIST_TIMESTAMP</filename>
                contains number of milliseconds passed since midnight, January
                1, 1970 UTC.
              </para>
            </listitem>

            <listitem>
              <para>
                <filename>PARABUILD_CHANGE_LIST_DATETIME</filename>
                contains a string representation of the change list time stamp
                in "<filename>yyyyMMddHHmmss</filename>" format.
              </para>
            </listitem>

            <listitem>
              <para><filename>PARABUILD_CONFIGURATION_ID</filename>contains a
                unique system-wide identifier assigned to this build
                configuration.
              </para>
            </listitem>

            <listitem>
              <para>
                <filename>PARABUILD_BUILD_NAME</filename>
                contains a name
                assigned to this build configuration.
              </para>
            </listitem>
          </itemizedlist>
        </sect3>

        <sect3>
          <title>Command To Label Build</title>

          <para>Field "Command To Label Build" may contain a command that can
            be used to label or to tag content of an external VCS at given time.
            This command may be called if a build run was successful and if
            labeling is enabled. The following shell variables are available to
            the "Command To Label Build" shell script:
          </para>

          <itemizedlist>
            <listitem>
              <para>
                <filename>PARABUILD_LABEL_TO_CREATE</filename>
                contains
                the name of the label that should be applied to the state of an
                external VCS at the given time.
              </para>
            </listitem>

            <listitem>
              <para>
                <filename>PARABUILD_LABEL_TIMESTAMP</filename>
                contains
                number of milliseconds passed since midnight, January 1, 1970
                UTC.
              </para>
            </listitem>

            <listitem>
              <para>
                <filename>PPARABUILD_LABEL_DATETIME</filename>
                contains a
                string representation of the time stamp that a label should be
                applied to in "<filename>yyyyMMddHHmmss</filename>"
                format.
              </para>
            </listitem>

            <listitem>
              <para><filename>PARABUILD_CONFIGURATION_ID</filename>contains a
                unique system-wide identifier assigned to this build
                configuration.
              </para>
            </listitem>

            <listitem>
              <para>
                <filename>PARABUILD_BUILD_NAME</filename>
                contains a name
                assigned to this build configuration.
              </para>
            </listitem>
          </itemizedlist>
        </sect3>

        <sect3>
          <title>Command To Delete Label</title>

          <para>Field "Command To Delete Label" may contain a command that can
            be used to delete a label or a tag that was previously created by
            Parabuild in the external VCS. This command may be called if label
            cleanup is configured. The following shell variables are available
            to the "Command To Delete Label" shell script:
          </para>

          <itemizedlist>
            <listitem>
              <para>
                <filename>PARABUILD_LABEL_TO_DELETE</filename>
                contains
                the name of the label that should be deleted.
              </para>
            </listitem>

            <listitem>
              <para><filename>PARABUILD_CONFIGURATION_ID</filename>contains a
                unique system-wide identifier assigned to this build
                configuration.
              </para>
            </listitem>

            <listitem>
              <para>
                <filename>PARABUILD_BUILD_NAME</filename>
                contains a name
                assigned to this build configuration.
              </para>
            </listitem>
          </itemizedlist>
        </sect3>

        <sect3>
          <title>Error Handling</title>

          <para>The shell command discussed in the previous sections should
            return a non-zero error code if something goes wrong. If a command
            returns a non-zero code, Parabuild will collect a limited number of
            lines from the tail of
            <filename>stderr</filename>
            output. The
            output will be sent to the build administrator to notify about the
            error condition.
          </para>
        </sect3>
      </sect2>

      <sect2>
        <title>Configuring Generic Version Control System Access</title>

        <para>Parabuild provides an ability to configure access to a generic
          version control system. A generic version control system can be used
          to integrate Parabuild with a version control system that Parabuild
          does not integrate with yet. Also, this feature can be used to deliver
          a custom integration if once included into Parabuild does not fit your
          needs. Using this feature requires extensive knowledge of other
          languages such as bash, Perl, Java and alike.
        </para>

        <para>Parabuild integrates with a generic version control system by
          calling shell scripts according to a defined protocol of access to a
          version control system as it is seen by Parabuild.
        </para>

        <para>Parabuild supplies parameters of the build configuration to the
          shell scripts. The parameters are passed in form of shell
          variables.
        </para>

        <para>Shell command should be called according to the OS-specific
          rules: Example for bash call:<filename>bash
            /op/sripts/get_changes.sh</filename>. Example for cmd call:
          <filename>call C:\scripts\get_changes.bat</filename>
        </para>

        <para>The protocol, commands and their parameters are discussed
          below.
        </para>

        <sect3>
          <title>Command To Get Changes</title>

          <para>Parabuild issues this command every time it has to poll a
            version control system for new changes according to build schedule.
            If changes are present this command should output a string-delimited
            set of change records to<filename>stdout</filename>. Parabuild will
            parse the output according to the parser parameters. The parameters
            are entered in the corresponding entry fields. The meaning of each
            field is discussed below.
          </para>

          <sect4>
            <title>Parser Parameters</title>

            <para>
              <emphasis role="bold">Column divider</emphasis>
              is a string
              that separates columns in a change record. The column divider
              should contain a set of characters that are unlikely to be present
              in the change record. Example:<filename>w0Fg9</filename>.
            </para>

            <para>
              <emphasis role="bold">End of record</emphasis>
              marker is a
              string that marks end of a change record. The end of record marker
              should contain a set of characters that are unlikely to be present
              in the change record. Example:<filename>bH56d</filename>. End of
              the record token should be followed by a line break.
            </para>

            <para><emphasis role="bold">Change date format</emphasis>defines a
              template Parabuild will use to parse change dates.
            </para>
          </sect4>

          <sect4>
            <title>Change Record Format</title>

            <para>The format of the change record is the following:</para>

            <para>&lt;User name&gt;&lt;Column divider&gt;&lt;Change
              date&gt;&lt;Column divider&gt;&lt;File name&gt;&lt;Column
              divider&gt;&lt;Revision&gt;&lt;Column divider&gt;&lt;Change
              type&gt;&lt;Column divider&gt;&lt;Change comment&gt;&lt;Column
              divider&gt;&lt;End of record marker&gt;</para>

            <para>The change date column should follow the format defined in
              the "Change date format" field. Example of the format is
              <filename>yyyyMMdd.HHmmss</filename>.
            </para>

            <para>The change type should contain one of the following sting
              literals:<filename>checkin, mkelem, add, delete or
                remove</filename>.
            </para>
          </sect4>

          <sect4>
            <title>Parameters</title>

            <para>The following shell variables are available to the "Get
              Changes" shell script:
            </para>

            <itemizedlist>
              <listitem>
                <para>
                  <filename>PARABUILD_SINCE_TIMESTAMP</filename>
                  contains
                  a time stamp to start looking for changes from. This is a
                  number of milliseconds passed since midnight, January 1, 1970
                  UTC.
                </para>
              </listitem>

              <listitem>
                <para>
                  <filename>PARABUILD_SINCE_DATETIME</filename>
                  contains a
                  string representation of the time stamp in "
                  <filename>yyyyMMddHHmmss</filename>
                  " format.
                </para>
              </listitem>

              <listitem>
                <para><filename>PARABUILD_CONFIGURATION_ID</filename>contains
                  a unique system-wide identifier assigned to this build
                  configuration.
                </para>
              </listitem>

              <listitem>
                <para>
                  <filename>PARABUILD_BUILD_NAME</filename>
                  contains a
                  name assigned to this build configuration.
                </para>
              </listitem>
            </itemizedlist>
          </sect4>
        </sect3>

        <sect3>
          <title>Command To Sync To Change List</title>

          <para>Field "Sync to change list" may contain a command that can be
            used to alter content of the file system. The content may represent
            certain state of the file system that is considered "in sync" with
            state of the file system or an external VCS at given time.
          </para>

          <para>The following shell variables are available to the "Sync To
            Change List" shell script:
          </para>

          <itemizedlist>
            <listitem>
              <para>
                <filename>PARABUILD_CHANGE_LIST_TIMESTAMP</filename>
                contains number of milliseconds passed since midnight, January
                1, 1970 UTC.
              </para>
            </listitem>

            <listitem>
              <para>
                <filename>PARABUILD_CHANGE_LIST_DATETIME</filename>
                contains a string representation of the change list time stamp
                in "<filename>yyyyMMddHHmmss</filename>" format.
              </para>
            </listitem>

            <listitem>
              <para><filename>PARABUILD_CONFIGURATION_ID</filename>contains a
                unique system-wide identifier assigned to this build
                configuration.
              </para>
            </listitem>

            <listitem>
              <para>
                <filename>PARABUILD_BUILD_NAME</filename>
                contains a name
                assigned to this build configuration.
              </para>
            </listitem>
          </itemizedlist>
        </sect3>

        <sect3>
          <title>Command To Label Build</title>

          <para>Field "Command To Label Build" may contain a command that can
            be used to label or to tag content of an external VCS at given time.
            This command may be called if a build run was successful and if
            labeling is enabled. The following shell variables are available to
            the "Command To Label Build" shell script:
          </para>

          <itemizedlist>
            <listitem>
              <para>
                <filename>PARABUILD_LABEL_TO_CREATE</filename>
                contains
                the name of the label that should be applied to the state of an
                external VCS at the given time.
              </para>
            </listitem>

            <listitem>
              <para>
                <filename>PARABUILD_LABEL_TIMESTAMP</filename>
                contains
                number of milliseconds passed since midnight, January 1, 1970
                UTC.
              </para>
            </listitem>

            <listitem>
              <para>
                <filename>PPARABUILD_LABEL_DATETIME</filename>
                contains a
                string representation of the time stamp that a label should be
                applied to in "<filename>yyyyMMddHHmmss</filename>"
                format.
              </para>
            </listitem>

            <listitem>
              <para><filename>PARABUILD_CONFIGURATION_ID</filename>contains a
                unique system-wide identifier assigned to this build
                configuration.
              </para>
            </listitem>

            <listitem>
              <para>
                <filename>PARABUILD_BUILD_NAME</filename>
                contains a name
                assigned to this build configuration.
              </para>
            </listitem>
          </itemizedlist>
        </sect3>

        <sect3>
          <title>Command To Delete Label</title>

          <para>Field "Command To Delete Label" may contain a command that can
            be used to delete a label or a tag that was previously created by
            Parabuild in the external VCS. This command may be called if label
            cleanup is configured. The following shell variables are available
            to the "Command To Delete Label" shell script:
          </para>

          <itemizedlist>
            <listitem>
              <para>
                <filename>PARABUILD_LABEL_TO_DELETE</filename>
                contains
                the name of the label that should be deleted.
              </para>
            </listitem>

            <listitem>
              <para><filename>PARABUILD_CONFIGURATION_ID</filename>contains a
                unique system-wide identifier assigned to this build
                configuration.
              </para>
            </listitem>

            <listitem>
              <para>
                <filename>PARABUILD_BUILD_NAME</filename>
                contains a name
                assigned to this build configuration.
              </para>
            </listitem>
          </itemizedlist>
        </sect3>

        <sect3>
          <title>Error Handling</title>

          <para>The shell command discussed in the previous sections should
            return a non-zero error code if something goes wrong. If a command
            returns a non-zero code, Parabuild will collect a limited number of
            lines from the tail of
            <filename>stderr</filename>
            output. The
            output will be sent to the build administrator to notify about the
            error condition.
          </para>
        </sect3>
      </sect2>

      <sect2>
        <title>Configuring Git Access</title>

        <para>To configure access to Git version control system, fill in the
          following mandatory fields:
        </para>

        <itemizedlist>
          <listitem>
            <para>Path to Git client executable (git)</para>
          </listitem>

          <listitem>
            <para>Git repository</para>
          </listitem>

          <listitem>
            <para>Depot path</para>
          </listitem>
        </itemizedlist>

        <para>Meaning of each field is discussed below.</para>

        <sect3>
          <title>Path To Git Client Executable</title>

          <para>Path to the Git client executable is a mandatory field. This
            field should be set to a fully qualified path to a Git client
            executable. The path should be wrapped in double quotes if it
            contains spaces.
          </para>

          <example>
            <title>Path to Git Executable Field</title>

            <para>Unix:</para>

            <para>
              <filename>/usr/bin/git</filename>
            </para>

            <para>Windows:</para>

            <para>
              <filename>C:\Git\git.exe</filename>
            </para>
          </example>
        </sect3>

        <sect3>
          <title>Git Repository</title>

          <para>Git Repository is a mandatory field. This file should contain
            a URL pointing to a Git repository and should correspond with the
            URL notation. Parabuild supports SSH, HTTP, GIT and FILE protocols
            to access Git servers.
          </para>

          <example>
            <title>Git Repository Field Using SSH Protocol</title>

            <para>ssh://my-git-server/project.git</para>
          </example>
        </sect3>

        <sect3>
          <title>Git Repository Path</title>

          <para>Repository path is a mandatory field. It defines the location
            of the home of the project source inside the Git repository.
            Parabuild will watch for changes only the paths defined in this
            field.
          </para>

          <example>
            <title>Single Line Git Repository Path</title>

            <para>
              <filename>projects/myproject_20</filename>
            </para>
          </example>

          <para>Parabuild supports multiple-path projects. For multiple path
            projects each path should be entered one per line.
          </para>

          <example>
            <title>Multi-path Git Repository Path</title>

            <para>
              <filename>projects/myproject_20</filename>
            </para>

            <para>
              <filename>3rdparty</filename>
            </para>
          </example>

          <para>All build scripts are executed with a project source line home
            as the current directory. The project source line home is the first
            line defined in the Git repository path. For example, if Git
            repository path is<filename>/projects/myproject_20</filename>, and
            the build script is stored in
            <filename>/projects/myproject_20/make</filename>
            file, the build
            command may look like
          </para>

          <programlisting>make all.clean</programlisting>

          <para>Git repository path should be set to "/" if the project home
            is at the root of the Git repository.
          </para>
        </sect3>
      </sect2>

      <sect2>
        <title>Configuring Mercurial Access</title>

        <para>Parabuild provides extensive support for Continuous Integration
          and Release Management for Distributed Version Control System (DVCS)
          Mercurial. To configure access to Mercurial, fill in the following
          mandatory fields:
        </para>

        <itemizedlist>
          <listitem>
            <para>Path to
              <filename>hg</filename>
              executable
            </para>
          </listitem>

          <listitem>
            <para>Repository URL</para>
          </listitem>
        </itemizedlist>

        <para>The configuration screen for MKS also includes the following
          optional fields:
        </para>

        <itemizedlist>
          <listitem>
            <para>Branch</para>
          </listitem>

          <listitem>
            <para>Custom checkout dir</para>
          </listitem>

          <listitem>
            <para>Ignore list</para>
          </listitem>
        </itemizedlist>

        <figure>
          <title>Mercurial Configuration Example</title>

          <screenshot>
            <screeninfo>Mercurial Configuration Example</screeninfo>

            <mediaobject>
              <imageobject>
                <imagedata fileref="mercurial_continuous_integration_release_management.png"
                           format="PNG"/>
              </imageobject>
            </mediaobject>
          </screenshot>
        </figure>

        <para>The meaning of each field discussed below.</para>

        <sect3>
          <title>Path to hg Executable</title>

          <para>Path to hg executable is a mandatory field. This field should
            be set to a fully qualified path to Mercurial's command line client
            hg. The path should be wrapped in double quotes if it contains
            spaces.
          </para>
        </sect3>

        <sect3>
          <title>Repository URL</title>

          <para>Repository URL is a mandatory field. This field should contain
            a path to a Mercurial repository. Supported protocols are http://,
            https://, file:// and ssh://.
          </para>
        </sect3>

        <sect3>
          <title>Branch</title>

          <para>Branch is an optional field. It may be set to a Mercurial
            branch.
          </para>
        </sect3>
      </sect2>

      <sect2>
        <title>Configuring MKS Access</title>

        <para>To configure access to MKS Source Integrity Enterprise version
          control system, fill in the following mandatory fields:
        </para>

        <itemizedlist>
          <listitem>
            <para>Path to
              <filename>si</filename>
              executable
            </para>
          </listitem>

          <listitem>
            <para>MKS Host</para>
          </listitem>

          <listitem>
            <para>MKS Port</para>
          </listitem>

          <listitem>
            <para>MKS User</para>
          </listitem>

          <listitem>
            <para>MKS Password</para>
          </listitem>

          <listitem>
            <para>MKS Project path</para>
          </listitem>

          <listitem>
            <para>rlog date format</para>
          </listitem>
        </itemizedlist>

        <para>The configuration screen for MKS also includes optional field
          "co date format override".
        </para>

        <para>The meaning of each field discussed below.</para>

        <sect3>
          <title>Path to SI Executable</title>

          <para>Path to si executable is a mandatory field. This field should
            be set to a fully qualified path to a MKS's command line client
            executable (<filename>si</filename>). The path should be wrapped in
            double quotes if it contains spaces.
          </para>
        </sect3>

        <sect3>
          <title>MKS Host</title>

          <para>MKS host is a mandatory field. MKS host should be set to a
            valid MKS server IP address or a DNS name.
          </para>
        </sect3>

        <sect3>
          <title>MKS Port</title>

          <para>MKS port is a mandatory field. MKS port should be set to a
            valid MKS server port number that the server is listening on.
          </para>
        </sect3>

        <sect3>
          <title>MKS User</title>

          <para>MKS user is a mandatory field. It should contain a name of a
            valid MKS user that Parabuild will use to access the MKS server. The
            user should be allowed to access the MKS server beforehand.
          </para>
        </sect3>

        <sect3>
          <title>MKS Password</title>

          <para>MKS password is an optional field. This field should be set if
            the user defined in the MKS user field requires a password to access
            the MKS server.
          </para>
        </sect3>

        <sect3>
          <title>MKS Project</title>

          <para>MKS project is a mandatory field. Enter a fully qualified path
            to the project in this field.
          </para>

          <para>If it is not entered explicitly, Parabuild provides a client
            part of the client view automatically by replacing the depot name
            with a template client name "parabuild". A client view
          </para>
        </sect3>

        <sect3>
          <title>rlog Date Format</title>

          <para>This field should contain the format for the dates present in
            the output of "si rlog" command. If Parabuild reports a problem
            executing command "si rlog", such as "Unparseable date" error, the
            format needs to be changed. For example, the date "<emphasis>Sep 11,
              2008 10:15:38 AM</emphasis>" would require the format "<emphasis>MMM
              dd, yyyy hh:mm:ss a</emphasis>".
          </para>

          <para>The default format is "<emphasis>MMM dd, yyyy - hh:mm
            a</emphasis>" that matches the most often used rlog date format,
            example: "
            <emphasis>Apr 29, 2006 - 6:29 PM".</emphasis>
          </para>
        </sect3>

        <sect3>
          <title>co Date Format Override</title>

          <para>This field may contain the format for the dates expected by
            "<emphasis>si co</emphasis>" command. If Parabuild reports a problem
            executing command "<emphasis>si co</emphasis>", the format needs to
            be changed so that it matches the format expected by your Parabuild
            installation. For example, the date "<emphasis>Sep 11, 2008 10:15:38
              AM</emphasis>" would require the format "<emphasis>MMM dd, yyyy
              hh:mm:ss a</emphasis>".
          </para>

          <para>If not set, Parabuild will try to guess the format based on
            the locale of the system Parabuild is running on
            <emphasis>.</emphasis>
          </para>
        </sect3>
      </sect2>

      <sect2>
        <title>Configuring Perforce Access</title>

        <para>To configure access to Perforce version control system, fill in
          the following mandatory fields:
        </para>

        <itemizedlist>
          <listitem>
            <para>Path to P4 executable</para>
          </listitem>

          <listitem>
            <para>P4 port</para>
          </listitem>

          <listitem>
            <para>P4 user</para>
          </listitem>

          <listitem>
            <para>P4 client view</para>
          </listitem>
        </itemizedlist>

        <para>The following fields are optional:</para>

        <itemizedlist>
          <listitem>
            <para>P4 password</para>
          </listitem>

          <listitem>
            <para>Do not sync</para>
          </listitem>

          <listitem>
            <para>P4 counter</para>
          </listitem>

          <listitem>
            <para>Update have list</para>
          </listitem>

          <listitem>
            <para>P4 options</para>
          </listitem>

          <listitem>
            <para>P4Web URL</para>
          </listitem>
        </itemizedlist>

        <para>The following fields are available only when advanced build
          settings are enabled via system settings:
          <itemizedlist>
            <listitem>
              <para>Client name template</para>
            </listitem>

            <listitem>
              <para>P4 variables override</para>
            </listitem>

            <listitem>
              <para>UNC paths under Windows</para>
            </listitem>
          </itemizedlist>
        </para>

        <para>The meaning of each field discussed below.</para>

        <sect3>
          <title>Path to P4 Executable</title>

          <para>Path to P4 executable is a mandatory field. This field should
            be set to a fully qualified path to a Perforce client executable.
            The path should be wrapped in double quotes if it contains
            spaces.
          </para>

          <example>
            <title>Path to P4 executable field</title>

            <para>Unix:</para>

            <para>
              <filename>/opt/perforce/bin/p4</filename>
            </para>

            <para>Windows:</para>

            <para>
              <filename>C:\perforce\p4.exe</filename>
            </para>
          </example>
        </sect3>

        <sect3>
          <title>P4 Port</title>

          <para>P4 port is a mandatory field. P4 port should be set to a
            Perforce server address and port. It should correspond with the
            notation for P4PORT.
          </para>

          <example>
            <title>P4 port field</title>

            <para>perforce:1666</para>
          </example>
        </sect3>

        <sect3>
          <title>P4 User</title>

          <para>P4 user is a mandatory field. It should contain a name of a
            valid Perforce user that Parabuild will use to access the Perforce
            server. The user should be allowed to access the Perforce server by
            calling
            <filename>p4 protect</filename>
            beforehand.
          </para>
        </sect3>

        <sect3>
          <title>P4 Client View</title>

          <para>Client view is a mandatory field. It defines the location of a
            home of a project source line.
          </para>

          <example>
            <title>Single-line P4 Client View</title>

            <para>
              <filename>//depot/projects/myproject_20/...</filename>
            </para>
          </example>

          <para>Parabuild supports multiple path projects. For multiple path
            projects each path should be entered one per line.
          </para>

          <example>
            <title>Multi-path P4 Client View</title>

            <para>
              <filename>//depot/projects/myproject_20/...</filename>
            </para>

            <para>
              <filename>//depot/3rdparty/...</filename>
            </para>
          </example>

          <para>Parabuild maintains its client specs automatically. Parabuild
            provides two modes of entering the client view: a simple mode and an
            advanced mode.
          </para>

          <para>The simple mode should be used by projects that do not require
            complex depot mappings. In the simple mode Parabuild allows entering
            simple P4 mappings that allow only "..." wildcards. All build
            scripts are executed with a project source line home as the current
            directory. When in the simple mode, the project source line home is
            the first line defined in the P4 depot path. For example, if P4
            client view is<filename>//depot/projects/myproject_20</filename>,
            and the build script is stored in
            <filename>//depot/projects/myproject_20/make</filename>
            file, the
            build command may look like
          </para>

          <programlisting>make all.clean</programlisting>

          <para>The resulting client view is formed by adding a part of the
            depot path following the depot name to a Parabuild check-out
            directory. Considering the early example of a multi-path project, a
            directory structure after sync may look like
          </para>

          <programlisting>/opt/parabuild/etc/build/b0co/
            <emphasis role="bold">projects/myproject_20</emphasis>
            /opt/parabuild/etc/build/b0co/
            <emphasis role="bold">3rdparty</emphasis>
          </programlisting>

          <para>When in the advanced mode, Parabuild allows entering client
            views of any complexity. To turn on the advanced mode, check the
            "Advanced view mode" check box and enter the relative build
            directory (project home). The client views must conform the P4
            client view spec. In the advanced mode Parabuild should be provided
            a path to the build directory (project home) explicitly. The
            relative build directory is a directory that is relative to
            Parabuild's P4 client root. Parabuild always uses the checkout
            directory that created for every build configuration as a
            Parabuild's client root. The following example shows possible client
            and the choice of the build directory.
          </para>

          <example>
            <title>Advanced Mode Client View And Relative Build
              Directory
            </title>

            <para>P4 client view:</para>

            <programlisting>-//depot/project/version20/src/release/*
              //depot/project/version20/3rdparty/...
              //depot/<emphasis role="bold">project/version20/src</emphasis>/...
            </programlisting>

            <para>Possible relative build directory assuming that it would
              exist after sync:
            </para>

            <programlisting>
              <emphasis role="bold"><emphasis role="bold">project/version20/src</emphasis>/test/build
              </emphasis>
            </programlisting>
          </example>

          <para>If it is not entered explicitly, Parabuild provides a client
            part of the client view automatically by replacing the depot name
            with a template client name "parabuild". A client view
          </para>

          <para>
            <programlisting>//depot/projects/myproject_20/...</programlisting>
          </para>

          <para>that does not have the client part will be internally
            translated to
          </para>

          <para>
            <programlisting>//depot/projects/myproject_20/... //parabuild/projects/myproject_20/...
            </programlisting>
          </para>

          <para>The actual client view that Parabuild used to access P4 is
            composed during the runtime. Parabuild replaces the template client
            name<filename>//parabuild</filename>with the actual generated client
            name.
          </para>

          <para>Parabuild also support explicit entering of the depot and
            client paths of the client view. The only requirement is that the
            client part should always start with
            <filename>//parabuid/.</filename>
          </para>
        </sect3>

        <sect3>
          <title>Disabling Automatic Syncing</title>

          <para>Before starting a build, Parabuild synchronizes the build
            workspace with Perforce in accordance with build's Perforce view
            using the last change list number detected for this build
            configuration. Some environments may prefer to disable the default
            behaviour and to synchronize the build workspace using their own
            scripts. Usually the custom synchronisation is done by adding a sync
            step to the normal sequence of build steps defined under that Build
            Configuration tab.
          </para>

          <para>If you wish to be able to alter the default behaviour, go to
            Administration, then go to Stability Settings and check box "Enable
            no-checkout builds". Return to the build configuration. The version
            control tab on the build configuration screen will now display a
            check box "Do not sync". Check this box to disable automatic
            workspace synchronization.
          </para>

          <para>If the workspace synchronization is disabled, it is
            responsibility of the build sequence to populate the build
            workspace. The custom sync scripts can use shell variable
            PARABUILD_CHANGE_LIST_NUMBER to sync to the build change list
            number. Please check section
            <link
                    linkend="perforce_env_vars">Perforce Environment Variables
            </link>
            for a more detailed discussion about the available shell variables
            related to Perforce.
          </para>
        </sect3>

        <sect3>
          <title>P4 Password</title>

          <para>P4 password is an optional field. This field should be set if
            the user defined in the P4 user field requires a password to access
            the Perforce server.
          </para>
        </sect3>

        <sect3>
          <title>P4 Counter</title>

          <para>P4 counter is an optional field. P4 counter may contain a name
            of a Perforce counter that contains the number of the latest change
            list for the configured depot path of the project.
          </para>

          <para>By default Parabuild polls Perforce server for change lists.
            For an overloaded Perforce server this may present a concern. Using
            a counter that contains the latest change list number for the
            configured depot path of the project reduces the load of the
            Perforce server.
          </para>

          <para>If the counter is used, a Perforce administrator needs to set
            up a trigger on the Perforce server. The trigger should update the
            counter to the latest change list for the build depot path. If the
            depot path is multi-line, the trigger should take this into account
            by monitoring all configured paths.
          </para>

          <para>When deciding for using the counter, consider an additional
            administrative overhead that is associated with maintaining the
            trigger. If the build depot path is changed, such changes should be
            reflected in the code of the trigger.
          </para>
        </sect3>

        <sect3>
          <title>Update Have List</title>

          <para>Parabuild populates a client workspace and updates the have
            list if box Update Have List is checked. If non checked, Parabuild
            populates a client workspace, but does not update the have list.
            Unchecking this box may increase concurrency Perforce server because
            a sync command will not lock the database.
          </para>
        </sect3>

        <sect3>
          <title>P4 Options</title>

          <para>Parabuild allows setting the following Perforce options:
            <itemizedlist>
              <listitem>
                <para>modtime - modification time for files that were edited
                  in the build client workspace will be set to the time when the
                  file is submitted to the depot.
                </para>
              </listitem>
            </itemizedlist>
            <itemizedlist>
              <listitem>
                <para>nomodtime - modification time for files that were edited
                  in the build client workspace will be set to the time when the
                  file is synced.
                </para>
              </listitem>
            </itemizedlist>
            <itemizedlist>
              <listitem>
                <para>clobber - syncing files will overwrite writable files on
                  the build client workspace.
                </para>
              </listitem>
            </itemizedlist>
            <itemizedlist>
              <listitem>
                <para>noclobber - overwrite writable files on the build client
                  workspace will be protected.
                </para>
              </listitem>
            </itemizedlist>
          </para>
        </sect3>

        <sect3>
          <title>Client Name Template</title>

          <para>An optional field "Client name template" may contain a custom
            template that Parabuild will use to compose a Perforce client name.
            The template may include alphanumeric characters, characters "-" and
            "_". The template must include a template
            parameter<emphasis>${build.id}</emphasis>and may include
            <emphasis>${p4.user}</emphasis>
            parameter.
            <emphasis>${build.id}</emphasis>
            parameter will be replaced with a
            unique build configuration ID during
            runtime.<emphasis>${p4.user}</emphasis>parameter will be replaced
            with the name of Perforce user entered in the "P4 User" field. If
            "Client name template" is not filled, Parabuild will use a default
            value. The default value is "<emphasis>
              parabuild_${build.id}</emphasis>".
            <important>
              <para>"Client name template" is an advanced setting. It should
                be used with caution and only if the default value is not
                suitable. This setting is available only when an advanced build
                configuration is enabled using the system settings page.
              </para>
            </important>
          </para>
        </sect3>

        <sect3>
          <title>P4 Variables Override</title>

          <para>If check box "P4 variables override" is checked, Parabuild
            will set and make available to the build scripts shell variables
            P4CLIENT, P4PASSWD, P4PORT and P4USER that were used to create a
            client spec for the build run. If these variable are already
            available in the environment used to start Parabuild, the variables
            will be overridden. By default the box is not checked and the
            variables are not set. Please check section
            <link
                    linkend="perforce_env_vars">Perforce Environment Variables
            </link>
            for a more detailed discussion about the available shell variables
            related to Perforce.
            <important>
              <para>"P4 Variables Override" is an advanced setting. This
                setting is available only when an advanced build configuration
                is enabled using the system settings page.
              </para>
            </important>
          </para>
        </sect3>

        <sect3>
          <title>P4Web URL</title>

          <para>P4Web is a browser interface for Perforce version control. It
            generates HTML to present navigable directory, revision, and change
            log listings. Parabuild integrates with P4Web by providing direct
            links to P4Web pages. To enable integration with P4Web, fill P4Web
            URL field. P4Web URL should contain a fully qualified path to P4Web
            server that includes a protocol, host name and port number, such as
            <filename>http://public.perforce.com:8080</filename>.
          </para>
        </sect3>
      </sect2>

      <sect2>
        <title>Configuring Serena Version Manager (PVCS) Access</title>

        <para>To configure access to PVCS version control system, fill in the
          following mandatory fields:
        </para>

        <itemizedlist>
          <listitem>
            <para>Path to PVCS client (pcli)</para>
          </listitem>

          <listitem>
            <para>Repository</para>
          </listitem>

          <listitem>
            <para>Projects</para>
          </listitem>

          <listitem>
            <para>Password</para>
          </listitem>

          <listitem>
            <para>Branch label</para>
          </listitem>

          <listitem>
            <para>Promotion group</para>
          </listitem>

          <listitem>
            <para>Change window</para>
          </listitem>
        </itemizedlist>

        <para>The following fields are optional:</para>

        <itemizedlist>
          <listitem>
            <para>User</para>
          </listitem>

          <listitem>
            <para>Password</para>
          </listitem>

          <listitem>
            <para>Branch label</para>
          </listitem>

          <listitem>
            <para>Promotion group</para>
          </listitem>

          <listitem>
            <para>Change window</para>
          </listitem>
        </itemizedlist>

        <para>The meaning of each field discussed below.</para>

        <sect3>
          <title>Setting Parabuild Service User</title>

          <para>All PVCS users must have the ability to read, write, create
            and erase files in the PVCS repository. Parabuild runs as a service
            under Windows using LocalSystem user account, the same account that
            most other services use. This user may not have enough permissions
            to access PVCS repository on the network. You need to change the
            users that Parabuild service runs under to address the permission
            issue. To change the user, please follow the detailed description
            provided in the section<link
                    linkend="changing_parabuild_service_user">Changing Parabuild service
              user</link>.
          </para>
        </sect3>

        <sect3>
          <title>Path to PVCS client (pcli)</title>

          <para>Path to pcli executable is a mandatory field. This field
            should be set to a fully qualified path to a PVCS command line
            client executable (pcli). The path should be wrapped in double
            quotes if it contains spaces.
          </para>

          <example>
            <title>Path to sscm Executable</title>

            <para>Unix:</para>

            <para>
              <filename>/opt/pvcs/bin/pcli</filename>
            </para>

            <para>Windows:</para>

            <para>
              <filename>C:\pvcs\pcli.exe</filename>
            </para>
          </example>
        </sect3>

        <sect3>
          <title>Repository</title>

          <para>Repository is a mandatory field and should contain a fully
            qualified path to PVCS repository.
          </para>
        </sect3>

        <sect3>
          <title>Projects</title>

          <para>Projects is a mandatory field. It should be set to a fully
            qualified PVCS path to a project. Project path should conform
            notation for PVCS paths and begin with "/".
          </para>

          <example>
            <title>PVCS Project</title>

            <para>
              <filename>/projects/myproject_v_2_0</filename>
            </para>
          </example>

          <para>Parabuild supports multiple-path PVCS projects. For multiple
            path projects each path should be entered one per line.
          </para>

          <example>
            <title>Multi-path PVCS Project</title>

            <para>
              <filename>/projects/myproject_v_2_0</filename>
            </para>

            <para>
              <filename>/projects/framework_v_1_1</filename>
            </para>
          </example>

          <para>All build scripts are executed with a project source line home
            as the current directory. The project source line home is the first
            line defined in the PVCS project path. For example, if PVCS project
            path is
            <filename>/projects/myproject_v_2_0</filename>
            and the build
            script is stored in
            <filename>/projects/myproject_v_2_0/nmake</filename>
            file, the build
            command may look like
          </para>

          <programlisting>NAnt all.clean</programlisting>

          <para>Considering the earlier example of a multi-path project, the
            Parabuild directory structure after receiving the project source
            lines may look like
          </para>

          <programlisting>C:\parabuild\etc\build\b0co\
            <emphasis role="bold">projects\myproject_v_2_0</emphasis>

            C:\parabuild\etc\build\b0co\
            <emphasis role="bold">projects\framework_v_1_1</emphasis>
          </programlisting>
        </sect3>

        <sect3>
          <title>User</title>

          <para>PVCS user is an optional field. It may contain a name of a
            valid PVCS user that Parabuild will use to access the PVC
            repository. The user should be allowed to access the PVCS repository
            beforehand.
          </para>
        </sect3>

        <sect3>
          <title>Password</title>

          <para>PVCS password is an optional field. This field should be set
            if the user defined in the PVCS user field requires a password to
            access the PVCS repository.
          </para>
        </sect3>

        <sect3>
          <title>Branch Label</title>

          <para>Branch label is an optional field. Use this field to enter a
            name of a branch label that Parabuild will use to access project
            code base.
          </para>
        </sect3>

        <sect3>
          <title>Promotion Group</title>

          <para>Promotion group is an optional field. Use this field to enter
            a name of a promotion group that Parabuild will use to access
            project code base.
          </para>
        </sect3>

        <sect3>
          <title>Change Window</title>

          <para>Parabuild maintains synthetic change lists for PVCS. The
            change list is a set of logically connected changes in multiple
            files. An example of a change list can be adding to PVCS a C++ class
            and a supporting binary library that the class makes use of.
          </para>

          <para>PVCS itself does not support change lists. If a logically
            connected group of files is checked in, and the process takes longer
            than a minute, it is possible that Parabuild might detect the
            presence of changes before all files make it to the PVCS repository
            and fire a build against an incomplete submission time stamp. To
            avoid this problem Parabuild uses "change window" for the advanced
            detection of the member files of a change list. The change window is
            the maximum time in seconds a check-in of a group of files may
            take.
          </para>

          <para>Entering zero value in the change window field turns off the
            advanced detection of members of change lists that are taking a long
            time to process.
          </para>
        </sect3>
      </sect2>

      <sect2>
        <title>Configuring StarTeam Access</title>

        <para>To configure access to Borland StarTeam version control system,
          fill in the following mandatory fields:
        </para>

        <itemizedlist>
          <listitem>
            <para>Path to
              <filename>stcmd</filename>
              executable
            </para>
          </listitem>

          <listitem>
            <para>Server address</para>
          </listitem>

          <listitem>
            <para>TCP/IP endpoint</para>
          </listitem>

          <listitem>
            <para>Encryption</para>
          </listitem>

          <listitem>
            <para>User</para>
          </listitem>

          <listitem>
            <para>Password</para>
          </listitem>

          <listitem>
            <para>End-of-line conversion</para>
          </listitem>

          <listitem>
            <para>Project path</para>
          </listitem>
        </itemizedlist>

        <para>The meaning of each field discussed below.</para>

        <sect3>
          <title>Path to stcmd Executable</title>

          <para>Path to stcmd executable is a mandatory field. This field
            should be set to a fully qualified path to a StarTeam's command line
            client executable (<filename>stcmd</filename>). The path should be
            wrapped in double quotes if it contains spaces.
          </para>
        </sect3>

        <sect3>
          <title>StarTeam Server Address</title>

          <para>StarTeam server address is a mandatory field. StarTeam server
            address should be set to a valid StarTeam server IP address or a DNS
            name.
          </para>
        </sect3>

        <sect3>
          <title>StarTeam TCP/IP Endpoint</title>

          <para>StarTeam TCP/IP endpoint is a mandatory field. StarTeam TCP/IP
            endpoint should be set to a valid StarTeam server port number that
            the server is listening on.
          </para>
        </sect3>

        <sect3>
          <title>StarTeam User</title>

          <para>StarTeam user is a mandatory field. It should contain a name
            of a valid StarTeam user that Parabuild will use to access the
            StarTeam server. The user should be allowed to access the StarTeam
            server beforehand.
          </para>
        </sect3>

        <sect3>
          <title>StarTeam Password</title>

          <para>StarTeam password is an mandatory field. This field should be
            set to a valid password for the selected user.
          </para>
        </sect3>

        <sect3>
          <title>StarTeam End-of-line Conversion</title>

          <para>StarTeam end-of-line conversion is a mandatory field. Select a
            desired end-of-line conversion for project's local copy. The default
            value is "On".
          </para>
        </sect3>

        <sect3>
          <title>StarTeam Project</title>

          <para>StarTeam project is a mandatory field. Enter a fully qualified
            path to the project in this field.
          </para>
        </sect3>
      </sect2>

      <sect2>
        <title>Configuring Subversion Access</title>

        <para>To configure access to Subversion version control system, fill
          in the following mandatory fields:
        </para>

        <itemizedlist>
          <listitem>
            <para>Path to Subversion client executable (svn)</para>
          </listitem>

          <listitem>
            <para>Subversion URL</para>
          </listitem>

          <listitem>
            <para>Subversion user</para>
          </listitem>

          <listitem>
            <para>Subversion password</para>
          </listitem>

          <listitem>
            <para>Depot path</para>
          </listitem>

          <listitem>
            <para>Repository browser</para>
          </listitem>
        </itemizedlist>

        <para>Meaning of each field discussed below.</para>

        <sect3>
          <title>Path To Subversion Client Executable</title>

          <para>Path to the Subversion client executable is a mandatory field.
            This field should be set to a fully qualified path to a Subversion
            client executable. The path should be wrapped in double quotes if it
            contains spaces.
          </para>

          <example>
            <title>Field Path to Subversion Executable</title>

            <para>Unix:</para>

            <para>
              <filename>/usr/bin/svn</filename>
            </para>

            <para>Windows:</para>

            <para>
              <filename>C:\Subversion\svn.exe</filename>
            </para>
          </example>

          <para>This field may contain a template with a parameter that is defined on a system, project, agent or build level.</para>

          <example>
            <title>Path to Subversion Executable Using a Parameter</title>

            <para>
              <filename>${SVN_EXE_PATH}</filename>
            </para>
          </example>

        </sect3>

        <sect3>
          <title>Subversion URL</title>

          <para>Subversion URL is a mandatory field. This file should contain
            a URL pointing to a Subversion server and should correspond with the
            URL notation. Parabuild supports HTTP, HTTPS, SVN and FILE protocols
            to access Subversion servers.
          </para>

          <example>
            <title>Subversion URL Field Using HTTP Protocol</title>

            <para>http://subversion:3690</para>
          </example>

          <example>
            <title>Subversion URL Field using svn Protocol</title>

            <para>svn://subversion:3690</para>
          </example>
        </sect3>

        <sect3>
          <title>Subversion User</title>

          <para>Subversion user is a mandatory field. It should contain the
            name of a valid Subversion user that Parabuild will use to access a
            Subversion server.
          </para>
        </sect3>

        <sect3>
          <title>Subversion Password</title>

          <para>Subversion password is a mandatory field. It should contain a
            valid password of the Subversion user.
          </para>
        </sect3>

        <sect3>
          <title>Subversion Repository Path</title>

          <para>Repository path is a mandatory field. It defines the location
            of the home of the project source line and should begin with a
            slash.
          </para>

          <example>
            <title>Single Line Subversion Repository Path</title>

            <para>
              <filename>projects/myproject_20</filename>
            </para>
          </example>

          <para>Parabuild supports multiple-path projects. For multiple path
            projects each path should be entered one per line.
          </para>

          <example>
            <title>Multi-path Subversion Repository Path</title>

            <para>
              <filename>projects/myproject_20</filename>
            </para>

            <para>
              <filename>3rdparty</filename>
            </para>
          </example>

          <para>All build scripts are executed with a project source line home
            as the current directory. The project source line home is the first
            line defined in the Subversion repository path. For example, if
            Subversion repository path
            is<filename>/projects/myproject_20</filename>, and the build script
            is stored in
            <filename>/projects/myproject_20/make</filename>
            file,
            the build command may look like
          </para>

          <programlisting>make all.clean</programlisting>
        </sect3>

        <sect3>
          <title>Non-Recursive Repository Path</title>

          <para>Parabuild supports non-recursive repository paths. To mark a
            path a non-recursive, add -N to the end of the Repository
            path.
          </para>

          <example>
            <title>Non-Recursive Subversion Repository Path</title>

            <para>
              <filename>projects/myproject_20 -N</filename>
            </para>

            <para>
              <filename>projects/myproject_20/subpath</filename>
            </para>
          </example>
        </sect3>

        <sect3>
          <title>Watching Non-Recursive Repository Paths Recursively for
            Changes
          </title>

          <para>By default, Parabuild ignores changes under a non-recursive
            repository path. Check box "Watch non-recursive paths recursively
            for changes" alters the default behaviour. When this box is checked,
            Parabuild detects changes under the non-recursive paths. The check
            out is still performed non-recursively.
          </para>

          <para>
            <mediaobject>
              <imageobject>
                <imagedata align="center"
                           fileref="wantch_non_recursive_paths_for_changes.gif"
                           format="GIF"/>
              </imageobject>
            </mediaobject>
          </para>
        </sect3>

        <sect3>
          <title>Repository Browser</title>

          <para>Parabuild allows selecting ViewVC or Cenqua FishEye as a
            repository browser for Subversion. Parabuild integrates with
            repository browsers by providing direct links to repository browser
            pages when displaying changes participated in a given build run.
            Configuration for repository browsers in discussed in the following
            sections.
          </para>
        </sect3>

        <sect3>
          <title>Integration With ViewVC</title>

          <para>ViewVC (formerly known as ViewCVS) is a browser interface for
            CVS and Subversion version control repositories. It generates HTML
            to present navigable directory, revision, and change log listings.
            To enable integration with ViewVC, fill ViewVC URL and ViewVC root
            fields. The meaning and use of each field is discussed below.
          </para>

          <sect4>
            <title>ViewVC URL</title>

            <para>ViewVC URL should contain a base part of the URL that would
              be used to access ViewVC. The content of this field depends on an
              how access to ViewVC is configured. The most common forms look
              like the following. The bold font marks the base part of the URL:
              <example>
                <title>The Most Commonly Used Forms of ViewVC URLs</title>

                <para>
                  <emphasis role="bold">
                    <emphasis
                            role="bold">http://myviewvchost/viewcvs/
                      <emphasis
                              role="bold">
                        <emphasis role="bold">
                          <emphasis>myproject</emphasis>
                        </emphasis>
                      </emphasis>
                    </emphasis>
                    /
                  </emphasis>
                  README?rev=6881&amp;view=markup
                </para>

                <para>
                  <emphasis
                          role="bold">http://myviewvchost/cgi-bin/viewcvs.cgi/
                  </emphasis>
                  myproject/tags?rev=1033&amp;view=log
                </para>

                <para><emphasis
                        role="bold">http://myviewvchost/viewcvs.py/</emphasis>myprojectREADME?rev=6881&amp;view=markup
                </para>
              </example>
            </para>

            <para>Identify your base URL and enter in the ViewVC URL
              field.
            </para>
          </sect4>
        </sect3>

        <sect3>
          <title>Integration With FishEye</title>

          <para>FishEye is a browser interface for CVS and Subversion version
            control repositories. It generates HTML to present navigable
            directory, revision, and change log listings. To enable integration
            with FishEye, fill FishEye URL field.
          </para>

          <sect4>
            <title>FishEye URL</title>

            <para>FishEye URL should contain a base part of the URL that would
              be used to access FishEye. The content of this field depends on an
              how access to FishEye is configured. The most common forms look
              like the following. The bold font marks the base part of the URL:
              <example>
                <title>The Most Commonly Used Forms of FishEye URLs</title>

                <para>
                  <emphasis role="bold">
                    <emphasis
                            role="bold">http://myfisheyehost/fisheye/
                      <emphasis
                              role="bold">
                        <emphasis role="bold">
                          <emphasis>myproject</emphasis>
                        </emphasis>
                      </emphasis>
                    </emphasis>
                    /
                  </emphasis>
                  README?rev=6881&amp;view=markup
                </para>
              </example>
            </para>

            <para>Identify your base URL and enter in the FishEye URL
              field.
            </para>
          </sect4>
        </sect3>
      </sect2>

      <sect2>
        <title>Configuring Surround Access</title>

        <para>To configure access to Surround version control system, fill in
          the following mandatory fields:
        </para>

        <itemizedlist>
          <listitem>
            <para>Path to sscm executable</para>
          </listitem>

          <listitem>
            <para>Surround server address</para>
          </listitem>

          <listitem>
            <para>Surround server port</para>
          </listitem>

          <listitem>
            <para>Surround user name</para>
          </listitem>

          <listitem>
            <para>Branch name</para>
          </listitem>

          <listitem>
            <para>Repository</para>
          </listitem>
        </itemizedlist>

        <para>The following fields are optional:</para>

        <itemizedlist>
          <listitem>
            <para>Surround password</para>
          </listitem>
        </itemizedlist>

        <para>The meaning of each field discussed below.</para>

        <sect3>
          <title>Path To sscm Executable</title>

          <para>Path to sscm executable is a mandatory field. This field
            should be set to a fully qualified path to a Surround command line
            client executable. The path should be wrapped in double quotes if it
            contains spaces.
          </para>

          <example>
            <title>Path to sscm Executable</title>

            <para>Unix:</para>

            <para>
              <filename>/opt/surround/bin/sscm</filename>
            </para>

            <para>Windows:</para>

            <para>
              <filename>C:\surround\sscm.exe</filename>
            </para>
          </example>
        </sect3>

        <sect3>
          <title>Surround Address</title>

          <para>Surround address is a mandatory field. Surround address should
            be set to a Surround server address.
          </para>
        </sect3>

        <sect3>
          <title>Surround Port</title>

          <para>Surround port is a mandatory field. Surround port should be
            set to a port a Surround server listens on. The default value is
            4900.
          </para>
        </sect3>

        <sect3>
          <title>Surround User</title>

          <para>Surround user is a mandatory field. It should contain a name
            of a valid Surround user that Parabuild will use to access the
            Surround server. The user should be allowed to access the Surround
            server beforehand. The user should be a part of a Surround group
            that has at least the following permission: Create Label, Generate
            Reports, View Repository List, View File History, View Branch
            History, Get File, Login Via CLI Client and View User.
          </para>
        </sect3>

        <sect3>
          <title>Surround Password</title>

          <para>Surround password is an optional field. This field should be
            set if the user defined in the Surround user field requires a
            password to access the Surround server.
          </para>
        </sect3>

        <sect3>
          <title>Branch Name</title>

          <para>Branch name is an mandatory field. Use this field to enter a
            name of a branch that Parabuild will use to access project code
            base.
          </para>
        </sect3>

        <sect3>
          <title>Repository</title>

          <para>Repository is an mandatory field. Use this field to enter a
            path the project home under Surround control. The repository should
            not have a leading slash character.
            <example>
              <title>Surround Repository</title>

              <para>myproject/framewor/version2</para>
            </example>
          </para>
        </sect3>
      </sect2>

      <sect2>
        <title>Configuring Vault Access</title>

        <para>To configure access to Vault version control system, fill in the
          following mandatory fields:
        </para>

        <itemizedlist>
          <listitem>
            <para>Vault server</para>
          </listitem>

          <listitem>
            <para>Vault user name</para>
          </listitem>

          <listitem>
            <para>Vault password</para>
          </listitem>

          <listitem>
            <para>Vault repository</para>
          </listitem>

          <listitem>
            <para>Repository path</para>
          </listitem>
        </itemizedlist>

        <para>The following fields are optional:</para>

        <itemizedlist>
          <listitem>
            <para>Connect using SSL</para>
          </listitem>
        </itemizedlist>

        <itemizedlist>
          <listitem>
            <para>Proxy server</para>
          </listitem>
        </itemizedlist>

        <itemizedlist>
          <listitem>
            <para>Proxy port</para>
          </listitem>
        </itemizedlist>

        <itemizedlist>
          <listitem>
            <para>Proxy user</para>
          </listitem>
        </itemizedlist>

        <itemizedlist>
          <listitem>
            <para>Proxy password</para>
          </listitem>
        </itemizedlist>

        <itemizedlist>
          <listitem>
            <para>Proxy domain</para>
          </listitem>
        </itemizedlist>

        <para>The meaning of each field discussed below.</para>

        <sect3>
          <title>Vault Server</title>

          <para>Entry type the name or the numeric IP address of the Vault
            server. This is not an URL. This is a mandatory field.
          </para>
        </sect3>

        <sect3>
          <title>Vault User name</title>

          <para>Enter user name that will be used to access the server. This
            used must be an active vault user as defined in the Vault Admin
            tool. This is a mandatory field.
          </para>
        </sect3>

        <sect3>
          <title>Vault Password</title>

          <para>Enter password of the user that will be used to access the
            server.
          </para>
        </sect3>

        <sect3>
          <title>Vault Repository</title>

          <para>Enter vault repository. This is a mandatory field.</para>
        </sect3>

        <sect3>
          <title>Repository Path</title>

          <para>Repository path is a mandatory field. It should be set to a
            fully qualified Vault path to a project home. Repository path should
            conform notation for Vault paths and begin with "$/".
          </para>

          <example>
            <title>Vault Repository Path</title>

            <para>
              <filename>$/projects/myproject_v_2_0</filename>
            </para>
          </example>

          <para>Parabuild supports multiple-path Vault projects. For multiple
            path projects each path should be entered one per line.
          </para>

          <example>
            <title>Vault Repository Path for Multi-path Vault Project</title>

            <para>
              <filename>$/projects/myproject_v_2_0</filename>
            </para>

            <para>
              <filename>$/projects/framework_v_1_1</filename>
            </para>
          </example>

          <para>All build scripts are executed with a project source line home
            as the current directory. The project source line home is the first
            line defined in the Vault project path. For example, if Vault
            project path is
            <filename>$/projects/myproject_v_2_0</filename>
            and
            the build script is stored in
            <filename>$/projects/myproject_v_2_0/nmake</filename>
            file, the
            build command may look like
          </para>

          <programlisting>NAnt all.clean</programlisting>

          <para>Considering the earlier example of a multi-path project, the
            Parabuild directory structure after receiving the project source
            lines may look like
          </para>

          <programlisting>C:\parabuild\etc\build\b0co\
            <emphasis role="bold">projects\myproject_v_2_0</emphasis>

            C:\parabuild\etc\build\b0co\
            <emphasis role="bold">projects\framework_v_1_1</emphasis>
          </programlisting>
        </sect3>

        <sect3>
          <title>Proxy Server</title>

          <para>Enter a name or a numerical IP address of a proxy server in
            this field. If Parabuild has to access Vault via proxy
            server.
          </para>
        </sect3>

        <sect3>
          <title>Proxy Port</title>

          <para>Enter a port number of a proxy server if Parabuild has to
            access Vault via proxy server.
          </para>
        </sect3>

        <sect3>
          <title>Proxy User</title>

          <para>Enter a user name that is going to be used to access proxy
            server in this field.
          </para>
        </sect3>

        <sect3>
          <title>Proxy Password</title>

          <para>Enter a password of the user that is going to be used to
            access proxy server.
          </para>
        </sect3>

        <sect3>
          <title>Proxy Domain</title>

          <para>Enter proxy domain name in this field.</para>
        </sect3>
      </sect2>

      <sect2>
        <title>Configuring Visual SourceSafe Access</title>

        <para>To configure access to Visual SourceSafe Access version control
          system, change the user that Parabuild service runs under, and fill in
          the following mandatory fields:
        </para>

        <itemizedlist>
          <listitem>
            <para>VSS database path</para>
          </listitem>

          <listitem>
            <para>Project path</para>
          </listitem>

          <listitem>
            <para>User</para>
          </listitem>

          <listitem>
            <para>Password</para>
          </listitem>

          <listitem>
            <para>Path to VSS client (SS.EXE)</para>
          </listitem>

          <listitem>
            <para>Read-only checkout</para>
          </listitem>
        </itemizedlist>

        <para>Meaning of each field discussed below.</para>

        <sect3>
          <title>Setting Parabuild Service User</title>

          <para>All VSS users must have the ability to read, write, create and
            erase files in the VSS directory and all subdirectories. Parabuild
            runs as a service under Windows using LocalSystem user account, the
            same account that most other services use. This user may not have
            enough permissions to access VSS database on the network. You need
            to change the users that Parabuild service runs under to address the
            permission issue. To change the user, please follow the detailed
            description provided in the section<link
                    linkend="changing_parabuild_service_user">Changing Parabuild service
              user</link>.
          </para>
        </sect3>

        <sect3>
          <title>VSS Database Path</title>

          <para>VSS database path is a mandatory field. VSS database path
            should be set to a fully qualified path to a directory containing
            VSS database.
          </para>

          <example>
            <title>VSS database path</title>

            <para>\\vss\database\data</para>
          </example>
        </sect3>

        <sect3>
          <title>Project Path</title>

          <para>Project path is a mandatory field. It should be set to a fully
            qualified VSS path to a project home. Project path should conform
            notation for VSS paths and begin with "$" sign.
          </para>

          <example>
            <title>VSS Project Path</title>

            <para>
              <filename>$/projects/myproject_v_2_0</filename>
            </para>
          </example>

          <para>Parabuild supports multiple path VSS projects. For multiple
            path projects each path should be entered one per line.
          </para>

          <example>
            <title>Multi-path VSS Project</title>

            <para>
              <filename>$/projects/myproject_v_2_0</filename>
            </para>

            <para>
              <filename>$/projects/framework_v_1_1</filename>
            </para>
          </example>

          <para>All build scripts are executed with a project source line home
            as the current directory. The project source line home is the first
            line defined in the VSS project path. For example, if VSS project
            path is
            <filename>$/projects/myproject_v_2_0</filename>
            and the
            build script is stored in
            <filename>$/projects/myproject_v_2_0/nmake</filename>
            file, the
            build command may look like
          </para>

          <programlisting>nmake all.clean</programlisting>

          <para>Considering the earlier example of a multi-path project, the
            Parabuild directory structure after receiving the project source
            lines may look like
          </para>

          <programlisting>C:\parabuild\etc\build\b0co\
            <emphasis role="bold">projects\myproject_v_2_0</emphasis>

            C:\parabuild\etc\build\b0co\
            <emphasis role="bold">projects\framework_v_1_1</emphasis>
          </programlisting>
        </sect3>

        <sect3>
          <title>User</title>

          <para>VSS user is a mandatory field. It should be set to a valid VSS
            user.
          </para>
        </sect3>

        <sect3>
          <title>Password</title>

          <para>VSS password is a mandatory field. It should be set to a valid
            password for the user configured earlier.
          </para>
        </sect3>

        <sect3>
          <title>Path To VSS Client (SS.EXE)</title>

          <para>Path to VSS client (SS.EXE) is a mandatory field. It should be
            set to a fully qualified path to the VSS command line client,
            SS.EXE. The path should be wrapped in double quotes if it contains
            spaces.
            <example>
              <title>Path to VSS Client</title>

              <para>
                <filename>C:\VisualSourceSafe\SS.EXE</filename>
              </para>
            </example>
            <example>
              <title>Path to VSS Client With Spaces in It</title>

              <para>
                <filename>"C:\Visual SourceSafe\SS.EXE"</filename>
              </para>
            </example>
          </para>
        </sect3>

        <sect3>
          <title>Read-only Check Out</title>

          <para>If box "Read-only checkout" is checked Parabuild will populate
            local copy with files having the read-only flag set.
          </para>
        </sect3>

        <sect3>
          <title>Limitations of Visual SourceSafe Labels</title>

          <para>Though Parabuild supports labeling projects under VSS control,
            Parabuild generally cannot guarantee that a label placed on a source
            line will reflect the source line state at the build time. This
            limitation comes from the fact that Visual SourceSafe does not
            support multiple labels on the same revision of a file, though it is
            normal that a given revision needs to be labeled more than once
            (consider a nightly QA build that labels a project if the build run
            is successful).
          </para>

          <para>Instead, Parabuild attempts to use the fact that VSS allows to
            create a "label" revision for a file. If labeling for a build that
            uses VSS is on, Parabuild will place a label immediately after the
            successful completion of a build run. Since there is a time window
            between start and finish of a build run, it is possible that there
            will be submissions within this window, and a label will be placed
            at the state of the source line which was not the one the build ran
            against in the first place.
          </para>

          <para>We do not recommend enabling labeling with automatic
            (integration) builds for VSS projects. There is little point in that
            because of the issues discussed above. With scheduled builds that
            may need labeling, we recommend to set up schedules in which builds
            run at times when there is minimal or no VSS submission activity
            (night time may work well).
          </para>
        </sect3>
      </sect2>

      <sect2>
        <title>Configuring Build Schedule</title>

        <para>The build schedule is configured by modifying fields provided by
          the "Schedule Settings" panel. The content of the panel depends on the
          build type and is discussed in the following sections.
        </para>

        <sect3>
          <title>Common Schedule Parameters</title>

          <para>The following schedule parameters are present in both
            automatic and scheduled builds:
          </para>

          <simplelist>
            <member>Clean checkout, builds</member>

            <member>Clean checkout if broken</member>

            <member>Clean checkout on agent change</member>

            <member>Sticky agent</member>
          </simplelist>

          <para>Meaning of each parameter is discussed below.</para>

          <sect4>
            <title>Clean Checkout Counter</title>

            <para>Field "Clean Checkout" defines the number of builds after
              that Parabuild will empty a directory that contains a build
              workspace and will perform a clean checkout. If "one" is entered
              in this field, Parabuild will perform the clean checkout before
              every build run. Set value of this field to zero to disable
              automatic emptying of the checkout directory.
            </para>
          </sect4>

          <sect4>
            <title>Performing Clean Checkout If Previous Build Was
              Broken
            </title>

            <para>If the check box "Clean checkout if broken" is checked,
              Parabuild will perform a clean checkout if the previous build run
              failed. By default this check box is unchecked.
            </para>
          </sect4>

          <sect4>
            <title>Performing Clean Checkout on Agent Change</title>

            <para>If the option "Clean checkout on agent change" is selected,
              Parabuild will perform a clean checkout every time an agent that
              the build is running on changes. To enable this option, check box
              "Clean checkout on agent change" under the build configuration
              tab. The check box is located on the schedule panel:
              <mediaobject>
                <imageobject>
                  <imagedata fileref="clean_checkout_on_agent_change.gif"/>
                </imageobject>
              </mediaobject>
            </para>
          </sect4>

          <sect4>
            <title>Using Sticky Agents</title>

            <para>If this option is selected, the build will try to keep
              running on the remote agent it has run initially. The build will
              move to another agent only if its current agent goes out of
              commission.
            </para>

            <para>This option is especially useful for configurations where
              populating a build workspace takes significant time. Long-running
              incremental builds may also benefit from selecting this option
              because staying on the same agent allows to avoid running a full
              build.
            </para>

            <para>To enable sticky build agents, check box "Sticky agent"
              under the build configuration tab. The check box is located on the
              schedule panel:
              <mediaobject>
                <imageobject>
                  <imagedata fileref="sticky_build_agents.gif"/>
                </imageobject>
              </mediaobject>
            </para>

            <note>
              <para>Selecting this option effectively disables load balancing
                for the build.
              </para>
            </note>
          </sect4>
        </sect3>

        <sect3>
          <title>Automatic Builds</title>

          <para>Automatic builds are also known as integration builds.
            Parabuild initiates an automatic build at every check-in (or a
            series of check-ins) into the version control system. The following
            schedule configuration settings are available for automatic
            builds:
          </para>

          <simplelist>
            <member>Field "Poll interval".</member>

            <member>Field "Cool-down interval".</member>

            <member>Field "Serialize this build".</member>
          </simplelist>

          <para>Meaning of each settings is discussed below.</para>

          <sect4>
            <title>Setting Poll Interval</title>

            <para>Field "Poll interval" defines number of seconds Parabuild
              waits before repeating check for new changes in the version
              control system.
            </para>
          </sect4>

          <sect4>
            <title>Enabling Build Serialization</title>

            <para>Checking box "Serialize this build" overrides a default
              system-wide setting for build serialization. If this box is
              checked, this build will start on an agent that is not busy
              running other builds.
            </para>
          </sect4>
        </sect3>

        <sect3>
          <title>Setting Cool-Down Interval</title>

          <para>An optional field "Cool-down interval" may contain a time
            interval in seconds that Parabuild will use to issue additional
            requests for information about new changes from the version control
            system. A new build run will be fired only after there are no more
            changes detected within the given cool-down interval. If new changes
            are detected, Parabuild will wait for this interval again. To
            disable this feature set the cool-down interval to zero. The default
            value for this field is zero (cool-down is disabled).
          </para>

          <para>The number of additional requests is limited to the value
            defined by the system-wide setting "Maximum cool-down attempts".
            This limit is used to avoid build not being fired continuously for
            active code bases.
            <important>
              <para>"Cool-down interval" is an advanced setting. It should be
                used with caution and only if the default value is not suitable.
                This setting is available only when an advanced build
                configuration is enabled using the system settings page. We
                strongly recommend avoiding using this feature unless this is
                absolutely necessary and instead relying on atomic change lists
                provided by your version control system when supported. Perforce
                and Subversion support atomic changes lists out of the box.
                Parabuild provides synthetic atomic change lists for Surround
                SCM, Visual SourceSafe and CVS.
              </para>
            </important>
          </para>
        </sect3>

        <sect3>
          <title>Scheduled Builds</title>

          <para>Parabuild runs scheduled builds at configured times. Scheduled
            builds can be used to run builds that are timed by their nature such
            as nightly, daily, or QA builds. The following schedule
            configuration settings are available for scheduled builds:
          </para>

          <simplelist>
            <member>Check box "Run if there are no changes".</member>

            <member>Schedule table.</member>
          </simplelist>

          <para>Meaning of each settings is discussed below.</para>

          <sect4>
            <title>Running Build If No New Changes</title>

            <para>If check box "Run if there are no changes" is checked,
              Parabuild run a build even if there are no new changes to the code
              base.
            </para>
          </sect4>

          <sect4>
            <title>Modifying Schedule Table</title>

            <para>Schedule table defines when to run scheduled builds and may
              contain one or more rows. Each row consists of the following entry
              fields:
              <simplelist>
                <member>Hour - Enter an hour when to run a build in this
                  field. The hour range is from 0 to 23. This is a mandatory
                  field.
                </member>

                <member><literal>Days of week</literal>- Enter days of week
                  when to run a build in this field. This field may contain
                  simple numbers ranging from 1 to 7 or may define a range.
                  1stands for Sunday, 2 stands for Monday, 3 stands for Tuesday,
                  4 stands for Wednesday, 5 stands for Thursday, 6 stands for
                  Friday and 7 stands for Saturday. For instance, if this field
                  contains "1-5" value, the build will run on 1,2,3,4 and 5 days
                  of week. Alternatively, names of day of week can be used. The
                  valid values
                  are<filename>MON</filename>,<filename>TUE</filename>,
                  <filename>WED</filename>,<filename>THU</filename>,
                  <filename>FRI</filename>,
                  <filename>SAT</filename>
                  and
                  <filename>SUN</filename>.
                </member>

                <member>
                  <literal>Days of month</literal>
                  - Enter days of month
                  when to run a build in this field. This field may contain
                  simple numbers ranging from 1 to 31 or may define a range or a
                  list of days. For instance, if this field contains "5, 13, 20"
                  value, the build will run on 5, 13, 20 days of a month. Leave
                  this field blank if you don't want to limit running a build to
                  particular days of month.
                </member>
              </simplelist>
            </para>
          </sect4>
        </sect3>
      </sect2>

      <sect2>
        <title>Configuring Build Labeling</title>

        <para>If a build run was successful, Parabuild may label (tag) the
          code base defined by the version control settings for the build. To
          enable labeling (tagging), select "Custom" radio button in the "Build
          label" group and enter the label template in the custom template
          field. The custom label templates can contain alphanumeric characters
          and "_" (underscore). The templates should start with a word
          character. Currently the label templates support the following
          properties that are set accordingly during the build time:
        </para>

        <simplelist>
          <member>
            <literal>build.name</literal>
            - will be replaced with the
            build name.
          </member>

          <member>
            <literal>build.number</literal>
            - will be replaced with the
            build number.
          </member>

          <member>
            <literal>build.date</literal>
            - will be replaced with the
            build date.
          </member>

          <member>
            <literal>build.timestamp</literal>
            - will be replaced with
            the build time stamp.
          </member>

          <member>
            <literal>changelist.number</literal>
            - will be replaced with
            the change list number the build run against. A synthetic change
            list number provided by Parabuild will be used if the build is
            configured with Surround, Visual SourceSave or CVS as version
            control systems. Build configurations backed by Perforce or
            Subversion will use native change list numbers.
          </member>
        </simplelist>

        <para>The
          <literal>build.date property</literal>
          has
          "<literal>yyyyMMdd</literal>" format. The
          <literal>build.timestamp</literal>
          property has
          "<literal>yyyyMMddHHmmss</literal>" format.
        </para>

        <example>
          <title>Composing Build Label Template</title>

          <para>A label template using the properties may look like the
            following:
          </para>

          <para>
            <filename>myproj_${build.name}_${build.number}_${build.timestamp}</filename>
          </para>

          <para>The resulting label name created by Parabuild for a build
            named my_build and build number 154 may look like:
          </para>

          <para>
            <filename>myproj_my_build_154_20040629124502</filename>
          </para>
        </example>
      </sect2>

      <sect2>
        <title>Configuring Dependent Build</title>

        <para>If a build run was successful, Parabuild may start other build.
          To enable starting other build, select the build using selection list
          "Start build on success" in the "Dependent Build".
        </para>

        <figure>
          <title>Configuring Dependent Build</title>

          <mediaobject>
            <imageobject>
              <imagedata align="center" fileref="dependent_build.gif"/>
            </imageobject>
          </mediaobject>
        </figure>
      </sect2>
    </sect1>

    <sect1>
      <title>Notification Settings Tab</title>

      <para>When a build step finishes, Parabuild sends an e-mail notification
        about step results to users who performed check-ins into the version
        control system. Notification settings tab allows you to
        configure:
      </para>

      <para>
        <itemizedlist>
          <listitem>
            <para>Notification policy</para>
          </listitem>

          <listitem>
            <para>Mapping names of users of a version control system to
              e-mail.
            </para>
          </listitem>

          <listitem>
            <para>Setting default e-mail domain</para>
          </listitem>

          <listitem>
            <para>Notifying other users</para>
          </listitem>
        </itemizedlist>
      </para>

      <sect2>
        <title>Setting Notification Policy</title>

        <para>Notifications policy settings control quantity of messages
          Parabuild sends to build run participants.
        </para>

        <para>Check "Send failures only" box to limit sending messages
          regarding build failures only. If this box is not checked, Parabuild
          will send messages regarding starting build steps and build steps
          results, both successful and failed.
        </para>

        <para>Check "Send failures only once" box to limit sending a message
          regarding a failed build step to new build run participants only. If
          the build is broken several times in a row, only new build
          participants will be receiving the failure message.
        </para>

        <para>Check "Send start notice" box to allow Parabuild sending a
          message regarding starting a build step. If this box is not checked,
          the message regarding starting a build step will not be sent.
        </para>

        <para>Check "Send start notice for first step only" to limit sending a
          message regarding starting a build step to the first step only.
        </para>

        <para>Check "Send result for last step only" to limit sending a
          message regarding outcome of a build step to the last step
          only.
        </para>

        <para>Check "Notify watchers only" box to limit sending messages to
          watchers and Parabuild administrator. Build run participants will not
          receive notification messages if this box is checked.
        </para>
      </sect2>

      <sect2>
        <title>Mapping Names of Users of a Version Control System to
          E-mail
        </title>

        <para>Parabuild allows you to associate the name of a user in version
          control with an e-mail address. When a user submits changes to version
          control system, the user's name will be matched with the e-mail
          address. Parabuild will use this address to send a notification about
          build result. Use table "Version control user to e-mail map" to add
          e-mails associated with names of version control users.
        </para>
      </sect2>

      <sect2>
        <title>Using E-mails Provided by Version Control System</title>

        <para>In addition to mapping names, Parabuild allows to use users'
          e-mail addresses directly from a version control system when
          available. Parabuild can retrieve e-mails of users from the following
          version control systems:
        </para>

        <para>
          <itemizedlist>
            <listitem>
              <para>Perforce</para>
            </listitem>

            <listitem>
              <para>CVS</para>
            </listitem>
          </itemizedlist>
        </para>

        <para>To allow using e-mails from a version control system enter
          domain name and check " Use version control e-mails" check box.
        </para>

        <para>Note: To use e-mails from CVS Parabuild, a user configured to
          access CVS should be allowed to
          read<filename>CVSROOT/users</filename>.
        </para>
      </sect2>

      <sect2>
        <title>Setting Default E-mail Domain</title>

        <para>Setting default e-mail domain can be useful when names of users
          in a version control system mostly match the name part of their e-mail
          address and when they belong to the same company or domain - then all
          you need to set up the notification part of the build configuration is
          to enter the default e-mail domain. Names of users that do not fit
          this can be explicitly mapped by filling the "version control user to
          e-mail map" table.
        </para>

        <para>If names of users of a version control system are not explicitly
          mapped to e-mail addresses, Parabuild will use default e-mail domain
          to compose e-mail addresses. Parabuild will make a fully qualified
          address by appending "@" and the default e-mail domain to the user
          name of the user.
        </para>

        <example>
          <title>Composing an e-mail address from user name and default e-mail
            domain
          </title>

          <para>If the name of the version control user were "john", and the
            default domain were mycompany.com, the resulting e-mail would be
            john@mycompany.com.
          </para>
        </example>
      </sect2>

      <sect2>
        <title>Notifying Other Users</title>

        <para>Adding Users to Build Watchers Table</para>

        <para>Parabuild allows you to send the build results notifications to
          users other than those whose changes triggered a build. Users
          interested in receiving notifications may include:
        </para>

        <para>
          <itemizedlist>
            <listitem>
              Members of an e-mail list that includes all members of engineering and/or QA teams.
            </listitem>

            <listitem>
              Build administrators
            </listitem>

            <listitem>
              Project mangers.
            </listitem>
          </itemizedlist>
        </para>

        <para>Use "Build watchers" table to add e-mail addresses of users to
          be notified about build results. Notification level defines content of
          the e-mail that will be sent.
        </para>

        <para>Notification Levels</para>

        <para>If "Build results only" level is set, Parabuild will send
          notification messages about successful and failed builds. This level
          is good for keeping engineers notified about current build
          statuses.
        </para>

        <para>A broken build is always an emergency. "Broken builds only"
          level can be used to notify team leaders, project managers, and other
          interested parties about broken builds.
        </para>

        <para>The "All" level suits the best needs of build administrators and
          release engineers who may need to react to the infrastructure problems
          and may want to be notified immediately if such problems occur. Such
          problems may include: unavailability of the version control or issue
          tracking systems, build configuration problems, etc. E-mail addresses
          that have the "All" level set will receive all messages sent by
          Parabuild, including notifications about successful and failed builds,
          and e-mails about infrastructure problems or system errors.
        </para>

        <para>Parabuild allows using names of Parabuild security groups as
          receivers of notifications messages.
        </para>
      </sect2>
    </sect1>

    <sect1>
      <title>Understanding Relative Paths</title>

      <para>Most of the custom log and build result configurations discussed
        in the following chapters use a notion of a relative path to describe
        location of a log file or a directory. A relative path is a path that is
        relative to a build directory. A build directory is a directory that
        used by Parabuild as a current directory to execute the shell commands
        from the build configuration.
      </para>

      <para>To find what an absolute path of the build directory is, add the
        command
      </para>

      <programlisting>
        echo %PARABUILD_BUILD_DIR%

      </programlisting>

      <para>for Windows or</para>

      <programlisting>
        echo $PARABUILD_BUILD_DIR

      </programlisting>

      <para>for Unix or Linux as the fist command in a build step field in the
        build sequence table. It will print the absolute path of the build
        directory in the main build step log.
      </para>
    </sect1>

    <sect1>
      <title>Build Logs Tab</title>

      <para>Parabuild automatically stores console output of each build run in
        a log archive. The Build Logs Tab allows configuring compression of
        archived logs and adding custom build logs so that they are available
        for future browsing.
      </para>

      <sect2>
        <title>Setting Up Build Logs Compression</title>

        <para>To save disk space, Parabuild allows to set the number of days
          after that archived logs will be compressed. Log compression is a
          seamless operation. Compressed logs are available for browsing and
          searching. Access to logs that are not compressed can be
          faster.
        </para>

        <para>The number of days mostly depends on concerns regarding the
          amount of free space on the disk drive. If the size of logs produced
          by each build run is small, we recommend using the default value of 30
          days. If the size reaches megabytes, set the number to a lower value.
          The minimum value is one day.
        </para>

        <para>Use "Compress build logs older than" field to set a number of
          days after that archived build logs should be compressed.
        </para>
      </sect2>

      <sect2>
        <title>Adding Custom Logs</title>

        <para>Parabuild allows you to configure additional build logs so that
          they are available for future browsing. Parabuild supports standard
          log types and a number of tool-specific log types, including:
        </para>

        <para>
          <itemizedlist>
            <listitem>
              <para>Single text file logs</para>
            </listitem>

            <listitem>
              <para>Directories with text files</para>
            </listitem>

            <listitem>
              <para>Single HTML file logs</para>
            </listitem>

            <listitem>
              <para>Directories with HTML files</para>
            </listitem>

            <listitem>
              <para>JUnit XML reports</para>
            </listitem>

            <listitem>
              <para>Boost Unit Test Framework XML reports</para>
            </listitem>

            <listitem>
              <para>GoogleTest XML reports</para>
            </listitem>

            <listitem>
              <para>PMD XML reports</para>
            </listitem>

            <listitem>
              <para>Squish test XML reports</para>
            </listitem>
          </itemizedlist>
        </para>

        <para>Use table "Custom logs" to configure additional build
          logs.
        </para>
      </sect2>

      <sect2>
        <title>Adding Single Text File Log</title>

        <para>To configure a single text file log, select "Single text file"
          in the log type drop down and click on the "Add" button. Fill in the
          "Description" and "Log path" entry fields. The "Description" field
          should contain some text describing the log. "Log path" should contain
          a path to the log file in text format. The path should be relative to
          the project home. If the log file is found, Parabuild will store the
          log file in the archive and will make it available for
          browsing.
        </para>
      </sect2>

      <sect2>
        <title>Adding Directory with Text File Logs</title>

        <para>To add a directory that contains logs in text format, select
          "Directory with text files" in the log type drop down and click on the
          "Add" button. Fill in the "Description", "Log path", and "Log file
          extensions" entry fields. The "Description" field should contain some
          text describing the log. "Log path" should contain a path to the
          directory that contains log files. The path should be relative to the
          project home. If the directory is found, Parabuild will store log
          files from this directory in the archive and will make the files
          available for browsing.
        </para>
      </sect2>

      <sect2>
        <title>Adding Directory with Boost Unit Test Framework Logs</title>

        <para>To add a directory that contains logs in Boost Unit Test
          Framework XML format, select "Boost Test" in the log type drop down
          and click on the "Add" button. Fill in the entry fields "Description"
          and "Log path". The "Description" field should contain some text
          describing the log. "Log path" should contain a path to the directory
          that contains XML log files. The path should be relative to the
          project home. If the directory is found, Parabuild will store log
          files from this directory in its internal archive and will make the
          formatted log and test statistics available for browsing:
        </para>

        <mediaobject>
          <imageobject>
            <imagedata fileref="boost_test_configuration.gif" format="GIF"/>
          </imageobject>
        </mediaobject>
      </sect2>

      <sect2>
        <title>Adding GoogleTest XML Log</title>

        <para>To add a path to a log in GoogleTest XML format, select
          "GoogleTest" in the log type drop down and click on the "Add" button.
          Fill in the entry fields "Description" and "Log path". The
          "Description" field should contain some text describing the log. "Log
          path" should contain a path to the GoogleTest log file. The path
          should be relative to the project home. If the file is found,
          Parabuild will store the log file in its internal archive and will
          make the formatted log and test statistics available for
          browsing:
        </para>

        <mediaobject>
          <imageobject>
            <imagedata fileref="googletest_configuration_snippet.gif"
                       format="GIF"/>
          </imageobject>
        </mediaobject>
      </sect2>

      <sect2>
        <title>Adding Single HTML File Log</title>

        <para>To configure a single HTML file log, select "Single HTML file"
          in a log type drop down and click on "Add" button. Fill in the
          "Description" and "Log path" entry fields. The "Description" field
          should contain some text describing the log. "Log path" should contain
          a path to a log file in HTML format. The path should be a path
          relative to the project home. If the file is found, Parabuild will
          store the log file in the archive and will make it available for
          browsing.
        </para>
      </sect2>

      <sect2 id="adding_single_html_file_log">
        <title>Adding HTML Directory Log</title>

        <para>To add a directory that contains a set of HTML files that can be
          seen as a single log, select "Directory with HTML files" in the log
          type drop down and click on the "Add" button. Fill in the
          "Description", "Log path", and "Index file" entry fields. The
          "Description" field should contain some text describing the log. "Log
          path" should contain a path to the directory that contains log files.
          The path should be relative to the project home. The "Index file"
          should point to a "home" index file. The path to the index file is
          relative to the "home" log directory. If the directory and the index
          file are found, Parabuild will store the directory in the archive and
          will make the files available for browsing.
        </para>

        <para>To understand the use of the "Log Path" and "Index file",
          consider this example of a file tree of a C++ project named "myproj20"
          after the completion of a build step. This project uses a tool that
          generates information about project test coverage in HTML
          format.
        </para>

        <programlisting>
          ./myproj20/lib
          ./myproj20/src/startup.cpp
          ./myproj20/src/threadmon.cpp
          ./myproj20/src/util.cpp
          ...
          ...
          ./myproj20/temp/logs/test_coverage/coverage.html
          ./myproj20/temp/logs/test_coverage/src/startup.html
          ./myproj20/temp/logs/test_coverage/src/threadmon.html
          ./myproj20/temp/logs/test_coverage/src/util.html
        </programlisting>

        <para>In this case the HTML directory log path would be "
          temp/logs/test_coverage" and the index file path would be "<filename>
            coverage.html</filename>"
        </para>
      </sect2>

      <sect2 id="adding_generic_test_results">
        <title>Adding Generic Test Results</title>

        <para>In addition to integrating with specialized testing tools such
          as JUnit, NUnit, Boost, CppUnit and others, Parabuild provides an
          ability to gather and report arbitrary test statistics. This ability
          is facilitated by the log type "Generic test result". To configure the
          generic test result, select "Generic test result" in a log type drop
          down and click on "Add" button. Fill in the "Description" and "Log
          path" entry fields. The "Description" field should contain some text
          describing the log. "Log path" should contain a path to a log file in
          the generic test result format. The path should be a path relative to
          the project home. If the file is found, Parabuild will record the test
          statistics in the archive and will make it available for
          browsing:
        </para>

        <mediaobject>
          <imageobject>
            <imagedata fileref="generic_test_result_configuration.gif"
                       format="GIF"/>
          </imageobject>
        </mediaobject>

        <para>Example of the content of a file with the generic test
          result:
        </para>

        <programlisting>
          test.errors=50
          test.failures=7
          test.skips=0
          test.successes=2034
        </programlisting>

        <para>In this example the log path would
          be<filename>temp/test/test-result.properties</filename>.
        </para>
      </sect2>

      <sect2>
        <title>Adding Squish XML Log</title>

        <para>To add a path to a log in Squish XML format, select "Squish XML
          log" in the log type drop down and click on the "Add" button. Fill in
          the entry fields "Description" and "Log path". The "Description" field
          should contain some text describing the log. "Log path" should contain
          a path to the Squish log file in XML format. The path should be
          relative to the project home. If the file is found, Parabuild will
          store the log file in its internal archive and will make the formatted
          log and test statistics available for browsing:
        </para>

        <mediaobject>
          <imageobject>
            <imagedata fileref="squish_configuration_snippet.gif" format="GIF"/>
          </imageobject>
        </mediaobject>
      </sect2>

      <sect2>
        <title>Using Template Parameters in Log Path</title>

        <para>Each log configuration allows using the following predefined, optional,
          template parameters in a path to the log. This allows accessing paths
          produced by the build that are dynamically created using build
          information such as a build number or a build date:
        </para>

        <para>
          <table>
            <title>Template Parameters for Log Path</title>

            <tgroup cols="2">
              <thead>
                <row>
                  <entry align="center">Parameter Name</entry>

                  <entry align="center">Parameter Value</entry>
                </row>
              </thead>

              <tbody>
                <row>
                  <entry>build.date</entry>

                  <entry>The date the build started, in YYYYMMDD
                    format.
                  </entry>
                </row>

                <row>
                  <entry>build.id</entry>

                  <entry>A unique build configuration ID.</entry>
                </row>

                <row>
                  <entry>build.name</entry>

                  <entry>The name of the build.</entry>
                </row>

                <row>
                  <entry>build.number</entry>

                  <entry>The number of the build.</entry>
                </row>

                <row>
                  <entry>build.run.id</entry>

                  <entry>The unique ID of the build.</entry>
                </row>

                <row>
                  <entry>build.timestamp</entry>

                  <entry>The date the build started, in yyyyMMddHHmmss
                    format.
                  </entry>
                </row>

                <row>
                  <entry>changelist.number</entry>

                  <entry>The number of the change list the build run
                    against.
                  </entry>
                </row>

                <row>
                  <entry>step.name</entry>

                  <entry>The name of the build step.</entry>
                </row>
              </tbody>
            </tgroup>
          </table>
        </para>

        <example>
          <title>Using Predefined Template Parameters in Log Path</title>

          <para>test_logs_<emphasis
                  role="bold">${build.timestamp}</emphasis>/junit_logs
          </para>
        </example>

        <para>In addition to the predefined parameters above, Parabuild allows using
          global, system-wide, parameters and parameters defined by the project, agent
          and build configurations.
        </para>

        <example>
          <title>Using Global Template Parameters in Log Path</title>

          <para>test_logs_<emphasis role="bold">${MY_LOG_PATH}</emphasis>/junit_logs
          </para>
        </example>

      </sect2>
    </sect1>

    <sect1>
      <title>Build Results Tab</title>

      <para>Parabuild allows to collect and archive results of a build run
        (build artifacts) for future download. "Build results" tab allows to
        configure various types of build results, including single files and
        directories. Configuring build results is optional.
      </para>

      <para>If the configured results are found, Parabuild will put the
        results into the internal archive and display "Results" link both on the
        build list and on the detailed build view.
      </para>

      <sect2>
        <title>Setting Up Automatic Deleting of Old Build Results</title>

        <para>To save disk space, Parabuild allows to set the number of days
          after that archived build results will be deleted.
        </para>

        <para>The number of days depends on balance of concerns regarding the
          amount of free space on the disk drive and need to access to past
          build results.
        </para>

        <para>Use "Delete build results older than" field to set a number of
          days after that archived build results should be deleted.
        </para>

        <para>Pinned builds results are not deleted.</para>

        <figure>
          <title>Setting Cut-off Time for Old Build Results</title>

          <mediaobject>
            <imageobject>
              <imagedata fileref="automatically_deleting_old_results_1.gif"/>
            </imageobject>
          </mediaobject>
        </figure>

        <sect3>
          <title>Preventing Deleting of Too Many Results</title>

          <para>Setting the cut off time in the form above to an accidentally
            small value could cause deleting of too many result from the build
            archive. To prevent this from happening, Parabuild provides a
            stability setting under the Administration menu that sets a global
            minimum result retention time:
            <figure>
              <title>Setting Global Minimum Result Retention Time</title>

              <mediaobject>
                <imageobject>
                  <imagedata fileref="automatically_deleting_old_results_2.gif"/>
                </imageobject>
              </mediaobject>
            </figure>
          </para>

          <para>If the value entered in the build configuration cut off time
            is too low, Parabuild won't allow to save the changes to the build
            confirmation and issue a error message. Parabuild will also ignore
            already existing settings if they are lower than the global
            minimum.
          </para>
        </sect3>
      </sect2>

      <sect2>
        <title>Configuring Single File Result</title>

        <para>To configure a single file build result, select "Single file" in
          a result type drop down list and click on the "Add" button. Fill in
          the "Description" and "Result path" entry fields. The "Description"
          field should contain some text describing the result. "Result path"
          should contain a path to a result file. The path should be relative to
          the project home. If the file is found upon completing of the build
          run, Parabuild will store the file in the archive and will make it
          available for downloading.
        </para>
      </sect2>

      <sect2>
        <title>Configuring Directory Result</title>

        <para>To add files in a directory, select "Directory" in the result
          type drop down list and click on the "Add" button. Fill in the
          "Description", "Result path" and "Result file extensions" fields. The
          "Description" field should contain a text describing the result.
          "Result path" should contain a path to the directory that contains
          result files. The path should be relative to the project home. File
          extensions should be separated by a comma or a space. If the directory
          is found, Parabuild will store files with given extensions from this
          directory in the archive and will make the files available for
          downloading.
        </para>
      </sect2>

      <sect2>
        <title>Configuring An External URL Result</title>

        <para>Parabuild allows configuring a result that will be presented as
          a URL link on the build result pages. To add an external URL result,
          select "External URL" in the result type drop down list and click on
          the "Add" button. Fill in the "Description" and "URL template" fields.
          The "Description" field should contain a text describing the result.
          "URL template" should contain a template for the resulting URL.
          Example:
          <emphasis>http://myhost:8080/build_results/${build.name}_${changelist.number}</emphasis>.
          Parabuild will replace the template parameters with actual values at
          build time. Check "Test URL for availability" box if you want
          Parabuild to verify availability of the build result defined by the
          URL by establishing a connection to it.
        </para>
      </sect2>

      <sect2>
        <title>Accessing Externally Stored Build Results</title>

        <para>You may need to store and to provide access to, build results
          outside of archive of build results managed by Parabuild. We recommend
          the following approach to providing access to externally stored
          results from Parabuild:
          <orderedlist>
            <listitem>
              <para>Create and store build results on network-accessible media
                as a part of your build script;
              </para>
            </listitem>

            <listitem>
              <para>Create and store a temporarily HTML file containing links
                to the build results;
              </para>
            </listitem>

            <listitem>
              <para>Create a configuration for a HTML file log as described in
                section
                <link linkend="adding_single_html_file_log">Adding a
                  Single HTML File Log
                </link>
                that points to the generated HTML
                file with the build results links. These links will be available
                for access on build logs pages provided by Parabuild;
              </para>
            </listitem>

            <listitem>
              <para>Inform members of your team about availability of and
                location of the links to the externally stored build results on
                the Parabuild build logs pages.
              </para>
            </listitem>
          </orderedlist>
        </para>

        <para>These steps will allow you to maintain external build results
          storage of any complexity.
        </para>
      </sect2>

      <sect2>
        <title>Using Template Parameters in Result Path</title>

        <para>Each result configuration allows using the following predefined, optional,
          template parameters in a path to the result. This allows accessing paths
          produced by the build that are dynamically created using build information
          such as a build number or a build date:
        </para>

        <para>
          <table>
            <title>Template Parameters for Result Path</title>

            <tgroup cols="2">
              <thead>
                <row>
                  <entry align="center">Parameter Name</entry>

                  <entry align="center">Parameter Value</entry>
                </row>
              </thead>

              <tbody>
                <row>
                  <entry>build.date</entry>

                  <entry>The date the build started, in YYYYMMDD
                    format.
                  </entry>
                </row>

                <row>
                  <entry>build.id</entry>

                  <entry>A unique build configuration ID.</entry>
                </row>

                <row>
                  <entry>build.name</entry>

                  <entry>The name of the build.</entry>
                </row>

                <row>
                  <entry>build.number</entry>

                  <entry>The number of the build.</entry>
                </row>

                <row>
                  <entry>build.run.id</entry>

                  <entry>The unique ID of the build.</entry>
                </row>

                <row>
                  <entry>build.timestamp</entry>

                  <entry>The date the build started, in yyyyMMddHHmmss
                    format.
                  </entry>
                </row>

                <row>
                  <entry>changelist.number</entry>

                  <entry>The number of the change list the build run
                    against.
                  </entry>
                </row>

                <row>
                  <entry>step.name</entry>

                  <entry>The name of the build step.</entry>
                </row>
              </tbody>
            </tgroup>
          </table>
        </para>

        <example>
          <title>Using Template Parameter in Result Path</title>

          <para>test_logs_<emphasis
                  role="bold">${build.timestamp}</emphasis>/junit_logs
          </para>
        </example>

        <para>In addition to the predefined parameters above, Parabuild allows using
          global, system-wide, parameters and parameters defined by the project, agent
          and build configurations.
        </para>

        <example>
          <title>Using Global Template Parameters in Log Path</title>

          <para>test_logs_<emphasis role="bold">${MY_LOG_PATH}</emphasis>/junit_logs
          </para>
        </example>

      </sect2>

      <sect2>
        <title>Publishing Build Results Automatically</title>

        <para>Parabuild provides a configuration parameter to publish a build
          result automatically to a previously created result group.
        </para>

        <figure>
          <title>Selecting Result Group for Automatic Build Result
            Publishing
          </title>

          <mediaobject>
            <imageobject>
              <imagedata align="center"
                         fileref="autopublish_build_results_snippet.gif"/>
            </imageobject>
          </mediaobject>
        </figure>
      </sect2>

      <sect2>
        <title>Ignoring Result Time Stamp</title>

        <para>By default, Parabuild will not archive results produced by
          previous build runs. Parabuild identifies such results by comparing a
          time stamp of a result path to the current system time. Sometimes it
          is necessary to archive the result produced by the previous build runs
          as a result produced by the current build run. Check box "Ignore time
          stamp" to enable archiving the results produced by the previous build
          runs.
        </para>

        <figure>
          <title>Ignoring Result Time Stamp</title>

          <mediaobject>
            <imageobject>
              <imagedata align="center" fileref="ignoring_timestamp.gif"/>
            </imageobject>
          </mediaobject>
        </figure>
      </sect2>

      <sect2>
        <title>Reporting Results of Parallel Builds On Leader Result
          Page
        </title>

        <para>Parabuild has an option to report to report results of a
          parallel build on build leader's result page. This allows for quick
          access to results of the parallel build without switching between
          builds.
        </para>

        <figure>
          <title>Reporting Results of Parallel Builds On Leader Result
            Page
          </title>

          <mediaobject>
            <imageobject>
              <imagedata align="center"
                         fileref="show_results_on_leader_page.gif"/>
            </imageobject>
          </mediaobject>
        </figure>
      </sect2>

      <sect2>
        <title>Debugging Build Result Path</title>

        <para>The only challenge when configuring results is providing a
          correct path to build results. The simplest way to find out if the
          path is correct is to add a command that lists content of a directory
          containing results as the last build step command:
          <programlisting>
            Windows:

            dir ./path/used/to/configure/results

            *nix:

            ls -al .\path\used\to\configure\results
          </programlisting>
        </para>
      </sect2>
    </sect1>

    <sect1>
      <title>Release Notes Tab</title>

      <para>Release notes is a list of fixed or closed issues, bugs and
        implemented requirements that are included in a build run. Parabuild
        supports collecting release notes from the following issue tracking
        systems:
      </para>

      <itemizedlist>
        <listitem>
          <para>Perforce jobs</para>
        </listitem>

        <listitem>
          <para>Bugzilla</para>
        </listitem>

        <listitem>
          <para>Jira</para>
        </listitem>
      </itemizedlist>

      <para>Release notes are available for scheduled builds only. Release
        notes are configured by selecting "Release notes" tab and adding a
        corresponding configuration for a selected issue tracking system.
      </para>

      <sect2>
        <title>Linking Release Notes And Changes</title>

        <para>Parabuild supports linking release notes and change lists to
          allow for tracking of what changes are made as a part of work on an
          issue. After Parabuild links change lists to issues, the linked change
          lists number are shown on the build run's "Release notes" page.
          Details of each issue and associated change lists are also
          available.
        </para>

        <sect3>
          <title>Linking Perforce Jobs And Change Lists</title>

          <para>Linking of Perforce jobs and change lists is performed
            automatically when "Perforce jobs" release notes handler is
            configured.
            <figure>
              <title>Configuring Perforce Jobs</title>

              <mediaobject>
                <imageobject>
                  <imagedata align="center"
                             fileref="p4_jobs_configuration_screenshot.gif"
                             format="GIF"/>
                </imageobject>
              </mediaobject>
            </figure>
          </para>
        </sect3>

        <sect3>
          <title>Linking Using Change List Description Content</title>

          <para>Linking of change lists and release notes collected from
            Bugzilla and JIRA is done by extracting issue keys from change list
            descriptors by using regular expressions. To be able to configure
            linking you should understand regular expressions in general and
            capturing groups in particular. Detailed discussion on regular
            expressions is outside of the scope of this manual. If needed,
            please refer extensive regular expressions resources available on
            the Internet.
          </para>

          <para>To enable linking for JIRA and Bugzilla configurations, fill
            the multi-line entry filed "Change to issue link patterns". This
            field should contain a single regular expression per line. These
            regular expressions will be used to find and to extract issue keys
            from change lists descriptions. Each regular expression should
            contain one or more capturing group. Each capturing group should
            capture an issue key in a format that exactly corresponds the format
            used by the issue tracker that linking is configured for.
            <tip>
              <para>For linking to be effective, your team should develop and
                agree on a simple, unambiguous standard of a format of how issue
                keys are mentioned in change list descriptors. Having this
                standard in place will allow capturing issue keys using regular
                expressions entered in the "Change to issue link patterns"
                field. Examples of such a standard can be statements such as
                these: "Change list containing a fix to a Bugzilla bug should
                contain a line "Fixed Bugzilla bug #&lt;NNNN&gt;" or "Change
                list implementing a change request should contain a line
                "Implemented JIRA &lt;PROJECT&gt;-&lt;NNN&gt;".
              </para>
            </tip>
          </para>

          <para>Below you can find examples of regular expression that you can
            use in configuring linking based on change list descriptions:
          </para>

          <simplelist>
            <member>
              <emphasis>
                <emphasis
                        role="bold">Bugzilla[a-zA-Z\s]*#([0-9]+)
                </emphasis>
              </emphasis>
              will extract Bugzilla bug identifiers "5555" and "7777" from
              change list descriptions such as "Starting working on Bugzilla
              #5555" and "Refactoring: moved method; fixed bugzilla bug #7777",
              accordingly.
            </member>

            <member>
              <emphasis>
                <emphasis role="bold">JIRA[a-zA-Z\s]*
                  ([a-zA-Z]-[0-9]+)
                </emphasis>
              </emphasis>
              will extract Jira issue
              keys "MYPROJ-5555", "MYPROJ-7777" and "MYPROJ-1234" from change
              list descriptions such as "Closed JIRA MYPROJ-5555", "Fixed JIRA
              MYPROJ-7777 and started working on JIRA MYPROJ-1234",
              accordingly.
            </member>
          </simplelist>
        </sect3>
      </sect2>

      <sect2>
        <title>Retrieving Release Notes From Bugzilla</title>

        <para>Parabuild retrieves release notes from Bugzilla using direct
          access to a Bugzilla database hosted by a MySQL server.
        </para>

        <para>A MySQL driver has to be installed before configuring Bugzilla
          as a source of release notes. To install the driver please follow
          these steps:
          <orderedlist>
            <listitem>
              <para>Go to
                http://dev.mysql.com/downloads/connector/j/3.1.html
              </para>
            </listitem>

            <listitem>
              <para>Download a binary distribution for MySQL Connector/J.
                Versions available as of this writing are
                <filename>mysql-connector-java-3.1.13.tar.gz</filename>
                and<filename>mysql-connector-java-3.1.13.zip</filename>.
              </para>
            </listitem>

            <listitem>
              <para>Untar/unzip file
                <filename>mysql-connector-java-3.1.13-bin.jar</filename>
                to
                <filename>&lt;parabuild install
                  dir&gt;/lib/common/lib
                </filename>
              </para>
            </listitem>

            <listitem>
              <para>Restart your Parabuild instance</para>
            </listitem>
          </orderedlist>
        </para>

        <para>To add Bugzilla as a source of release notes, select "Bugzilla -
          direct connection" using a drop-down list of available issue tackers
          and click on "Add" button. A Bugzilla configuration panel will be
          added to the "Release notes" tab. Fill required and optional entry
          fields to complete configuration. Meaning of each entry field on the
          panel is discussed below.
          <figure>
            <title>Configuring Bugzilla Integration</title>

            <mediaobject>
              <imageobject>
                <imagedata align="center"
                           fileref="bugzilla_configuration_screenshot.gif"
                           format="GIF"/>
              </imageobject>
            </mediaobject>
          </figure>
        </para>

        <sect3>
          <title>Bugzilla MySQL Host</title>

          <para>"Bugzilla MySQL host" entry field contains a DNS name or an IP
            address of a MySQL server hosting the Bugzilla database. This is a
            mandatory field.
          </para>
        </sect3>

        <sect3>
          <title>Bugzilla MySQL Port</title>

          <para>"Bugzilla MySQL port" entry field contains a port number of a
            MySQL server hosting the Bugzilla database. This is a mandatory
            field.
          </para>
        </sect3>

        <sect3>
          <title>Bugzilla MySQL Database</title>

          <para>"Bugzilla MySQL database" entry field contains a name of the
            Bugzilla database. This is a mandatory field.
          </para>
        </sect3>

        <sect3>
          <title>Bugzilla MySQL User</title>

          <para>"Bugzilla MySQL user" entry field contains a name of a user
            authorised to access the Bugzilla database. This is a mandatory
            field.
          </para>
        </sect3>

        <sect3>
          <title>Bugzilla MySQL Password</title>

          <para>"Bugzilla MySQL password" entry field contains a password of a
            user authorised to access the Bugzilla database. This is a mandatory
            field.
          </para>
        </sect3>

        <sect3>
          <title>Bugzilla Product</title>

          <para>"Bugzilla product" entry field contains a name of a product
            that release noted will be collected for. This is a mandatory
            field.
          </para>
        </sect3>

        <sect3>
          <title>Version</title>

          <para>"Version" entry field contains a version a product that
            release noted will be collected for. This is an optional field. If
            the version is not set, release notes will be requested for all
            versions of the product.
          </para>
        </sect3>

        <sect3>
          <title>Issue Filter</title>

          <para>"Issue filter" entry field contains a string that is used to
            decide if a bug should be included into release notes. Parabuild
            will search a summary of a bug for this string and will include the
            bug into release notes if the string is found. This is an optional
            field. Filtering is not performed if the filter is not set.
          </para>
        </sect3>

        <sect3>
          <title>Bug URL Template</title>

          <para>"Bug URL template" entry field may contain an optional URL
            template that Parabuild will use to create HTML links on its release
            notes pages to point to Bugzilla Web UI for quick access to bug
            details. The template can use a single ${bug.id} template
            parameter.
          </para>

          <example>
            <title>Bugzilla Bug URL Template</title>

            <para>http://bugzilla/track/show_bug.cgi?id=${bug.id}</para>
          </example>
        </sect3>
      </sect2>
    </sect1>

    <sect1>
      <title>Parameters Tab</title>

      <para>"Parameters" tab allows you to configure parameters that will be
        passed to your build scripts as shell variables. It is also possible to
        define a counter and a template that may be used to generate a string
        containing product version.
      </para>

      <sect2>
        <title>Version Counter</title>

        <para>Parabuild can keep track of a counter that may be used to form a
          string containing a product version. Version strings generated by
          Parabuild the are unique for the given build configuration. Parallel
          builds use product version generated by a leading build. The following
          entry fields and controls are available to support the version
          counter:
        </para>

        <itemizedlist>
          <listitem>
            <para>Check box "Enable version counter"</para>
          </listitem>

          <listitem>
            <para>Entry field "Version template"</para>
          </listitem>

          <listitem>
            <para>Drop down "Version counter increment"</para>
          </listitem>

          <listitem>
            <para>Check box "Increment if broken"</para>
          </listitem>
        </itemizedlist>

        <para>Meaning of each input control is discussed below.</para>

        <sect3>
          <title>Enable Version Counter</title>

          <para>Check the box "Enable version counter" to enable support for a
            version counter for this build configuration. If the version counter
            is enabled Parabuild will increment version counter automatically or
            using input when a build is started.
          </para>
        </sect3>

        <sect3>
          <title>Version Template</title>

          <para>Entry field "Version template" allows you entering a template
            that Parabuild will use to form a version string. The following
            template parameters are supported:
            <itemizedlist>
              <listitem>
                <para>
                  <filename>build.name</filename>
                  - contains build
                  name.
                </para>
              </listitem>

              <listitem>
                <para>
                  <filename>version.counter</filename>
                  - contains value of
                  the version counter.
                </para>
              </listitem>

              <listitem>
                <para><filename>build.number</filename>- contains build
                  number.
                </para>
              </listitem>
            </itemizedlist>
          </para>

          <para>Example:
            <filename>MyProduct
              2.5.${version.counter}.${build.number}
            </filename>
          </para>
        </sect3>

        <sect3>
          <title>Version Counter Increment</title>

          <para>Use drop down "Version counter increment" to select either a
            manual or automatic increment mode for the version counter. If the
            manual mode is selected Parabuild will not increment the counter.
            You will have to enter the counter value manually when a build start
            is requested. If the automatic mode is selected Parabuild will
            increment the version counter automatically or will use a value that
            was entered manually when a build start is requested.
          </para>
        </sect3>

        <sect3>
          <title>Increment If Broken</title>

          <para>By default Parabuild will not store the incremented version
            counter if a build run was broken. Check this box to enable storing
            the incremented version counter without regard to outcome of the
            build run.
          </para>
        </sect3>

        <sect3>
          <title>Showing Perforce Parameters</title>

          <para>A build of a manual schedule type that has Perforce as a
            version control system can be set up to show Perforce change list
            number and Perforce client view on a build start page. To enable
            showing Perforce parameters check box "Show Perforce Parameters". If
            enabled, it allows to set Perforce change list number and Perforce
            client view at build start. If these parameter are not set
            explicitly, a manual build will run again the latest change for the
            Perforce client view that is configured for the build.
          </para>
        </sect3>

        <sect3>
          <title>Build Instructions</title>

          <para>This feature provides an ability to enter detailed
            instructions for a particular build on the launch screen for users
            to read before kicking off a build. Text box "Build Instructions"
            can be configured to display information related to how a particular
            build should be run. Entry filed "Build Instructions URL" may
            contain a link from the launch screen to information that can be
            provided via a pop-up window or to a screen from an internal wiki
            page. This makes it easier for developers to understand how each
            build should be run. Displaying build instructions section is
            enabled on the User Interface Settings by checking box "Show build
            instructions":
            <mediaobject>
              <imageobject>
                <imagedata fileref="show_build_instructions.gif"/>
              </imageobject>
            </mediaobject>
          </para>

          <para>When the build instructions section is enabled, Parabuild will
            show the entry field on under the Build Parameters tab that can be
            user to enter the build instructions:
            <mediaobject>
              <imageobject>
                <imagedata fileref="show_build_instructions_tab.gif"/>
              </imageobject>
            </mediaobject>
          </para>

          <para>The build instructions will appear on the manual start page:
            <mediaobject>
              <imageobject>
                <imagedata fileref="show_build_instructions_start.gif"/>
              </imageobject>
            </mediaobject>
          </para>
        </sect3>
      </sect2>

      <sect2>
        <title>Parameters</title>

        <para>Table "Parameters" contains a list of definitions of parameters
          that will be passed to your build scripts when a build is started
          manually. Each table row contains the following entry fields and
          controls:
          <itemizedlist>
            <listitem>
              <para>Entry field "Variable name" should contain a name of a
                shell variable that will be passed to the build script.
              </para>
            </listitem>

            <listitem>
              <para>Entry field "Description" should contain a free-form
                description of the parameter.
              </para>
            </listitem>

            <listitem>
              <para>Drop down "Type" contains a list of possible ways of how a
                variable is presented to a user requesting a manual build start.
                This list includes the following options: "Check list", "Radio
                list", "Drop down list" and "Single value".
              </para>
            </listitem>

            <listitem>
              <para>Entry field "Values" contains a list of allowed values for
                the given parameter.
              </para>
            </listitem>

            <listitem>
              <para>Check box "Required" marks a required parameter.</para>
            </listitem>
          </itemizedlist>
        </para>

        <para>If box "Use first value as default" is checked, a parameter is
          passed to a build that is started automatically, too. The value of the
          parameter will be the first value from the list of allowed
          values.
        </para>

        <sect3>
          <title>Default Parameter Value</title>

          <para>A parameter can have a default value. If box "Use first value
            as default" is checked, the default values are be passed to the
            build script. This allows passing parameters to a build that is
            started either manually or automatically. Parameters are not passed
            to automatic builds if using the first value as default is not
            enabled.
          </para>

          <figure>
            <title>Enabling Using First Parameter Value as Default</title>

            <mediaobject>
              <imageobject>
                <imagedata align="center"
                           fileref="default_parameter_value_snippet.gif"/>
              </imageobject>
            </mediaobject>
          </figure>
        </sect3>
      </sect2>
    </sect1>
  </chapter>

  <chapter>
    <title>Managing Build Results</title>

    <para>Parabuild allows publishing build results so that they are available
      to users according to their access right. Published build results are
      accessible through the short-cut link "Results" on the top navigation bar
      on Web UI.
    </para>

    <para>This feature is useful when a build administrator wants to make
      build results easily accessible so that users don't have to go through the
      list of past build runs to find a particular build result. Members of the
      Quality Control group are often users of this feature.
    </para>

    <sect1>
      <title>Managing Build Result Groups</title>

      <para>Published build results are organized into build result groups. To
        access the list of build result groups click on link "Results". The page
        with a list of build result groups will appear. Managing build result
        groups is described in the following sections.
      </para>

      <sect2>
        <title>Adding A Build Result Group</title>

        <para>To add a build result group click on link "Add new result
          group". An entry form for a new build result group will appear. Fill
          mandatory fields "Result group name" and "Description" and click on
          button "Save".
        </para>
      </sect2>

      <sect2>
        <title>Editing A Build Result Group</title>

        <para>To edit a build result group click on link "Edit" that
          corresponds the build result group you would like to change. An entry
          form for the existing build result group will appear. Modify fields
          "Result group name" and "Description" and click on button
          "Save".
        </para>
      </sect2>

      <sect2>
        <title>Deleting A Build Result Group</title>

        <para>To delete a build result group click on link "Delete" that
          corresponds the build result group you would like to delete. Parabuild
          will delete this result group after receiving a confirmation.
        </para>
      </sect2>
    </sect1>

    <sect1>
      <title>Publishing Build Results</title>

      <para>Once build result groups are created it is possible to publish
        build results. Go to a page containing build results for a particular
        build run and click on "Edit results". Check boxes for results that you
        would like to publish, select the build result group that selected
        results should be published to, fill an optional field "Comment" and
        click on button "Save".
      </para>
    </sect1>
  </chapter>

  <chapter>
    <title>Managing Users And Groups</title>

    <para>Parabuild offers group-based security for restricted access to build
      statuses and results. Each user may belong to zero or more groups. Each
      group may have zero or more builds. A user has a read access to status and
      results of a particular build if the user belongs to a group that has the
      given build associated with the group.
    </para>

    <para>Only the build administrator has the right to create, read, update
      and delete system settings and build configurations, manage users, and
      perform other administrative tasks as forceful stopping and starting
      builds.
    </para>

    <sect1>
      <title>Simplified Security Mode</title>

      <para>If a software organization is not interested in restricting read
        access to build statuses and results, which is usually the case,
        Parabuild will provide a built-in "Anonymous" group to allow for a
        simplified security mode. The simplified security mode helps avoid
        administration overhead associated with user management. If a build
        belongs to the "Anonymous" group, users may access build status and
        build results without logging in into Parabuild by providing a user name
        and a password.
      </para>

      <para>The "Anonymous" group should be enabled explicitly. To enable the
        "Anonymous" group, go to System Settings page and check the "Enable
        Anonymous group" box.
      </para>

      <note>
        <para>When the "Anonymous" group is enabled, new build configurations
          are automatically added to the group.
        </para>
      </note>
    </sect1>

    <sect1>
      <title id="adding_a_user">Adding a User</title>

      <para>To add a user, click on the "Administration" menu link on the
        Parabuild top navigation bar. Click on the "Users" link under the
        "User Management" section to display a table containing a user list. Click on
        link "Add User". A new user form will be displayed. Fill in the required
        fields and click the "Save" button. To cancel the modifications click
        the "Cancel" button. The meaning of each field in the form is described
        below.
      </para>

      <sect2>
        <title>Login Name</title>

        <para>Login name is the name user uses to log in into Parabuild. This
          is a mandatory field.
        </para>
      </sect2>

      <sect2>
        <title>Full Name</title>

        <para>User's full name may include first and last names. This is a
          mandatory field.
        </para>
      </sect2>

      <sect2>
        <title>Login Password</title>

        <para>Enter in this field a password that you will use to log into
          Parabuild. This is a mandatory field when creating a new user.
        </para>
      </sect2>

      <sect2>
        <title>Retype Password</title>

        <para>Enter the same password that was entered in the "Login password"
          field.
        </para>
      </sect2>

      <sect2>
        <title>E-Mail</title>

        <para>User's e-mail address is a mandatory field. It should contain a
          valid e-mail address of the user.
        </para>
      </sect2>

      <sect2>
        <title>Admin User</title>

        <para>Checking this flag gives a user administrator privileges. A user
          with administrator privileges can do everything the admin user can do
          except deleting the admin user.
          <figure>
            <title>Enabling Using Change List Numbers as Build Numbers</title>

            <mediaobject>
              <imageobject>
                <imagedata fileref="admin_user.gif"/>
              </imageobject>
            </mediaobject>
          </figure>
        </para>
      </sect2>

      <sect2 id="user_instance_messaging">
        <title>Instant Messaging</title>

        <para>If the user would like to receive instant messaging
          notifications about build events, select the corresponding instant
          messenger type.
        </para>
      </sect2>

      <sect2>
        <title>Instant Messaging Address</title>

        <para>Enter user's instant messaging address in this field. The
          address should correspond with the selected messenger type.
        </para>
      </sect2>

      <sect2>
        <title>Notify About</title>

        <para>Use the corresponding check boxes to select the types of
          notification to be sent to the user's instant messaging
          address.
        </para>
      </sect2>

      <sect2>
        <title>Accessibility</title>

        <sect3>
          <title>Setting Build Status Refresh Rate</title>

          <para>Build status refresh rate defines how often the build status
            page is refreshed. The refresh rate is measured in seconds.
          </para>
        </sect3>

        <sect3>
          <title>Setting Successful Build Color</title>

          <para>Entry field "Successful build color" allows setting a color
            that Parabuild uses to mark successful builds. This field accepts a
            six-digit hexadecimal number in RGB format. The default value is
            006400 (dark green).
          </para>
        </sect3>

        <sect3>
          <title>Setting Failed Build Color</title>

          <para>Entry field "Failed build color" allows setting a color that
            Parabuild uses to mark failed builds. This field accepts a six-digit
            hexadecimal number in RGB format. The default value is 8b0000 (dark
            red).
          </para>
        </sect3>

        <sect3>
          <title>Selecting Default Display Group</title>

          <para>Drop down list "Default display group" allows selecting a
            display group that Parabuild will take a user to upon user log in.
            By default Parabuild will show all build statuses.
            <figure>
              <title>Selecting Default Display Group</title>

              <mediaobject>
                <imageobject>
                  <imagedata fileref="default_display_group.gif"/>
                </imageobject>
              </mediaobject>
            </figure>
          </para>
        </sect3>
      </sect2>

      <sect2>
        <title>User Belongs to Group(s)</title>

        <para>Select corresponding check boxes to add the user to a
          group.
        </para>
      </sect2>
    </sect1>

    <sect1>
      <title>Modifying a User</title>

      <para>To modify a user, click on the "Administration" menu link on the
        Parabuild top navigation bar. Click on the "Users" link under "Security"
        section to display a table containing the user list. Click on the "Edit"
        link located in the row that corresponds to the user you intend to edit.
        A user edit form will be displayed. Fill in the required fields and
        click the "Save" button. To cancel the modifications click on the
        "Cancel" button. The meaning of each field in the form is described in
        the
        <link linkend="adding_a_user">Adding a User</link>
        section.
      </para>
    </sect1>

    <sect1>
      <title>Deleting a User</title>

      <para>To delete a user, click on "Administration" menu link on the
        Parabuild top navigation bar. Click on the "Users" link under the
        "Security" section to display a table containing user list. Click on the
        "Delete" link located in the row that corresponds to the user you intend
        to delete. The user will be deleted after the confirmation of the delete
        request.
      </para>
    </sect1>

    <sect1>
      <title id="adding_a_group">Adding a Group</title>

      <para>To add a group, click on the "Administration" menu link on the
        Parabuild top navigation bar. Click on the "Groups" link under the
        "Security" section to display a table containing a list of groups. Click
        on the link "Add Group" link. A new group form will be displayed. Fill
        in the required fields and click the "Save" button. To cancel the
        modifications click the "Cancel" button. The meaning of each field in
        the form is described below.
      </para>

      <sect2>
        <title>Group Name</title>

        <para>Enter a short group name. This is a mandatory field</para>
      </sect2>

      <sect2>
        <title>Group Description</title>

        <para>Enter an extended group description. This is a mandatory
          field.
        </para>
      </sect2>

      <sect2>
        <title>Allowed to Access Builds</title>

        <para>This fields presents a list of builds that members of this group
          may access. Select the corresponding check boxes to add the build to
          the group.
        </para>
      </sect2>

      <sect2>
        <title>Rights</title>

        <para>This fields presents a list of permissions that members of this
          group have. The permissions are "Activate build", "Edit build", "Start build" and "Stop
          build". Use this permissions to allow members of the group to edit
          configurations of build included into the groups, activate and deactivate builds, and start or stop
          builds. Select the corresponding check boxes to add the rights to the
          group.
          <note>
            <para>"Activate build" right implies a right to deactivate a build. "Start build" right
              implies a right to request Parabuild to do a clean checkout for the next build run.
              "Stop build" implies a right to resume a stopped build.
            </para>
          </note>
        </para>
      </sect2>
    </sect1>

    <sect1>
      <title>Modifying a Group</title>

      <para>To modify a group, click on "Administration" menu link on
        Parabuild top navigation bar. Click on the "Groups" link under the
        "Security" section to display a table containing a list of groups. Click
        on the "Edit" link located in a row that corresponds to the group you
        intend to edit. A group edit form will be displayed. Fill in the
        required fields and click the "Save" button. To cancel the modifications
        click on the "Cancel" button. The meaning of each field in the form is
        described in the
        <link linkend="adding_a_user">Adding a Group</link>
        section.
      </para>
    </sect1>

    <sect1>
      <title>Deleting a Group</title>

      <para>To delete a group, click on "Administration" menu link on
        Parabuild top navigation bar. Click on the "Groups" link under the
        "Security" section to display a table containing a list of groups. Click
        on the "Delete" link located in a row that corresponds to the group you
        intend to delete. The group will be deleted after the confirmation of
        the delete request.
      </para>
    </sect1>
  </chapter>

  <chapter>
    <title>Managing Builds</title>

    <para>Parabuild provides an extensive set of commands to manage configured
      builds. The command list is accessible to a build administrator from build
      status pages and from build result pages. Each command is presented as a
      link on the command list page. To execute a command click on the
      corresponding link. The meaning of each command is discussed in the
      following sections.
    </para>

    <sect1>
      <title>Runtime Commands</title>

      <para>Runtime commands control build behaviour at run time. The
        following commands are available:
        <itemizedlist>
          <listitem>
            <para>Stop</para>
          </listitem>

          <listitem>
            <para>Stop a group</para>
          </listitem>

          <listitem>
            <para>Resume</para>
          </listitem>

          <listitem>
            <para>Resume a group</para>
          </listitem>

          <listitem>
            <para>Start</para>
          </listitem>

          <listitem>
            <para>Deactivate</para>
          </listitem>

          <listitem>
            <para>Activate</para>
          </listitem>

          <listitem>
            <para>Clean checkout</para>
          </listitem>

          <listitem>
            <para>Re-run</para>
          </listitem>
        </itemizedlist>
      </para>

      <sect2>
        <title>Stopping Build</title>

        <para>"Stop" command will stop the build if it is running. The build
          will enter a paused state. In the paused state an automatic build is
          not watching a version control for changes and a scheduled build does
          not start according to its schedule. The build still can be requested
          to start using "Start" command. A build in the paused state will not
          automatically resume its operation after server re-start. Paused build
          are visible to users who are not build administrators.
        </para>
      </sect2>

      <sect2>
        <title>Stopping Group</title>

        <para>"Stop a group" command allows to stop a group of builds at once:
          <mediaobject>
            <imageobject>
              <imagedata fileref="stop_resume_group.gif"/>
            </imageobject>
          </mediaobject>
          The stopped builds will enter a paused state. In the
          paused state an automatic build is not watching a version control for
          changes and a scheduled build does not start according to its
          schedule. The build still can be request to start using "Start"
          command. A build in the paused state will automatically resume its
          operation after server re-start. Paused build are visible to users who
          are not build administrators.
        </para>
      </sect2>

      <sect2>
        <title>Resuming Build</title>

        <para>"Resume" command will resume a previously paused build. After
          being resumed an automatic build is watching a version control for
          changes and a scheduled build starts according to its schedule.
        </para>
      </sect2>

      <sect2>
        <title>Resuming Group</title>

        <para>"Resume a group" command will resume a group previously paused
          builds. After being resumed an automatic build is watching a version
          control for changes and a scheduled build starts according to its
          schedule. Stopping and resuming a group of builds is also available
          from that page that displays statuses of builds attached to a
          particular build agent:
        </para>

        <mediaobject>
          <imageobject>
            <imagedata fileref="stop_resume_in_agent_status.gif"/>
          </imageobject>
        </mediaobject>
      </sect2>

      <sect2>
        <title id="start_build_command">Starting Build</title>

        <para>"Start" command requests a build to start without regard to the
          presence of new changes or a build schedule.
        </para>

        <para>After clicking in the "Start" link Parabuild will present a page
          with a build start form. The build start form allows entering manual
          configuration parameters according to the build configuration. It also
          allows entering a note for this build run, entering a optional label
          (tag) to apply to the code base and select if the build results should
          be pinned. Pinned build results are preserved when a clean up of the
          build archive is performed. If generating of product version is
          configured, Parabuild will allow entering or adjusting the version
          counter. After entering the build run parameters click on "Start"
          button to start the build.
        </para>

        <para>A user that started a build will receive a notification about
          build results even if her changes are not present in this
          build.
        </para>

        <sect3>
          <title>Running Build Against Perforce Change List Number Or
            Label
          </title>

          <para>Fill field "Change list number or label" to run a manual build
            against an arbitrary Perforce change list number or a label:
          </para>

          <figure>
            <title>Entering Perforce Change List Number for Manual
              Build
            </title>

            <mediaobject>
              <imageobject>
                <imagedata fileref="perforce_start_with_change_list_number_snippet.gif"
                           format="GIF"/>
              </imageobject>
            </mediaobject>
          </figure>
        </sect3>

        <sect3>
          <title>Starting Build Immediately After Saving Build
            Configuration
          </title>

          <para>Often changes to a build configuration require starting the
            build to make use of the changes. Now it is possible to start the
            build immediately after saving it:
          </para>

          <figure>
            <title>Starting Build Immediately After Saving Build
              Configuration
            </title>

            <mediaobject>
              <imageobject>
                <imagedata fileref="saving_and_starting_build.gif"
                           format="GIF"/>
              </imageobject>
            </mediaobject>
          </figure>
        </sect3>
      </sect2>

      <sect2>
        <title>Deactivating Build</title>

        <para>"Deactivate" command will move the build into an inactive state.
          It will stop the build if it is running. The build will enter an
          inactive state. In the inactive state an automatic build is not
          watching a version control for changes and a scheduled build does not
          start according to its schedule. The build still can be requested to
          start using "Start" command. A build in the inactive state will not
          automatically resume its operation after restarting Parabuild.
          Inactive builds are not visible to users who are not build
          administrators.
        </para>
      </sect2>

      <sect2>
        <title>Activating Build</title>

        <para>"Activate" command will resume a previously de-activated build.
          After being resumed an automatic build is watching a version control
          for changes and a scheduled build starts according to its
          schedule.
        </para>
      </sect2>

      <sect2>
        <title>Requesting Clean Checkout</title>

        <para>"Clean checkout" command request Parabuild to delete and to
          re-populate the current working copy when the build starts next
          time.
        </para>
      </sect2>

      <sect2>
        <title>Re-Running Build</title>

        <para>"Re-run" command allows re-running an arbitrary build. After
          clicking on the "Re-run" link Parabuild will present a page with a
          form requesting to enter the build number that should be re-run. Fill
          the build number and click on "Load parameters" button. Modify or fill
          the build run parameters as described in section
          <link
                  linkend="start_build_command">Start Command
          </link>
          and click on
          "Start" button to start the build.
        </para>
      </sect2>
    </sect1>

    <sect1>
      <title>Configuration Commands</title>

      <para>Configuration commands are used to for managing build
        configurations. The following commands are available:
        <itemizedlist>
          <listitem>
            <para>Edit</para>
          </listitem>

          <listitem>
            <para>Copy</para>
          </listitem>

          <listitem>
            <para>Delete</para>
          </listitem>

          <listitem>
            <para>Change schedule type</para>
          </listitem>
        </itemizedlist>
      </para>

      <para>The meaning of each command is decided in the following
        sections.
      </para>

      <sect2>
        <title>Editing Build Configuration</title>

        <para>Clicking on "Edit" link will open an entry form with this build
          configuration. Configuring a build is discussed in section<link
                  linkend="detailed_build_configuration">Detailed Build
            Configuration</link>.
        </para>
      </sect2>

      <sect2>
        <title>Copying Build Configuration</title>

        <para>"Copy" command provides a convenient way to quickly create a
          build configuration that closely resembles the current build
          configuration. You may find this command very useful when setting up
          build management for existing and new branches of your product code
          line.
        </para>

        <para>After clicking on the "Copy" link Parabuild will create an
          inactive copy of this build configuration and assign it an arbitrary
          name. After creating the copy Parabuild will show a page with options
          to edit or to active the new created build configuration. We
          recommend proceeding to editing the configuration and adjusting the
          build name and other parameter that are different from the original
          build configuration.
        </para>
      </sect2>

      <sect2>
        <title>Deleting Build Configuration</title>

        <para>"Delete" command will stop the build and delete this build
          configuration. Build logs an results are still accessible through the
          search function.
        </para>
      </sect2>

      <sect2>
        <title>Changing Schedule Type</title>

        <para>"Change schedule type" command allows to change the build
          schedule from manual to automatic and from automatic to manual. To
          change the schedule, visit build's link "Commands". Parabuild will
          show a page with a list of commands. Click on the link "Change
          schedule type":
        </para>

        <mediaobject>
          <imageobject>
            <imagedata fileref="change_schedule_type_link.gif" format="GIF"/>
          </imageobject>
        </mediaobject>

        <para>Parabuild will show a form for requesting the schedule change.
          Click on "Convert" button. Parabuild will change the schedule type and
          return to the list of build's commands:
        </para>

        <mediaobject>
          <imageobject>
            <imagedata fileref="change_schedule_type_form.gif" format="GIF"/>
          </imageobject>
        </mediaobject>
      </sect2>
    </sect1>

    <sect1>
      <title>Miscellaneous Commands</title>

      <para>Section "Miscellaneous commands" provides a list of commands that
        don't fit into any other category. This list includes "Diff"
        command.
      </para>

      <sect2>
        <title>Diff Command</title>

        <para>"Diff" command allows to enumerate changes between to arbitrary
          build numbers. Clicking on "Diff" link will open an entry form. Fill
          fields "From build" and "To build" and click in "OK" button to what
          changes have been recorded by Parabuild between these two build
          runs.
        </para>
      </sect2>
    </sect1>

    <sect1>
      <title>Maintenance Commands</title>

      <para>Maintenance commands are used for management of the build archive.
        The following command are available:
        <itemizedlist>
          <listitem>
            <para>Cleanup logs</para>
          </listitem>
        </itemizedlist>
        <itemizedlist>
          <listitem>
            <para>Cleanup results</para>
          </listitem>
        </itemizedlist>
      </para>

      <sect2>
        <title>Cleanup Logs Command</title>

        <para>Over time various build logs that Parabuild stored in its log
          archive may occupy significant disk space. "Cleanup up logs" command
          allows deleting logs that are older then a given number of days from
          the archive permanently. Fill field "Permanently delete build logs
          older than, days" and click on "Delete" button. After confirming the
          deletion Parabuild will delete the logs.
          <note>
            <para>Build logs may contain valuable information about past
              builds. We recommend using high-volume hard drives to host
              Parabuild instead of deleting build logs.
            </para>
          </note>
        </para>
      </sect2>

      <sect2>
        <title>Cleanup Results Command</title>

        <para>Over time build results that Parabuild stored in its results
          archive may occupy significant disk space. "Cleanup up results"
          command allows deletions results that are older then a given number of
          days from the archive permanently. Fill field "Permanently delete
          build results older than, days" and click on "Delete" button. After
          confirming the deletion Parabuild will delete the results. Parabuild
          will not delete pinned build results. Pinning build results is
          performed at build start time as described in section<link
                  linkend="start_build_command">Start Command</link>.
          <note>
            <para>Build results stored in Parabuild archive may contain
              valuable product information. We recommend using
              high-volume hard drives to host Parabuild instead of deleting
              build results.
            </para>
          </note>
        </para>
      </sect2>
    </sect1>

    <sect1>
      <title>Maintenance Commands</title>

      <para>Maintenance commands are used for management of the build archive.
        The following command are available:
        <itemizedlist>
          <listitem>
            <para>Cleanup logs</para>
          </listitem>
        </itemizedlist>
        <itemizedlist>
          <listitem>
            <para>Cleanup results</para>
          </listitem>
        </itemizedlist>
      </para>

      <sect2>
        <title>Cleanup Logs Command</title>

        <para>Over time various build logs that Parabuild stored in its log
          archive may occupy significant disk space. "Cleanup up logs" command
          allows deleting logs that are older then a given number of days from
          the archive permanently. Fill field "Permanently delete build logs
          older than, days" and click on "Delete" button. After confirming the
          deletion Parabuild will delete the logs.
          <note>
            <para>Build logs may contain valuable information about past
              builds. We recommend using high-volume hard drives to host
              Parabuild instead of deleting build logs.
            </para>
          </note>
        </para>
      </sect2>

      <sect2>
        <title>Cleanup Results Command</title>

        <para>Over time build results that Parabuild stored in its results
          archive may occupy significant disk space. "Cleanup up results"
          command allows deletions results that are older then a given number of
          days from the archive permanently. Fill field "Permanently delete
          build results older than, days" and click on "Delete" button. After
          confirming the deletion Parabuild will delete the results. Parabuild
          will not delete pinned build results. Pinning build results is
          performed at build start time as described in section<link
                  linkend="start_build_command">Start Command</link>.
          <note>
            <para>Build results stored in Parabuild archive may contain
              valuable product information. We recommend using
              high-volume hard drives to host Parabuild instead of deleting
              build results.
            </para>
          </note>
        </para>
      </sect2>
    </sect1>
  </chapter>

  <chapter>
    <title>Managing Build Results</title>

    <para>Parabuild collects build results according to the build
      configuration. Build results can be published to a result group.
    </para>

    <sect1>
      <title>Publishing Build Results</title>

      <para>An administrator may make results of a build run to be
        downloadable through the top navigation menu. Access to the published
        build results is controlled by server's security:
        <figure>
          <title>Accessing Published Build Results</title>

          <mediaobject>
            <imageobject>
              <imagedata fileref="build_result_groups.gif"/>
            </imageobject>
          </mediaobject>
        </figure>
      </para>

      <para>Once a result group is defined, it is possible to publish build
        results right off the build results page. Also, new build results page
        allows deleting selected build results. To publish a build result, check
        a box corresponding the selected result, select the result group and
        click on "Save" button. Provide an optional comment for this action by
        filling "Comment" field:
      </para>

      <figure>
        <title>Publishing Build Results</title>

        <mediaobject>
          <imageobject>
            <imagedata fileref="publishing_build_results.gif"/>
          </imageobject>
        </mediaobject>
      </figure>
    </sect1>

    <sect1>
      <title>Pinning Build Results At Publish Time</title>

      <para>It is possible to pin a build result at the time the result is
        published. A pinned build result is protected from being deleted as a
        part of a clean up operation. To pin the build result check box "Pin
        result":
        <figure>
          <title>Pinning Build Result At Publish Time</title>

          <mediaobject>
            <imageobject>
              <imagedata fileref="pin_build_results_snippet.gif"/>
            </imageobject>
          </mediaobject>
        </figure>
      </para>
    </sect1>
  </chapter>

  <chapter>
    <title>Configuring Remote Builds</title>

    <para>A build can be run by a Parabuild server itself or by a build farm
      that consists of a cluster of Parabuild instances running in a remote
      agent mode. Parabuild allows to change the build farm that a build is
      assingned to with a single click of a mouse. Parabuild running in the
      remote agent mode should be installed on the new agent host beforehand.
      Please refer to Installation Guide for details on installing Parabuild in
      the remote agent mode.
    </para>

    <para>In order to change the build farm a build is attached to, login to
      Parabuild as admin and select "Edit" command for the build you would like
      to modify. The build configuration screen will appear. The drop down field
      "Build farm" defines what build farm the build is assigned to. Change
      "Build farm" field to the desired build farm and click on the "Save"
      button. Parabuild will run the build in the new build farm. The change is
      effective immediately:
      <mediaobject>
        <imageobject>
          <imagedata fileref="build_farm_drop_down.gif"/>
        </imageobject>
      </mediaobject>
    </para>

    <sect1>
      <title>Startup Procedure for Build Manager and Remote Agents</title>

      <para>To start up the whole build infrastructure that uses remote
        agents, first start the remote agents and then start the build
        manager.
      </para>
    </sect1>

    <sect1>
      <title>Shutdown Procedure for Build Manager and Remote Agents</title>

      <para>To shutdown the whole build infrastructure that uses remote
        agents, first shutdown the build manager and then shutdown the remote
        agents.
      </para>
    </sect1>
  </chapter>

  <chapter>
    <title>Viewing System Errors</title>

    <para>To see a log of system errors, click on the "Errors" link on the top
      navigation bar. This link is visible to administrators and users for that
      an option "View system errors" is turned on. The log consists of a table
      that shows time an error occurred, error severity, an optional build name
      and an agent and a brief error description:
      <mediaobject>
        <imageobject>
          <imagedata fileref="build_name_and_agent_in_errors.gif"/>
        </imageobject>
      </mediaobject>
    </para>

    <para>To see error details click on the link for error time or the error
      description.
    </para>
  </chapter>

  <chapter>
    <title>Build Script Environment Variables</title>

    <para>Parabuild provides a set of environment variables available to build
      scripts. Build scripts may use the environment variables for many
      purposes. For instance, build scripts can use environment variable
      PARABUILD_BUILD_NUMBER to compose a name of resulting build package.
      <note>
        <para>Parabuild may add shell variables that are not documented in the
          following sections. Presence and content of such variables are not
          guaranteed. Your build scripts should not rely on the undocumented
          shell variables.
        </para>
      </note>
    </para>

    <sect1>
      <title>PARABUILD_BUILD_DATE</title>

      <para>Environment variable PARABUILD_BUILD_DATE holds value of a date a
        build run started on. PARABUILD_BUILD_DATE has
        "<literal>yyyyMMdd</literal>" format.
      </para>
    </sect1>

    <sect1>
      <title>PARABUILD_BUILD_DIR</title>

      <para>Environment variable PARABUILD_BUILD_DIR holds a full path to the
        directory where build step commands are called in.
      </para>
    </sect1>

    <sect1>
      <title>PARABUILD_BUILD_NAME</title>

      <para>Environment variable PARABUILD_BUILD_NAME holds a name of a build
        running.
      </para>
    </sect1>

    <sect1>
      <title>PARABUILD_BUILD_ID</title>

      <para>Environment variable PARABUILD_BUILD_ID holds a unique ID of the
        configuration of the running build.
      </para>
    </sect1>

    <sect1>
      <title>PARABUILD_BUILD_NUMBER</title>

      <para>Environment variable PARABUILD_BUILD_NUMBER holds value of a
        sequential build run number.
      </para>
    </sect1>

    <sect1>
      <title>PARABUILD_BUILD_RUN_ID</title>

      <para>Environment variable PARABUILD_BUILD_RUN_ID holds a unique
        system-wide ID assigned to this build run.
      </para>
    </sect1>

    <sect1>
      <title>PARABUILD_BUILD_STARTED_BY_USER</title>

      <para>Environment variable PARABUILD_BUILD_STARTED_BY_USER holds value
        of a name of a user who stated this build. If the build was started
        automatically this variable will contain value "system".
      </para>
    </sect1>

    <sect1>
      <title>PARABUILD_BUILD_TIMESTAMP</title>

      <para>Environment variable PARABUILD_BUILD_TIMESTAMP holds value of a
        date and time a build run started at. PARABUILD_BUILD_TIMESTAMP has
        "<literal>yyyyMMddHHmmss</literal>" format.
      </para>
    </sect1>

    <sect1>
      <title>PARABUILD_CHANGE_LIST_NUMBER</title>

      <para>Environment variable PARABUILD_CHANGE_LIST_NUMBER holds value of a
        last change list that made to this build run.
      </para>
    </sect1>

    <sect1>
      <title>PARABUILD_CLEAN_CHECKOUT</title>

      <para>Environment variable PARABUILD_CLEAN_CHECKOUT holds value "true"
        if a clean checkout was performed before starting this build. This
        environment variable is available to all steps of the build. This
        environment variable is not set if a clean check out was not
        performed
      </para>
    </sect1>

    <sect1>
      <title>PARABUILD_CHECKOUT_DIR</title>

      <para>Environment variable PARABUILD_CHECKOUT_DIR holds a name of a
        working directory that parabuild uses to check out the code base. Each
        build configuration uses its own checkout directory.
      </para>
    </sect1>

    <sect1>
      <title>PARABUILD_LAST_GOOD_BUILD_NUMBER</title>

      <para>If a last successful build is present, the environment variable
        PARABUILD_LAST_GOOD_BUILD_NUMBER holds the number of the last successful
        build.
      </para>
    </sect1>

    <sect1>
      <title>PARABUILD_LAST_GOOD_BUILD_DATETIME</title>

      <para>If a last successful build is present, the environment variable
        PARABUILD_LAST_GOOD_BUILD_DATETIME contains a string representation of
        the time that the last successful build started at in
        "<filename>yyyyMMddHHmmss</filename>" format.
      </para>
    </sect1>

    <sect1>
      <title>PARABUILD_LAST_GOOD_CHANGE_LIST_NUMBER</title>

      <para>If a last successful build is present, the environment variable
        PARABUILD_LAST_GOOD_CHANGE_LIST_NUMBER holds a number of a last change
        list that made to the last successful build run
      </para>
    </sect1>

    <sect1>
      <title>PARABUILD_LAST_GOOD_CHANGE_LIST_DATETIME</title>

      <para>If a last successful build is present, the environment variable
        PARABUILD_LAST_GOOD_CHANGE_LIST_DATETIME contains a string
        representation of a last change list that made to the last successful
        build run in "<filename>yyyyMMddHHmmss</filename>" format.
      </para>
    </sect1>

    <sect1>
      <title>PARABUILD_PREVIOUS_CHANGE_LIST_NUMBER</title>

      <para>If a previous build is present, the environment variable
        PARABUILD_PREVIOUS_CHANGE_LIST_NUMBER holds value of a last change list
        that made to the previous build run. This variable can be used to
        calculate changes between the current and the previous builds.
      </para>
    </sect1>

    <sect1>
      <title>PARABUILD_PREVIOUS_CHANGE_LIST_DATETIME</title>

      <para>If a previous build is present, the environment variable
        PARABUILD_PREVIOUS_CHANGE_LIST_DATETIME contains a string representation
        of the change list time stamp in "<filename>yyyyMMddHHmmss</filename>"
        format.
      </para>
    </sect1>

    <sect1>
      <title>PARABUILD_PROJECT_ID</title>

      <para>The environment variable PARABUILD_PROJECT_ID contains a unique ID
        of a project that the build belongs to.
      </para>
    </sect1>

    <sect1>
      <title>PARABUILD_PROJECT_NAME</title>

      <para>The environment variable PARABUILD_PROJECT_NAME contains a unique
        name of a project that the build belongs to.
      </para>
    </sect1>

    <sect1>
      <title>PARABUILD_STEP_NAME</title>

      <para>Environment variable PARABUILD_STEP_NAME holds a name of a step
        running.
      </para>
    </sect1>

    <sect1>
      <title>PARABUILD_PREVIOUS_STEPS</title>

      <para>Environment variable PARABUILD_PREVIOUS_STEPS holds a list of names
        of previous steps and their results.</para>

      <example>
        <title>Example of PARABUILD_PREVIOUS_STEPS Value
        </title>

        <para>
          <programlisting>BUILD:SUCCESSFUL;TEST:BROKEN</programlisting>
        </para>
      </example>
    </sect1>

    <sect1>
      <title>PARABUILD_VERSION</title>

      <para>Optional environment variable PARABUILD_VERSION holds value of
        version if it was generated.
      </para>
    </sect1>

    <sect1>
      <title>PARABUILD_SEQUENCE_NUMBER</title>

      <para>This environment variable holds an unique, low-value number. The
        number can be used by build configurations that are used to run
        server-side tests to generate non-conflicting port numbers for test
        services.
      </para>
    </sect1>

    <sect1>
      <title id="perforce_env_vars">Environment Variables for Perforce
        Builds
      </title>

      <para>The following environment variables are always available to build
        scripts running as a part of build configurations using Perforce as a
        version control system: PARABUILD_P4CLIENT, PARABUILD_P4PASSWD,
        PARABUILD_P4PORT and PARABUILD_P4USER. These variables can be used by
        build scripts to perform read-only operations using the client spec that
        Parabuild created for the build run.
      </para>

      <para>Parabuild may also set and make available to the build scripts
        shell variables P4CLIENT, P4PASSWD, P4PORT and P4USER if explicitly
        asked to do so. If these variable are already available to the
        environment used to start Parabuild, the variables will be overridden.
        To make P4CLIENT, P4PASSWD, P4PORT and P4USER available to your build
        scripts, check the "P4 variables override" box in the "P4 Settings"
        panel under the "Build configuration" tab. By default the box is not
        checked and the variables are not set. Variable P4PASSWD is not set if
        authentication mode p4 login is used.
      </para>

      <para>Please refer to Perforce documentation for detailed discussion of
        the shell variables P4CLIENT, P4PASSWD, P4PORT and P4USER.
      </para>

      <sect2>
        <title>PARABUILD_P4CLIENT</title>

        <para>Environment variable PARABUILD_P4CLIENT holds the same value as
          P4CLIENT that Parabuild used to access the code base being
          built.
        </para>
      </sect2>

      <sect2>
        <title>PARABUILD_P4PASSWD</title>

        <para>Environment variable PARABUILD_P4PASSWD holds the same value as
          P4PASSWD that Parabuild used to access the code base being built. This
          variable is not set if authentication mode p4 login is used.
        </para>
      </sect2>

      <sect2>
        <title>PARABUILD_P4PORT</title>

        <para>Environment variable PARABUILD_P4PORT holds the same value as
          P4PORT that Parabuild used to access the code base being built.
        </para>
      </sect2>

      <sect2>
        <title>PARABUILD_P4USER</title>

        <para>Environment variable PARABUILD_P4USER holds the same value as
          P4USER that Parabuild used to access the code base being built.
        </para>
      </sect2>
    </sect1>

    <sect1>
      <title id="cvs_env_vars">Environment Variables for CVS Builds</title>

      <para>The following environment variables are available to build scripts
        running as a part of build configurations using CVS as a version control
        system: PARABUILD_CVS_ROOT and PARABUILD_CVS_BRANCH.
      </para>

      <sect2>
        <title>PARABUILD_CVS_ROOT</title>

        <para>Environment variable PARABUILD_CVS_ROOT holds the same value as
          CVS_ROOT that Parabuild used to access the code base being
          built.
        </para>
      </sect2>

      <sect2>
        <title>PARABUILD_CVS_BRANCH</title>

        <para>Environment variable PARABUILD_CVS_BRANCH holds the name of the
          CVS branch that Parabuild used to access the code base being
          built.
        </para>
      </sect2>
    </sect1>

    <sect1>
      <title id="git_env_vars">Environment Variables for Git Builds</title>

      <para>The following environment variables are available to build scripts
        running as a part of build configurations using Git as a version control
        system: PARABUILD_GIT_BRANCH.
      </para>

      <sect2>
        <title>PARABUILD_GIT_BRANCH</title>

        <para>Optional environment variable PARABUILD_GIT_BRANCH holds a name of a
          Git branch that Parabuild used to access the code base being built.
        </para>
      </sect2>
    </sect1>

    <sect1>
      <title id="git_env_vars">Environment Variables for Subversion Builds</title>

      <para>The following environment variables are available to build scripts
        running as a part of build configurations using Git as a version control
        system: PARABUILD_SVN_REPOSITORY_PATH.
      </para>

      <sect2>
        <title>PARABUILD_SVN_REPOSITORY_PATH</title>

        <para>An optional environment variable PARABUILD_SVN_REPOSITORY_PATH the list of Subversion repository paths
          configured for the Subversion build.
        </para>
      </sect2>
    </sect1>

    <sect1>
      <title id="parallel_env_vars">Environment Variables for Parallel
        Builds
      </title>

      <para>The following environment variables are always available to build
        scripts running in parallel with a leading build:
        PARABUILD_LEADING_BUILD_ID, PARABUILD_LEADING_BUILD_NAME,
        PARABUILD_LEADING_BUILD_RUN_ID. These variables can be used by build
        scripts to create and to access a file storage that is shared between a
        parallel build and the leading build.
      </para>

      <sect2>
        <title>PARABUILD_LEADING_BUILD_ID</title>

        <para>Environment variable PARABUILD_LEADING_BUILD_ID holds a leading
          build ID.
        </para>
      </sect2>

      <sect2>
        <title>PARABUILD_LEADING_BUILD_NAME</title>

        <para>Environment variable PARABUILD_LEADING_BUILD_NAME holds a name
          of the leading build.
        </para>
      </sect2>

      <sect2>
        <title>PARABUILD_LEADING_BUILD_RUN_ID</title>

        <para>Environment variable PARABUILD_LEADING_BUILD_RUN_ID holds a
          leading build run ID.
        </para>
      </sect2>
    </sect1>

    <sect1>
      <title id="parallel_env_vars">Environment Variables for Dependent
        Builds
      </title>

      <para>The following environment variables are always available to build
        scripts running in builds that are started as a result of build
        dependency definition. These variables can be used by build scripts to
        create and to access a file storage that is shared between a dependent
        build and the build that started the dependent build.
      </para>

      <sect2>
        <title>PARABUILD_UPSTREAM_BUILD_ID</title>

        <para>Environment variable PARABUILD_UPSTREAM_BUILD_ID holds an ID of
          the build that started the dependent build.
        </para>
      </sect2>

      <sect2>
        <title>PARABUILD_UPSTREAM_BUILD_NAME</title>

        <para>Environment variable PARABUILD_UPSTREAM_BUILD_NAME holds a name
          of the build that started the dependent build.
        </para>
      </sect2>

      <sect2>
        <title>PARABUILD_UPSTREAM_BUILD_RUN_ID</title>

        <para>Environment variable PARABUILD_UPSTREAM_BUILD_RUN_ID holds a
          build run ID of the build that started the dependent build.
        </para>
      </sect2>
    </sect1>
  </chapter>

  <chapter>
    <title>Starting And Stopping Parabuild Service Under Windows</title>

    <section>
      <title>Starting Parabuild Service</title>

      <para>Parabuild is installed as a Windows service and is started
        automatically when the installation is complete. Parabuild service
        starts automatically when the Windows system is re-started.
      </para>

      <para>It is possible to start Parabuild service manually if it is not
        running, for example because it was stopped before. To start Parabuild
        from the command line, follow the steps below:
        <orderedlist>
          <listitem>
            <para>Press the "Start" button;</para>
          </listitem>

          <listitem>
            <para>Click on "Run" menu item;</para>
          </listitem>

          <listitem>
            <para>Type "cmd" in the "Open" field, a command shell will
              open;
            </para>
          </listitem>

          <listitem>
            <para>Type "net start parabuild". This command will start
              Parabuild service.
            </para>
          </listitem>
        </orderedlist>
      </para>

      <para>It is also possible to start Parabuild service using
        administrative interface:
        <orderedlist>
          <listitem>
            <para>Press the "Start" button;</para>
          </listitem>

          <listitem>
            <para>Click on "Settings" menu item, Windows control panel will
              open;
            </para>
          </listitem>

          <listitem>
            <para>Click on "Administrative Tools" icon;</para>
          </listitem>

          <listitem>
            <para>Click on "Services" icon, Services management window will
              open;
            </para>
          </listitem>

          <listitem>
            <para>Find Parabuild in the list of services, right click on it,
              select "Start". Parabuild service will start.
            </para>
          </listitem>
        </orderedlist>
      </para>
    </section>

    <section>
      <title>Stopping Parabuild Service</title>

      <para>It is possible to stop Parabuild service manually, for example to
        perform an upgrade. To stop Parabuild from the command line, follow the
        steps below:
        <orderedlist>
          <listitem>
            <para>Press the "Start" button;</para>
          </listitem>

          <listitem>
            <para>Click on "Run" menu item;</para>
          </listitem>

          <listitem>
            <para>Type "cmd" in the "Open" field, a command shell will
              open;
            </para>
          </listitem>

          <listitem>
            <para>Type "net stop Parabuild". This command will stop Parabuild
              service.
            </para>
          </listitem>
        </orderedlist>
      </para>

      <para>It is also possible to stop Parabuild service using administrative
        interface:
        <orderedlist>
          <listitem>
            <para>Press the "Start" button;</para>
          </listitem>

          <listitem>
            <para>Click on "Settings" menu item, Windows control panel will
              open;
            </para>
          </listitem>

          <listitem>
            <para>Click on "Administrative Tools" icon;</para>
          </listitem>

          <listitem>
            <para>Click on "Services" icon, Services management window will
              open;
            </para>
          </listitem>

          <listitem>
            <para>Find Parabuild in the list of services, right click on it,
              select "Stop". Parabuild service will stop.
            </para>
          </listitem>
        </orderedlist>
      </para>
    </section>

    <section id="changing_parabuild_service_user">
      <title>Changing Parabuild Service User Under Windows</title>

      <para>By default, Parabuild service runs as a user with name
        "LocalSystem". Certain version control systems, such as ClearCase,
        require their clients to run as a user other than "LocalSystem". To
        change a user Parabuild service runs as, follow the steps below:
      </para>

      <para>
        <orderedlist>
          <listitem>
            <para>Press the "Start" button;</para>
          </listitem>

          <listitem>
            <para>Click on "Settings" menu item, Windows control panel will
              open;
            </para>
          </listitem>

          <listitem>
            <para>Click on "Administrative Tools" icon;</para>
          </listitem>

          <listitem>
            <para>Click on "Services" icon, Services management window will
              open;
            </para>
          </listitem>

          <listitem>
            <para>Find Parabuild in the list of services, right click on it,
              select "Properties" menu item;
            </para>
          </listitem>

          <listitem>
            <para>Select "Log On" tab;</para>
          </listitem>

          <listitem>
            <para>Select "This account" radio button.</para>
          </listitem>

          <listitem>
            <para>Enter user name and password.</para>
          </listitem>

          <listitem>
            <para>Press "OK" button.</para>
          </listitem>
        </orderedlist>
      </para>

      <para>For changes to take effect, restart Parabuild service by stopping
        and starting it.
      </para>
    </section>

    <section>
      <title>Embedding Build Status Into Web Pages</title>

      <para>Parabuild allows embedding information about statuses of its
        builds into arbitrary web pages. Pages where such status can be used may
        include a front page of your project, online release notes e.t.c. To
        embed information about status of a particular build, add a the
        following single-line call to Javascript available from your Parabuild
        server. The example below shows an HTML fragment making a call to
        embeddable Javascript. Parabuild will show a small rectangular box with
        an icon and a link to the online build status. Color of the icon and a
        link depends on last build result:
        <example>
          <title>Embedding Build Status Into Web Pages</title>

          <para>
            <programlisting>&lt;table&gt;
              &lt;tr&gt;
              &lt;td&gt;
              <emphasis role="bold">&lt;script type="text/javascript" src="http://BUILD:8080/parabuild/build/status/buildstatus.js?buildid=5"/&gt;</emphasis>
              &lt;/td&gt;
              &lt;/tr&gt;
              &lt;/table&gt;
            </programlisting>
          </para>
        </example>
      </para>

      <para>In addition to the URL's required parameter
        <filename>buildid</filename>
        that should be set to the build ID for that
        the displayed status, Parabuild supports the following additional
        parameters:<filename>showbuildname</filename>,
        <filename>bordercolor</filename>
        and<filename>borderwidth</filename>.
        Meaning and use of each parameter is discussed below.
        <itemizedlist>
          <listitem>
            <para>
              <filename>showbuildname</filename>
              parameter may be set to
              true. If set, the build status information box will add a build
              name to status link.
            </para>
          </listitem>

          <listitem>
            <para>
              <filename>bordercolor</filename>
              parameter allows changing
              of color of the status information box. It should be a hexadecimal
              number. Example:<emphasis>00AABB</emphasis>.
            </para>
          </listitem>

          <listitem>
            <para>
              <filename>borderwidth</filename>
              parameter allows changing
              of width of the border that surrounds the status information box.
              It should be in a format accepted by CSS.
              Example:<emphasis>2px</emphasis>. To turn border off, set it to
              0px.
            </para>
          </listitem>
        </itemizedlist>
      </para>

      <example>
        <title>Using Parameters To Alter Appearance of Embedded Build Status
          Box
        </title>

        <para>
          <programlisting>&lt;table&gt;
            &lt;tr&gt;
            &lt;td&gt;
            &lt;script type="text/javascript" src="http://BUILD:8080/parabuild/build/status/buildstatus.js?buildid=5
            <emphasis role="bold">
              &amp;showbuildname=true&amp;bordercolor=00AABB&amp;borderwidth=2px</emphasis>"/&gt;
            &lt;/td&gt;
            &lt;/tr&gt;
            &lt;/table&gt;
          </programlisting>
        </para>
      </example>
    </section>
  </chapter>

  <chapter>
    <title>Backing Up Parabuild Installation</title>

    <para>Parabuild installation has to be backed up regularly and when is a
      upgrade is about to be performed. Frequency of backup depends on value of
      the build history. We recommend minimum frequency of once every week. To
      back up Parabuild installation put the following directories aside,
      preferably by copying to a location outside of the box running Parabuild:
      <itemizedlist>
        <listitem>
          <para>&lt;parabuild installation directory&gt;/etc/data</para>
        </listitem>

        <listitem>
          <para>&lt;parabuild installation directory&gt;/etc/logs</para>
        </listitem>

        <listitem>
          <para>&lt;parabuild installation directory&gt;/etc/results</para>
        </listitem>
      </itemizedlist>
    </para>
  </chapter>

  <chapter>
    <title>Build Server Security Implications</title>

    <para>Security implications of running a build server are significantly
      different from the ones of other components of a software change
      management (SCM) infrastructure, namely the version control systems and
      issue or bug trackers. The control users of such servers possess is
      usually limited to secured user interface fronts. As the result, securing
      such servers is a relatively simple task. Version control systems and
      issue trackers generally do not allow running arbitrary commands on the
      hosts running such servers.
    </para>

    <para>Unlike version control and issue tracking systems,<emphasis
            role="bold">build servers are inherently insecure because the main task of
      a build server is to run arbitrary shell commands controlled by
      users</emphasis>, directly or by invoking scripting languages or tools
      such as Perl, make or ANT. Such commands perform file and network
      operations that alter the file system, and they also access various local
      and network resources as part of normal operations. Thus, build servers
      are inherently insecure. This is generally not a problem in a controlled
      or trusted environment of a software organization where the employees are
      usually not considered a security threat.
    </para>

    <para>Running a build server in uncontrolled or untrustworthy environments
      may present a serious security challenge. In the uncontrolled environment
      malicious users can easily modify build scripts in a version control
      system to perform tasks presenting various security threats ranging from
      access to sensitive data to the disclosure of security arrangements that
      might compromise the surrounding security infrastructure.
      <important>
        <para>Understand that build servers do run user-controlled shell
          commands and scripts.
          <emphasis role="bold">Do not run Parabuild if one of these apply to you SCM infrastructure:
          </emphasis>
        </para>

        <para>1.<emphasis role="bold">Your version control system allows
          anonymous write access to your project source line</emphasis>;
        </para>

        <para>2.<emphasis role="bold">Untrustworthy persons have write access
          to project your source line</emphasis>;
        </para>

        <para>3.<emphasis role="bold">There is no gate keeping process for
          anonymous or untrustworthy submissions and checkins</emphasis>.
        </para>
      </important>
    </para>
  </chapter>

  <chapter>
    <title>Undocumented Commands</title>

    <para>Parabuild provides a set of commands that are not documented yet.
      These commands include:
      <itemizedlist>
        <listitem>
          <para>Delete working directories for all inactive builds</para>
        </listitem>
      </itemizedlist>
    </para>

    <para>The commands are available only to Parabuild administrator. The list
      of commands is accessible through the URL http://&lt;build manager
      host&gt;:8080/parabuild/undocumented.htm
    </para>
  </chapter>

  <glossary>
    <glossdiv>
      <title>Glossary</title>

      <glossentry>
        <glossterm>Location-independent Software Project</glossterm>

        <glossdef>
          <para>A software project that can be checked out from version
            control and built at an arbitrary location on a file system. Build
            scripts for a location-independent project don't make assumptions
            about their location on the file systems at build time. In addition
            to location independence, multi-platform location-independent
            projects can be built under different operating systems without
            changes to project build scripts.
          </para>
        </glossdef>
      </glossentry>
    </glossdiv>
  </glossary>
</book>
